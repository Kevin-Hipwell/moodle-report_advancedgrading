function _typeof2(e){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(e){return typeof e}}else{_typeof2=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof2(e)}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define ("report_advancedgrading/tabulator",t):(e="undefined"!=typeof globalThis?globalThis:e||self,e.Tabulator=t())})(this,function(){'use strict';function e(t){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){e=function(e){return typeof e}}else{e=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return e(t)}function t(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var l=0,o;l<t.length;l++){o=t[l];o.enumerable=o.enumerable||!1;o.configurable=!0;if("value"in o)o.writable=!0;Object.defineProperty(e,o.key,o)}}function o(e,t,o){if(t)l(e.prototype,t);if(o)l(e,o);return e}function a(e,t){if("function"!=typeof t&&null!==t){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});if(t)r(e,t)}function n(e){n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return n(e)}function r(e,t){r=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return r(e,t)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(t){return!1}}function d(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function u(e,t){if(t&&("object"===_typeof2(t)||"function"==typeof t)){return t}return d(e)}function c(e){var t=s();return function(){var l=n(e),o;if(t){var a=n(this).constructor;o=Reflect.construct(l,arguments,a)}else{o=l.apply(this,arguments)}return u(this,o)}}function m(e){return p(e)||g(e)||b(e)||v()}function p(e){if(Array.isArray(e))return h(e)}function g(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function b(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var l=Object.prototype.toString.call(e).slice(8,-1);if("Object"===l&&e.constructor)l=e.constructor.name;if("Map"===l||"Set"===l)return Array.from(e);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return h(e,t)}function h(e,t){if(null==t||t>e.length)t=e.length;for(var l=0,o=Array(t);l<t;l++){o[l]=e[l]}return o}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){var l;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(l=b(e))||t&&e&&"number"==typeof e.length){if(l)e=l;var a=0,n=function(){};return{s:n,n:function n(){if(a>=e.length)return{done:!0};return{done:!1,value:e[a++]}},e:function e(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=!0,s=!1,d;return{s:function s(){l=e[Symbol.iterator]()},n:function n(){var e=l.next();r=e.done;return e},e:function e(e){s=!0;d=e},f:function f(){try{if(!r&&null!=l.return)l.return()}finally{if(s)throw d}}}}var V=function(){function e(l){t(this,e);this.table=l}o(e,[{key:"reloadData",value:function(e,t){return this.table.dataLoader.load(e,void 0,void 0,void 0,t)}},{key:"langText",value:function(){var e;return(e=this.table.modules.localize).getText.apply(e,arguments)}},{key:"langBind",value:function(){var e;return(e=this.table.modules.localize).bind.apply(e,arguments)}},{key:"langLocale",value:function(){var e;return(e=this.table.modules.localize).getLocale.apply(e,arguments)}},{key:"commsConnections",value:function(){var e;return(e=this.table.modules.comms).getConnections.apply(e,arguments)}},{key:"commsSend",value:function(){var e;return(e=this.table.modules.comms).send.apply(e,arguments)}},{key:"layoutMode",value:function(){return this.table.modules.layout.getMode()}},{key:"layoutRefresh",value:function(){return this.table.modules.layout.layout()}},{key:"subscribe",value:function(){var e;return(e=this.table.eventBus).subscribe.apply(e,arguments)}},{key:"unsubscribe",value:function(){var e;return(e=this.table.eventBus).unsubscribe.apply(e,arguments)}},{key:"subscribed",value:function(e){return this.table.eventBus.subscribed(e)}},{key:"subscriptionChange",value:function(){var e;return(e=this.table.eventBus).subscriptionChange.apply(e,arguments)}},{key:"dispatch",value:function(){var e;return(e=this.table.eventBus).dispatch.apply(e,arguments)}},{key:"chain",value:function(){var e;return(e=this.table.eventBus).chain.apply(e,arguments)}},{key:"confirm",value:function(){var e;return(e=this.table.eventBus).confirm.apply(e,arguments)}},{key:"dispatchExternal",value:function(){var e;return(e=this.table.externalEvents).dispatch.apply(e,arguments)}},{key:"subscribedExternal",value:function(e){return this.table.externalEvents.subscribed(e)}},{key:"subscriptionChangeExternal",value:function(){var e;return(e=this.table.externalEvents).subscriptionChange.apply(e,arguments)}},{key:"options",value:function(e,t){if("undefined"!=typeof t){this.table.options[e]=t}return this.table.options[e]}},{key:"setOption",value:function(e,t){if("undefined"!=typeof t){this.table.options[e]=t}return this.table.options[e]}},{key:"module",value:function(e){return this.table.module(e)}}]);return e}(),N=function(){function e(l){t(this,e);this._column=l;this.type="ColumnComponent";return new Proxy(this,{get:function(e,t){if("undefined"!=typeof e[t]){return e[t]}else{return e._column.table.componentFunctionBinder.handle("column",e._column,t)}}})}o(e,[{key:"getElement",value:function(){return this._column.getElement()}},{key:"getDefinition",value:function(){return this._column.getDefinition()}},{key:"getField",value:function(){return this._column.getField()}},{key:"getCells",value:function(){var e=[];this._column.cells.forEach(function(t){e.push(t.getComponent())});return e}},{key:"isVisible",value:function(){return this._column.visible}},{key:"show",value:function(){if(this._column.isGroup){this._column.columns.forEach(function(e){e.show()})}else{this._column.show()}}},{key:"hide",value:function(){if(this._column.isGroup){this._column.columns.forEach(function(e){e.hide()})}else{this._column.hide()}}},{key:"toggle",value:function(){if(this._column.visible){this.hide()}else{this.show()}}},{key:"delete",value:function(){return this._column["delete"]()}},{key:"getSubColumns",value:function(){var e=[];if(this._column.columns.length){this._column.columns.forEach(function(t){e.push(t.getComponent())})}return e}},{key:"getParentColumn",value:function(){return this._column.parent instanceof Column?this._column.parent.getComponent():!1}},{key:"_getSelf",value:function(){return this._column}},{key:"scrollTo",value:function(){return this._column.table.columnManager.scrollToColumn(this._column)}},{key:"getTable",value:function(){return this._column.table}},{key:"move",value:function(e,t){var l=this._column.table.columnManager.findColumn(e);if(l){this._column.table.columnManager.moveColumn(this._column,l,t)}else{console.warn("Move Error - No matching column found:",l)}}},{key:"getNextColumn",value:function(){var e=this._column.nextColumn();return e?e.getComponent():!1}},{key:"getPrevColumn",value:function(){var e=this._column.prevColumn();return e?e.getComponent():!1}},{key:"updateDefinition",value:function(e){return this._column.updateDefinition(e)}},{key:"getWidth",value:function(){return this._column.getWidth()}},{key:"setWidth",value:function(e){var t;if(!0===e){t=this._column.reinitializeWidth(!0)}else{t=this._column.setWidth(e)}this._column.table.columnManager.renderer.rerenderColumns(!0);return t}}]);return e}(),I=function(){function e(l){t(this,e);this._cell=l;return new Proxy(this,{get:function(e,t){if("undefined"!=typeof e[t]){return e[t]}else{return e._cell.table.componentFunctionBinder.handle("cell",e._cell,t)}}})}o(e,[{key:"getValue",value:function(){return this._cell.getValue()}},{key:"getOldValue",value:function(){return this._cell.getOldValue()}},{key:"getInitialValue",value:function(){return this._cell.initialValue}},{key:"getElement",value:function(){return this._cell.getElement()}},{key:"getRow",value:function(){return this._cell.row.getComponent()}},{key:"getData",value:function(){return this._cell.row.getData()}},{key:"getField",value:function(){return this._cell.column.getField()}},{key:"getColumn",value:function(){return this._cell.column.getComponent()}},{key:"setValue",value:function(e,t){if("undefined"==typeof t){t=!0}this._cell.setValue(e,t)}},{key:"restoreOldValue",value:function(){this._cell.setValueActual(this._cell.getOldValue())}},{key:"restoreInitialValue",value:function(){this._cell.setValueActual(this._cell.initialValue)}},{key:"checkHeight",value:function(){this._cell.checkHeight()}},{key:"getTable",value:function(){return this._cell.table}},{key:"_getSelf",value:function(){return this._cell}}]);return e}(),W=function(l){a(n,l);var r=c(n);function n(e,l){var o;t(this,n);o=r.call(this,e.table);o.table=e.table;o.column=e;o.row=l;o.element=null;o.value=null;o.initialValue;o.oldValue=null;o.modules={};o.height=null;o.width=null;o.minWidth=null;o.component=null;o.loaded=!1;o.build();return o}o(n,[{key:"build",value:function(){this.generateElement();this.setWidth();this._configureCell();this.setValueActual(this.column.getFieldValue(this.row.data));this.initialValue=this.value}},{key:"generateElement",value:function(){this.element=document.createElement("div");this.element.className="tabulator-cell";this.element.setAttribute("role","gridcell");this.element=this.element}},{key:"_configureCell",value:function(){var e=this,t=this.element,l=this.column.getField();t.style.textAlign=this.column.hozAlign;if(this.column.vertAlign){t.style.display="inline-flex";t.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"";if(this.column.hozAlign){t.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||""}}if(l){t.setAttribute("tabulator-field",l)}if(this.column.definition.cssClass){var o=this.column.definition.cssClass.split(" ");o.forEach(function(e){t.classList.add(e)})}if("hover"===this.table.options.tooltipGenerationMode){t.addEventListener("mouseenter",function(){e._generateTooltip()})}this.dispatch("cell-init",this);if(!this.column.visible){this.hide()}}},{key:"_generateContents",value:function(){var t=this,l;l=this.chain("cell-format",this,null,function(){return t.element.innerHTML=t.value});switch(e(l)){case"object":if(l instanceof Node){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.element.appendChild(l)}else{this.element.innerHTML="";if(null!=l){console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l)}}break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=l;}}},{key:"cellRendered",value:function(){this.dispatch("cell-rendered",this)}},{key:"_generateTooltip",value:function(){var e=this.column.tooltip;if(e){if(!0===e){e=this.value}else if("function"==typeof e){e=e(this.getComponent());if(!1===e){e=""}}if("undefined"==typeof e){e=""}this.element.setAttribute("title",e)}else{this.element.setAttribute("title","")}}},{key:"getElement",value:function(e){if(!this.loaded){this.loaded=!0;if(!e){this.layoutElement()}}return this.element}},{key:"getValue",value:function(){return this.value}},{key:"getOldValue",value:function(){return this.oldValue}},{key:"setValue",value:function(e,t){var l=this.setValueProcessData(e,t);if(l){this.dispatch("cell-value-updated",this);this.cellRendered();this.dispatchExternal("cellEdited",this.getComponent());if(this.subscribedExternal("dataChanged")){this.dispatchExternal("dataChanged",this.table.rowManager.getData())}}}},{key:"setValueProcessData",value:function(e,t){var l=!1;if(this.value!=e){l=!0;if(t){e=this.chain("cell-value-changing",[this,e],null,e)}}this.setValueActual(e);if(l){this.dispatch("cell-value-changed",this)}return l}},{key:"setValueActual",value:function(e){this.oldValue=this.value;this.value=e;this.dispatch("cell-value-save-before",this);this.column.setFieldValue(this.row.data,e);this.dispatch("cell-value-save-after",this);if(this.loaded){this.layoutElement()}}},{key:"layoutElement",value:function(){this._generateContents();this._generateTooltip();this.dispatch("cell-layout",this)}},{key:"setWidth",value:function(){this.width=this.column.width;this.element.style.width=this.column.widthStyled}},{key:"clearWidth",value:function(){this.width="";this.element.style.width=""}},{key:"getWidth",value:function(){return this.width||this.element.offsetWidth}},{key:"setMinWidth",value:function(){this.minWidth=this.column.minWidth;this.element.style.minWidth=this.column.minWidthStyled}},{key:"setMaxWidth",value:function(){this.maxWidth=this.column.maxWidth;this.element.style.maxWidth=this.column.maxWidthStyled}},{key:"checkHeight",value:function(){this.row.reinitializeHeight()}},{key:"clearHeight",value:function(){this.element.style.height="";this.height=null}},{key:"setHeight",value:function(){this.height=this.row.height;this.element.style.height=this.row.heightStyled}},{key:"getHeight",value:function(){return this.height||this.element.offsetHeight}},{key:"show",value:function(){this.element.style.display=this.column.vertAlign?"inline-flex":""}},{key:"hide",value:function(){this.element.style.display="none"}},{key:"delete",value:function(){this.dispatch("cell-delete",this);if(!this.table.rowManager.redrawBlock&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}this.element=!1;this.column.deleteCell(this);this.row.deleteCell(this);this.calcs={}}},{key:"getIndex",value:function(){return this.row.getCellIndex(this)}},{key:"getComponent",value:function(){if(!this.component){this.component=new I(this)}return this.component}}]);return n}(V),G=function(l){a(n,l);var r=c(n);function n(e,l){var o;t(this,n);o=r.call(this,l.table);o.definition=e;o.parent=l;o.type="column";o.columns=[];o.cells=[];o.element=o.createElement();o.contentElement=!1;o.titleHolderElement=!1;o.titleElement=!1;o.groupElement=o.createGroupElement();o.isGroup=!1;o.tooltip=!1;o.hozAlign="";o.vertAlign="";o.field="";o.fieldStructure="";o.getFieldValue="";o.setFieldValue="";o.titleFormatterRendered=!1;o.mapDefinitions();o.setField(o.definition.field);o.modules={};o.width=null;o.widthStyled="";o.maxWidth=null;o.maxWidthStyled="";o.minWidth=null;o.minWidthStyled="";o.widthFixed=!1;o.visible=!0;o.component=null;if(o.definition.columns){o.isGroup=!0;o.definition.columns.forEach(function(e){var t=new n(e,d(o));o.attachColumn(t)});o.checkColumnVisibility()}else{l.registerColumnField(d(o))}o._initialize();o.bindModuleColumns();return o}o(n,[{key:"createElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-col");e.setAttribute("role","columnheader");e.setAttribute("aria-sort","none");return e}},{key:"createGroupElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-col-group-cols");return e}},{key:"mapDefinitions",value:function(){var e=this.table.options.columnDefaults;if(e){for(var t in e){if("undefined"==typeof this.definition[t]){this.definition[t]=e[t]}}}this.definition=this.table.columnManager.optionsList.generate(n.defaultOptionList,this.definition)}},{key:"checkDefinition",value:function(){var e=this;Object.keys(this.definition).forEach(function(t){if(-1===n.defaultOptionList.indexOf(t)){console.warn("Invalid column definition option in '"+(e.field||e.definition.title)+"' column:",t)}})}},{key:"setField",value:function(e){this.field=e;this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[];this.getFieldValue=1<this.fieldStructure.length?this._getNestedData:this._getFlatData;this.setFieldValue=1<this.fieldStructure.length?this._setNestedData:this._setFlatData}},{key:"registerColumnPosition",value:function(e){this.parent.registerColumnPosition(e)}},{key:"registerColumnField",value:function(e){this.parent.registerColumnField(e)}},{key:"reRegisterPosition",value:function(){if(this.isGroup){this.columns.forEach(function(e){e.reRegisterPosition()})}else{this.registerColumnPosition(this)}}},{key:"_mapDepricatedFunctionality",value:function(){}},{key:"setTooltip",value:function(){var e=this,t=this.definition,l="undefined"==typeof t.headerTooltip?t.tooltip:t.headerTooltip;if(l){if(!0===l){if(t.field){this.langBind("columns|"+t.field,function(l){e.element.setAttribute("title",l||t.title)})}else{this.element.setAttribute("title",t.title)}}else{if("function"==typeof l){l=l(this.getComponent());if(!1===l){l=""}}this.element.setAttribute("title",l)}}else{this.element.setAttribute("title","")}}},{key:"_initialize",value:function(){var e=this,t=this.definition;while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}if(t.headerVertical){this.element.classList.add("tabulator-col-vertical");if("flip"===t.headerVertical){this.element.classList.add("tabulator-col-vertical-flip")}}this.contentElement=this._bindEvents();this.contentElement=this._buildColumnHeaderContent();this.element.appendChild(this.contentElement);if(this.isGroup){this._buildGroupHeader()}else{this._buildColumnHeader()}this.setTooltip();this.dispatch("column-init",this);this.element.addEventListener("mouseenter",function(){e.setTooltip()})}},{key:"_bindEvents",value:function(){var t=this,l=this.definition,o,a,n;if("function"==typeof l.headerClick){this.element.addEventListener("click",function(o){l.headerClick(o,t.getComponent())})}if("function"==typeof l.headerDblClick){this.element.addEventListener("dblclick",function(o){l.headerDblClick(o,t.getComponent())})}if("function"==typeof l.headerContext){this.element.addEventListener("contextmenu",function(o){l.headerContext(o,t.getComponent())})}if("function"==typeof l.headerTap){n=!1;this.element.addEventListener("touchstart",function(){n=!0},{passive:!0});this.element.addEventListener("touchend",function(o){if(n){l.headerTap(o,t.getComponent())}n=!1})}if("function"==typeof l.headerDblTap){o=null;this.element.addEventListener("touchend",function(a){if(o){clearTimeout(o);o=null;l.headerDblTap(a,t.getComponent())}else{o=setTimeout(function(){clearTimeout(o);o=null},300)}})}if("function"==typeof l.headerTapHold){a=null;this.element.addEventListener("touchstart",function(t){clearTimeout(a);a=setTimeout(function(){clearTimeout(a);a=null;n=!1;l.headerTapHold(t,this.getComponent())},1e3)},{passive:!0});this.element.addEventListener("touchend",function(){clearTimeout(a);a=null})}}},{key:"_buildColumnHeader",value:function(){var e=this,t=this.definition,l=this.table;this.dispatch("column-layout",this);if("undefined"!=typeof t.visible){if(t.visible){this.show(!0)}else{this.hide(!0)}}if(t.cssClass){var o=t.cssClass.split(" ");o.forEach(function(t){e.element.classList.add(t)})}if(t.field){this.element.setAttribute("tabulator-field",t.field)}this.setMinWidth(parseInt(t.minWidth));if(t.maxWidth){this.setMaxWidth(parseInt(t.maxWidth))}this.reinitializeWidth();this.tooltip=this.definition.tooltip;this.hozAlign=this.definition.hozAlign;this.vertAlign=this.definition.vertAlign;this.titleElement.style.textAlign=this.definition.headerHozAlign}},{key:"_buildColumnHeaderContent",value:function(){var e=this.definition,t=this.table,l=document.createElement("div");l.classList.add("tabulator-col-content");this.titleHolderElement=document.createElement("div");this.titleHolderElement.classList.add("tabulator-col-title-holder");l.appendChild(this.titleHolderElement);this.titleElement=this._buildColumnHeaderTitle();this.titleHolderElement.appendChild(this.titleElement);return l}},{key:"_buildColumnHeaderTitle",value:function(){var e=this,t=this.definition,l=document.createElement("div");l.classList.add("tabulator-col-title");if(t.editableTitle){var o=document.createElement("input");o.classList.add("tabulator-title-editor");o.addEventListener("click",function(t){t.stopPropagation();o.focus()});o.addEventListener("change",function(){t.title=o.value;e.dispatchExternal("columnTitleChanged",e.getComponent())});l.appendChild(o);if(t.field){this.langBind("columns|"+t.field,function(e){o.value=e||t.title||"&nbsp;"})}else{o.value=t.title||"&nbsp;"}}else{if(t.field){this.langBind("columns|"+t.field,function(o){e._formatColumnHeaderTitle(l,o||t.title||"&nbsp;")})}else{this._formatColumnHeaderTitle(l,t.title||"&nbsp;")}}return l}},{key:"_formatColumnHeaderTitle",value:function(t,l){var o=this.chain("column-format",[this,l,t],null,function(){return l});switch(e(o)){case"object":if(o instanceof Node){t.appendChild(o)}else{t.innerHTML="";console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",o)}break;case"undefined":case"null":t.innerHTML="";break;default:t.innerHTML=o;}}},{key:"_buildGroupHeader",value:function(){var e=this;this.element.classList.add("tabulator-col-group");this.element.setAttribute("role","columngroup");this.element.setAttribute("aria-title",this.definition.title);if(this.definition.cssClass){var t=this.definition.cssClass.split(" ");t.forEach(function(t){e.element.classList.add(t)})}this.titleElement.style.textAlign=this.definition.headerHozAlign;this.element.appendChild(this.groupElement)}},{key:"_getFlatData",value:function(e){return e[this.field]}},{key:"_getNestedData",value:function(e){for(var t=e,l=this.fieldStructure,o=l.length,a,n=0;n<o;n++){t=t[l[n]];a=t;if(!t){break}}return a}},{key:"_setFlatData",value:function(e,t){if(this.field){e[this.field]=t}}},{key:"_setNestedData",value:function(e,t){for(var l=e,o=this.fieldStructure,a=o.length,n=0;n<a;n++){if(n==a-1){l[o[n]]=t}else{if(!l[o[n]]){if("undefined"!=typeof t){l[o[n]]={}}else{break}}l=l[o[n]]}}}},{key:"attachColumn",value:function(e){if(this.groupElement){this.columns.push(e);this.groupElement.appendChild(e.getElement())}else{console.warn("Column Warning - Column being attached to another column instead of column group")}}},{key:"verticalAlign",value:function(e,t){var l=this.parent.isGroup?this.parent.getGroupElement().clientHeight:t||this.parent.getHeadersElement().clientHeight;this.element.style.height=l+"px";if(this.isGroup){this.groupElement.style.minHeight=l-this.contentElement.offsetHeight+"px"}if(!this.isGroup&&"top"!==e){if("bottom"===e){this.element.style.paddingTop=this.element.clientHeight-this.contentElement.offsetHeight+"px"}else{this.element.style.paddingTop=(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"}}this.columns.forEach(function(t){t.verticalAlign(e)})}},{key:"clearVerticalAlign",value:function(){this.element.style.paddingTop="";this.element.style.height="";this.element.style.minHeight="";this.groupElement.style.minHeight="";this.columns.forEach(function(e){e.clearVerticalAlign()})}},{key:"bindModuleColumns",value:function(){if("rownum"==this.definition.formatter){this.table.rowManager.rowNumColumn=this}}},{key:"getElement",value:function(){return this.element}},{key:"getGroupElement",value:function(){return this.groupElement}},{key:"getField",value:function(){return this.field}},{key:"getFirstColumn",value:function(){if(!this.isGroup){return this}else{if(this.columns.length){return this.columns[0].getFirstColumn()}else{return!1}}}},{key:"getLastColumn",value:function(){if(!this.isGroup){return this}else{if(this.columns.length){return this.columns[this.columns.length-1].getLastColumn()}else{return!1}}}},{key:"getColumns",value:function(){return this.columns}},{key:"getCells",value:function(){return this.cells}},{key:"getTopColumn",value:function(){if(this.parent.isGroup){return this.parent.getTopColumn()}else{return this}}},{key:"getDefinition",value:function(e){var t=[];if(this.isGroup&&e){this.columns.forEach(function(e){t.push(e.getDefinition(!0))});this.definition.columns=t}return this.definition}},{key:"checkColumnVisibility",value:function(){var e=!1;this.columns.forEach(function(t){if(t.visible){e=!0}});if(e){this.show();this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)}else{this.hide()}}},{key:"show",value:function(e,t){if(!this.visible){this.visible=!0;this.element.style.display="";if(this.parent.isGroup){this.parent.checkColumnVisibility()}this.cells.forEach(function(e){e.show()});if(!this.isGroup&&null===this.width){this.reinitializeWidth()}this.table.columnManager.verticalAlignHeaders();this.dispatch("column-show",this,t);if(!e){this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0)}if(this.parent.isGroup){this.parent.matchChildWidths()}if(!this.silent){this.table.columnManager.renderer.rerenderColumns()}}}},{key:"hide",value:function(e){if(this.visible){this.visible=!1;this.element.style.display="none";this.table.columnManager.verticalAlignHeaders();if(this.parent.isGroup){this.parent.checkColumnVisibility()}this.cells.forEach(function(e){e.hide()});this.dispatch("column-hide",this);if(!e){this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)}if(this.parent.isGroup){this.parent.matchChildWidths()}if(!this.silent){this.table.columnManager.renderer.rerenderColumns()}}}},{key:"matchChildWidths",value:function(){var e=0;if(this.contentElement&&this.columns.length){this.columns.forEach(function(t){if(t.visible){e+=t.getWidth()}});this.contentElement.style.maxWidth=e-1+"px";if(this.parent.isGroup){this.parent.matchChildWidths()}}}},{key:"removeChild",value:function(e){var t=this.columns.indexOf(e);if(-1<t){this.columns.splice(t,1)}if(!this.columns.length){this["delete"]()}}},{key:"setWidth",value:function(e){this.widthFixed=!0;this.setWidthActual(e)}},{key:"setWidthActual",value:function(e){if(isNaN(e)){e=Math.floor(this.table.element.clientWidth/100*parseInt(e))}e=Math.max(this.minWidth,e);if(this.maxWidth){e=Math.min(this.maxWidth,e)}this.width=e;this.widthStyled=e?e+"px":"";this.element.style.width=this.widthStyled;if(!this.isGroup){this.cells.forEach(function(e){e.setWidth()})}if(this.parent.isGroup){this.parent.matchChildWidths()}this.dispatch("column-width",this)}},{key:"checkCellHeights",value:function(){var e=[];this.cells.forEach(function(t){if(t.row.heightInitialized){if(null!==t.row.getElement().offsetParent){e.push(t.row);t.row.clearCellHeight()}else{t.row.heightInitialized=!1}}});e.forEach(function(e){e.calcHeight()});e.forEach(function(e){e.setCellHeight()})}},{key:"getWidth",value:function(){var e=0;if(this.isGroup){this.columns.forEach(function(t){if(t.visible){e+=t.getWidth()}})}else{e=this.width}return e}},{key:"getHeight",value:function(){return this.element.offsetHeight}},{key:"setMinWidth",value:function(e){this.minWidth=e;this.minWidthStyled=e?e+"px":"";this.element.style.minWidth=this.minWidthStyled;this.cells.forEach(function(e){e.setMinWidth()})}},{key:"setMaxWidth",value:function(e){this.maxWidth=e;this.maxWidthStyled=e?e+"px":"";this.element.style.maxWidth=this.maxWidthStyled;this.cells.forEach(function(e){e.setMaxWidth()})}},{key:"delete",value:function(){var e=this;return new Promise(function(t){if(e.isGroup){e.columns.forEach(function(e){e["delete"]()})}e.dispatch("column-delete",e);for(var l=e.cells.length,o=0;o<l;o++){e.cells[0]["delete"]()}if(e.element.parentNode){e.element.parentNode.removeChild(e.element)}e.element=!1;e.contentElement=!1;e.titleElement=!1;e.groupElement=!1;if(e.parent.isGroup){e.parent.removeChild(e)}e.table.columnManager.deregisterColumn(e);e.table.columnManager.renderer.rerenderColumns(!0);t()})}},{key:"columnRendered",value:function(){if(this.titleFormatterRendered){this.titleFormatterRendered()}}},{key:"generateCell",value:function(e){var t=new W(this,e);this.cells.push(t);return t}},{key:"nextColumn",value:function(){var e=this.table.columnManager.findColumnIndex(this);return-1<e?this._nextVisibleColumn(e+1):!1}},{key:"_nextVisibleColumn",value:function(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._nextVisibleColumn(e+1)}},{key:"prevColumn",value:function(){var e=this.table.columnManager.findColumnIndex(this);return-1<e?this._prevVisibleColumn(e-1):!1}},{key:"_prevVisibleColumn",value:function(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._prevVisibleColumn(e-1)}},{key:"reinitializeWidth",value:function(e){this.widthFixed=!1;if("undefined"!=typeof this.definition.width&&!e){this.setWidth(this.definition.width)}this.dispatch("column-width-fit-before",this);this.fitToData();this.dispatch("column-width-fit-after",this)}},{key:"fitToData",value:function(){if(this.isGroup){return}if(!this.widthFixed){this.element.style.width="";this.cells.forEach(function(e){e.clearWidth()})}var e=this.element.offsetWidth;if(!this.width||!this.widthFixed){this.cells.forEach(function(t){var l=t.getWidth();if(l>e){e=l}});if(e){this.setWidthActual(e+1)}}}},{key:"updateDefinition",value:function(e){var t=this,l;if(!this.isGroup){if(!this.parent.isGroup){l=Object.assign({},this.getDefinition());l=Object.assign(l,e);return this.table.columnManager.addColumn(l,!1,this).then(function(e){if(l.field==t.field){t.field=!1}return t["delete"]().then(function(){return e.getComponent()})})}else{console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns");return Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")}}else{console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns");return Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")}}},{key:"deleteCell",value:function(e){var t=this.cells.indexOf(e);if(-1<t){this.cells.splice(t,1)}}},{key:"getComponent",value:function(){if(!this.component){this.component=new N(this)}return this.component}}]);return n}(V);G.defaultOptionList={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};var j=function(){function l(){t(this,l)}o(l,null,[{key:"elVisible",value:function(e){return!(0>=e.offsetWidth&&0>=e.offsetHeight)}},{key:"elOffset",value:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}},{key:"deepClone",value:function(t,l){var o=this,a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[],n={}.__proto__,r=[].__proto__;if(!l){l=Object.assign(Array.isArray(t)?[]:{},t)}var s=function(){var s=t[d],u,c;if(null!=s&&"object"===e(s)&&(s.__proto__===n||s.__proto__===r)){u=a.findIndex(function(e){return e.subject===s});if(-1<u){l[d]=a[u].copy}else{c=Object.assign(Array.isArray(s)?[]:{},s);a.unshift({subject:s,copy:c});l[d]=o.deepClone(s,c,a)}}};for(var d in t){s()}return l}}]);return l}(),U=function(){function l(e,o){t(this,l);this.table=e;this.msgType=o;this.registeredDefaults={}}o(l,[{key:"register",value:function(e,t){this.registeredDefaults[e]=t}},{key:"generate",value:function(t){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},o=Object.assign({},this.registeredDefaults);Object.assign(o,t);if(!1!==l.debugInvalidOptions||this.table.options.debugInvalidOptions){for(var a in l){if(!o.hasOwnProperty(a)){console.warn("Invalid "+this.msgType+" option:",a)}}}for(var a in o){if(a in l){o[a]=l[a]}else{if(Array.isArray(o[a])){o[a]=Object.assign([],o[a])}else if("object"===e(o[a])&&null!==o[a]){o[a]=Object.assign({},o[a])}else if("undefined"==typeof o[a]){delete o[a]}}}return o}}]);return l}(),K=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.elementVertical=e.rowManager.element;o.elementHorizontal=e.columnManager.element;o.tableElement=e.rowManager.tableElement;o.verticalFillMode="fit";return o}o(l,[{key:"initialize",value:function(){}},{key:"clearRows",value:function(){}},{key:"clearColumns",value:function(){}},{key:"reinitializeColumnWidths",value:function(){}},{key:"renderRows",value:function(){}},{key:"renderColumns",value:function(){}},{key:"rerenderRows",value:function(e){if(e){e()}}},{key:"rerenderColumns",value:function(){}},{key:"renderRowCells",value:function(){}},{key:"rerenderRowCells",value:function(){}},{key:"scrollColumns",value:function(){}},{key:"scrollRows",value:function(){}},{key:"resize",value:function(){}},{key:"scrollToRow",value:function(){}},{key:"scrollToRowNearestTop",value:function(){}},{key:"visibleRows",value:function(){return[]}},{key:"rows",value:function(){return this.table.rowManager.getDisplayRows()}},{key:"styleRow",value:function(e,t){var l=e.getElement();if(t%2){l.classList.add("tabulator-row-even");l.classList.remove("tabulator-row-odd")}else{l.classList.add("tabulator-row-odd");l.classList.remove("tabulator-row-even")}}},{key:"clear",value:function(){this.clearRows();this.clearColumns()}},{key:"render",value:function(){this.renderRows();this.renderColumns()}},{key:"rerender",value:function(){this.rerenderRows();this.rerenderColumns()}},{key:"scrollToRowPosition",value:function(e,t,l){var o=this,a=this.rows().indexOf(e),n=e.getElement(),r=0;return new Promise(function(s,d){if(-1<a){if("undefined"==typeof l){l=o.table.options.scrollToRowIfVisible}if(!l){if(j.elVisible(n)){r=j.elOffset(n).top-j.elOffset(o.elementVertical).top;if(0<r&&r<o.elementVertical.clientHeight-n.offsetHeight){return!1}}}if("undefined"==typeof t){t=o.table.options.scrollToRowPosition}if("nearest"===t){t=o.scrollToRowNearestTop(e)?"top":"bottom"}o.scrollToRow(e);switch(t){case"middle":case"center":if(o.elementVertical.scrollHeight-o.elementVertical.scrollTop==o.elementVertical.clientHeight){o.elementVertical.scrollTop=o.elementVertical.scrollTop+(n.offsetTop-o.elementVertical.scrollTop)-(o.elementVertical.scrollHeight-n.offsetTop)/2}else{o.elementVertical.scrollTop=o.elementVertical.scrollTop-o.elementVertical.clientHeight/2}break;case"bottom":if(o.elementVertical.scrollHeight-o.elementVertical.scrollTop==o.elementVertical.clientHeight){o.elementVertical.scrollTop=o.elementVertical.scrollTop-(o.elementVertical.scrollHeight-n.offsetTop)+n.offsetHeight}else{o.elementVertical.scrollTop=o.elementVertical.scrollTop-o.elementVertical.clientHeight+n.offsetHeight}break;}s()}else{console.warn("Scroll Error - Row not visible");d("Scroll Error - Row not visible")}})}}]);return l}(V),X=function(e){a(l,e);var n=c(l);function l(e){t(this,l);return n.call(this,e)}o(l,[{key:"renderRowCells",value:function(e){e.cells.forEach(function(t){e.element.appendChild(t.getElement());t.cellRendered()})}},{key:"reinitializeColumnWidths",value:function(e){e.forEach(function(e){e.reinitializeWidth()})}}]);return l}(K),q=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.leftCol=0;o.rightCol=0;o.scrollLeft=0;o.vDomScrollPosLeft=0;o.vDomScrollPosRight=0;o.vDomPadLeft=0;o.vDomPadRight=0;o.fitDataColAvg=0;o.window=200;o.initialized=!1;o.columns=[];return o}o(l,[{key:"initialize",value:function(){this.compatabilityCheck()}},{key:"compatabilityCheck",value:function(){var e=this.options("columns"),t=!1,l=!0;if("fitDataTable"==this.options("layout")){console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode");l=!1}if(this.options("responsiveLayout")){console.warn("Horizontal Vitrual DOM is not compatible with responsive columns");l=!1}if(this.options("rtl")){console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction");l=!1}if(e){t=e.find(function(e){return e.frozen});if(t){console.warn("Horizontal Vitrual DOM is not compatible with frozen columns");l=!1}}return l}},{key:"renderColumns",value:function(){this.dataChange()}},{key:"scrollColumns",value:function(e){if(this.scrollLeft!=e){this.scrollLeft=e;this.scroll(e-(this.vDomScrollPosLeft+this.window))}}},{key:"rerenderColumns",value:function(e,t){var l=this,o={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(e&&!this.initialized){return}this.clear();this.scrollLeft=this.elementVertical.scrollLeft;this.vDomScrollPosLeft=this.scrollLeft-this.window;this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var a=0;this.table.columnManager.columnsByIndex.forEach(function(e){var t={};if(e.visible){var o=e.getWidth();t.leftPos=a;t.rightPos=a+o;t.width=o;if("fitData"===l.options("layout")){t.fitDataCheck=!0}if(a+o>l.vDomScrollPosLeft&&a<l.vDomScrollPosRight){if(-1==l.leftCol){l.leftCol=l.columns.length;l.vDomPadLeft=a}l.rightCol=l.columns.length}else{if(-1!==l.leftCol){l.vDomPadRight+=o}}l.columns.push(e);e.modules.vdomHoz=t;a+=o}});this.tableElement.style.paddingLeft=this.vDomPadLeft+"px";this.tableElement.style.paddingRight=this.vDomPadRight+"px";this.initialized=!0;if(!t){if(!e||this.reinitChanged(o)){this.renitializeRows()}}this.elementVertical.scrollLeft=this.scrollLeft}},{key:"renderRowCells",value:function(e){if(this.initialized){this.initializeRow(e)}else{e.cells.forEach(function(t){e.element.appendChild(t.getElement());t.cellRendered()})}}},{key:"rerenderRowCells",value:function(e,t){this.reinitializeRow(e,t)}},{key:"reinitializeColumnWidths",value:function(){for(var e=this.leftCol;e<=this.rightCol;e++){this.columns[e].reinitializeWidth()}}},{key:"deinitialize",value:function(){this.initialized=!1}},{key:"clear",value:function(){this.columns=[];this.leftCol=-1;this.rightCol=0;this.vDomScrollPosLeft=0;this.vDomScrollPosRight=0;this.vDomPadLeft=0;this.vDomPadRight=0}},{key:"dataChange",value:function(){var e=this,t=!1,l=0,o=0,a,n;if("fitData"===this.options("layout")){this.table.columnManager.columnsByIndex.forEach(function(e){if(!e.definition.width&&e.visible){t=!0}});if(t){if(t&&this.table.rowManager.getDisplayRows().length){this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var a=this.chain("rows-sample",[1],[],function(){return e.table.rowManager.getDisplayRows()[0]})[0];if(a){n=a.getElement();a.generateCells();this.tableElement.appendChild(n);for(var o=0,r;o<a.cells.length;o++){r=a.cells[o];n.appendChild(r.getElement());r.column.reinitializeWidth();l+=r.column.getWidth();if(l>this.vDomScrollPosRight){break}}n.parentNode.removeChild(n);this.fitDataColAvg=Math.floor(l/(o+1));for(o;o<this.table.columnManager.columnsByIndex.length;o++){this.table.columnManager.columnsByIndex[o].setWidth(this.fitDataColAvg)}this.rerenderColumns(!1,!0)}}}}else{if("fitColumns"===this.options("layout")){this.layoutRefresh();this.rerenderColumns(!1,!0)}}}},{key:"reinitChanged",value:function(e){var t=this,l=!0;if(e.cols.length!==this.columns.length||e.leftCol!==this.leftCol||e.rightCol!==this.rightCol){return!0}e.cols.forEach(function(e,o){if(e!==t.columns[o]){l=!1}});return!l}},{key:"renitializeRows",value:function(){var e=this,t=this.table.rowManager.getVisibleRows();t.forEach(function(t){e.reinitializeRow(t,!0)})}},{key:"scroll",value:function(e){this.vDomScrollPosLeft+=e;this.vDomScrollPosRight+=e;if(e>.8*this.elementVertical.clientWidth){this.rerenderColumns()}else{if(0<e){this.addColRight();this.removeColLeft()}else{this.addColLeft();this.removeColRight()}}}},{key:"colPositionAdjust",value:function(e,t,l){for(var o=e,a;o<t;o++){a=this.columns[o];a.modules.vdomHoz.leftPos+=l;a.modules.vdomHoz.rightPos+=l}}},{key:"addColRight",value:function(){var e=this.columns[this.rightCol+1],t;if(e&&e.modules.vdomHoz.leftPos<=this.vDomScrollPosRight){t=this.table.rowManager.getVisibleRows();t.forEach(function(t){if("group"!==t.type){var l=t.getCell(e);t.getElement().appendChild(l.getElement());l.cellRendered()}});this.fitDataColActualWidthCheck(e);this.rightCol++;if(this.rightCol>=this.columns.length-1){this.vDomPadRight=0}else{this.vDomPadRight-=e.getWidth()}this.tableElement.style.paddingRight=this.vDomPadRight+"px";this.addColRight()}}},{key:"addColLeft",value:function(){var e=this.columns[this.leftCol-1],t;if(e&&e.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){var t=this.table.rowManager.getVisibleRows();t.forEach(function(t){if("group"!==t.type){var l=t.getCell(e);t.getElement().prepend(l.getElement());l.cellRendered()}});this.fitDataColActualWidthCheck(e);if(!this.leftCol){this.vDomPadLeft=0}else{this.vDomPadLeft-=e.getWidth()}this.tableElement.style.paddingLeft=this.vDomPadLeft+"px";this.leftCol--;this.addColLeft()}}},{key:"removeColRight",value:function(e){var e=this.columns[this.rightCol],t;if(e&&e.modules.vdomHoz.leftPos>this.vDomScrollPosRight){t=this.table.rowManager.getVisibleRows();e.modules.vdomHoz.visible=!1;t.forEach(function(t){if("group"!==t.type){var l=t.getCell(e);t.getElement().removeChild(l.getElement())}});this.vDomPadRight+=e.getWidth();this.tableElement.style.paddingRight=this.vDomPadRight+"px";this.rightCol--;this.removeColRight()}}},{key:"removeColLeft",value:function(){var e=this.columns[this.leftCol],t;if(e&&e.modules.vdomHoz.rightPos<this.vDomScrollPosLeft){t=this.table.rowManager.getVisibleRows();t.forEach(function(t){if("group"!==t.type){var l=t.getCell(e);if(l.parentNode){t.getElement().removeChild(l.getElement())}}});this.vDomPadLeft+=e.getWidth();this.tableElement.style.paddingLeft=this.vDomPadLeft+"px";this.leftCol++;this.removeColLeft()}}},{key:"fitDataColActualWidthCheck",value:function(e){var t,l;if(e.modules.vdomHoz.fitDataCheck){e.reinitializeWidth();t=e.getWidth();l=t-e.modules.vdomHoz.width;if(l){e.modules.vdomHoz.rightPos+=l;e.modules.vdomHoz.width=t;this.colPositionAdjust(this.rightCol+2,this.columns.length,l)}e.modules.vdomHoz.fitDataCheck=!1}}},{key:"initializeRow",value:function(e){if("group"!==e.type){e.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(var t=this.leftCol,l;t<=this.rightCol;t++){l=this.columns[t];if(l&&l.visible){var o=e.getCell(l);e.getElement().appendChild(o.getElement());o.cellRendered()}}}}},{key:"reinitializeRow",value:function(e,t){if("group"!==e.type){if(t||!e.modules.vdomHoz||e.modules.vdomHoz.leftCol!==this.leftCol||e.modules.vdomHoz.rightCol!==this.rightCol){var l=e.getElement();while(l.firstChild){l.removeChild(l.firstChild)}this.initializeRow(e)}}}}]);return l}(K),Y=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.blockHozScrollEvent=!1;l.headersElement=null;l.element=null;l.columns=[];l.columnsByIndex=[];l.columnsByField={};l.scrollLeft=0;l.optionsList=new U(l.table,"column definition");l.renderer=null;return l}o(n,[{key:"initialize",value:function(){this.initializeRenderer();this.headersElement=this.createHeadersElement();this.element=this.createHeaderElement();this.element.insertBefore(this.headersElement,this.element.firstChild);this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}},{key:"initializeRenderer",value:function(){var e;if("string"==typeof this.table.options.renderHorizontal){e={virtual:q,basic:X}[this.table.options.renderHorizontal]}else{e=this.table.options.renderHorizontal}if(e){this.renderer=new e(this.table,this.element,this.tableElement);this.renderer.initialize()}else{console.error("Unable to find matching renderer:",table.options.renderHorizontal)}}},{key:"createHeadersElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-headers");e.setAttribute("role","row");return e}},{key:"createHeaderElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-header");e.setAttribute("role","rowgroup");if(!this.table.options.headerVisible){e.classList.add("tabulator-header-hidden")}return e}},{key:"getElement",value:function(){return this.element}},{key:"getHeadersElement",value:function(){return this.headersElement}},{key:"scrollHorizontal",value:function(e){var t=0,l=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=e;if(e>l){t=e-l;this.element.style.marginLeft=-t+"px"}else{this.element.style.marginLeft=0}this.scrollLeft=e;this.renderer.scrollColumns(e)}},{key:"generateColumnsFromRowData",value:function(t){var l=[],o=this.table.options.autoColumnsDefinitions,a,n;if(t&&t.length){a=t[0];for(var r in a){var s={field:r,title:r},d=a[r];switch(e(d)){case"undefined":n="string";break;case"boolean":n="boolean";break;case"object":if(Array.isArray(d)){n="array"}else{n="string"}break;default:if(!isNaN(d)&&""!==d){n="number"}else{if(d.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){n="alphanum"}else{n="string"}}break;}s.sorter=n;l.push(s)}if(o){switch(e(o)){case"function":this.table.options.columns=o.call(this.table,l);break;case"object":if(Array.isArray(o)){l.forEach(function(e){var t=o.find(function(t){return t.field===e.field});if(t){Object.assign(e,t)}})}else{l.forEach(function(e){if(o[e.field]){Object.assign(e,o[e.field])}})}this.table.options.columns=l;break;}}else{this.table.options.columns=l}this.setColumns(this.table.options.columns)}}},{key:"setColumns",value:function(e){var t=this;while(this.headersElement.firstChild){this.headersElement.removeChild(this.headersElement.firstChild)}this.columns=[];this.columnsByIndex=[];this.columnsByField={};this.dispatch("columns-loading");e.forEach(function(e){t._addColumn(e)});this._reIndexColumns();this.dispatch("columns-loaded");this.renderer.rerenderColumns(!1,!0);this.redraw(!0)}},{key:"_addColumn",value:function(e,t,l){var o=new G(e,this),a=o.getElement(),n=l?this.findColumnIndex(l):l;if(l&&-1<n){var r=l.getTopColumn(),s=this.columns.indexOf(r),d=r.getElement();if(t){this.columns.splice(s,0,o);d.parentNode.insertBefore(a,d)}else{this.columns.splice(s+1,0,o);d.parentNode.insertBefore(a,d.nextSibling)}}else{if(t){this.columns.unshift(o);this.headersElement.insertBefore(o.getElement(),this.headersElement.firstChild)}else{this.columns.push(o);this.headersElement.appendChild(o.getElement())}}o.columnRendered();return o}},{key:"registerColumnField",value:function(e){if(e.definition.field){this.columnsByField[e.definition.field]=e}}},{key:"registerColumnPosition",value:function(e){this.columnsByIndex.push(e)}},{key:"_reIndexColumns",value:function(){this.columnsByIndex=[];this.columns.forEach(function(e){e.reRegisterPosition()})}},{key:"verticalAlignHeaders",value:function(){var e=this,t=0;this.columns.forEach(function(e){var l;e.clearVerticalAlign();l=e.getHeight();if(l>t){t=l}});this.columns.forEach(function(l){l.verticalAlign(e.table.options.columnHeaderVertAlign,t)});this.table.rowManager.adjustTableSize()}},{key:"findColumn",value:function(t){if("object"==e(t)){if(t instanceof G){return t}else if(t instanceof N){return t._getSelf()||!1}else if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement){var l=this.columns.find(function(e){return e.element===t});return l||!1}}else{return this.columnsByField[t]||!1}return!1}},{key:"getColumnByField",value:function(e){return this.columnsByField[e]}},{key:"getColumnsByFieldRoot",value:function(e){var t=this,l=[];Object.keys(this.columnsByField).forEach(function(o){var a=o.split(".")[0];if(a===e){l.push(t.columnsByField[o])}});return l}},{key:"getColumnByIndex",value:function(e){return this.columnsByIndex[e]}},{key:"getFirstVisibileColumn",value:function(e){var e=this.columnsByIndex.findIndex(function(e){return e.visible});return-1<e?this.columnsByIndex[e]:!1}},{key:"getColumns",value:function(){return this.columns}},{key:"findColumnIndex",value:function(e){return this.columnsByIndex.findIndex(function(t){return e===t})}},{key:"getRealColumns",value:function(){return this.columnsByIndex}},{key:"traverse",value:function(e){this.columnsByIndex.forEach(function(t,l){e(t,l)})}},{key:"getDefinitions",value:function(e){var t=[];this.columnsByIndex.forEach(function(l){if(!e||e&&l.visible){t.push(l.getDefinition())}});return t}},{key:"getDefinitionTree",value:function(){var e=[];this.columns.forEach(function(t){e.push(t.getDefinition(!0))});return e}},{key:"getComponents",value:function(e){var t=[],l=e?this.columns:this.columnsByIndex;l.forEach(function(e){t.push(e.getComponent())});return t}},{key:"getWidth",value:function(){var e=0;this.columnsByIndex.forEach(function(t){if(t.visible){e+=t.getWidth()}});return e}},{key:"moveColumn",value:function(e,t,l){this.moveColumnActual(e,t,l);t.element.parentNode.insertBefore(e.element,t.element);if(l){t.element.parentNode.insertBefore(t.element,e.element)}this.verticalAlignHeaders();this.table.rowManager.reinitialize()}},{key:"moveColumnActual",value:function(e,t,l){if(e.parent.isGroup){this._moveColumnInArray(e.parent.columns,e,t,l)}else{this._moveColumnInArray(this.columns,e,t,l)}this._moveColumnInArray(this.columnsByIndex,e,t,l,!0);this.renderer.rerenderColumns(!0);this.dispatch("column-moved",e,t,l);if(this.subscribedExternal("columnMoved")){this.dispatchExternal("columnMoved",e.getComponent(),this.table.columnManager.getComponents())}}},{key:"_moveColumnInArray",value:function(e,t,l,o,a){var n=e.indexOf(t),r,s=[];if(-1<n){e.splice(n,1);r=e.indexOf(l);if(-1<r){if(o){r=r+1}}else{r=n}e.splice(r,0,t);if(a){s=this.chain("column-moving-rows",[t,l,o],null,[])||[];s=s.concat(this.table.rowManager.rows);s.forEach(function(e){if(e.cells.length){var t=e.cells.splice(n,1)[0];e.cells.splice(r,0,t)}})}}}},{key:"scrollToColumn",value:function(e,t,l){var o=this,a=0,n=0,r=0,s=e.getElement();return new Promise(function(d,u){if("undefined"==typeof t){t=o.table.options.scrollToColumnPosition}if("undefined"==typeof l){l=o.table.options.scrollToColumnIfVisible}if(e.visible){switch(t){case"middle":case"center":r=-o.element.clientWidth/2;break;case"right":r=s.clientWidth-o.headersElement.clientWidth;break;}if(!l){n=s.offsetLeft;if(0<n&&n+s.offsetWidth<o.element.clientWidth){return!1}}a=s.offsetLeft+r;a=Math.max(Math.min(a,o.table.rowManager.element.scrollWidth-o.table.rowManager.element.clientWidth),0);o.table.rowManager.scrollHorizontal(a);o.scrollHorizontal(a);d()}else{console.warn("Scroll Error - Column not visible");u("Scroll Error - Column not visible")}})}},{key:"generateCells",value:function(e){var t=[];this.columnsByIndex.forEach(function(l){t.push(l.generateCell(e))});return t}},{key:"getFlexBaseWidth",value:function(){var e=this.table.element.clientWidth,t=0;if(this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight){e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth}this.columnsByIndex.forEach(function(l){var o,a,n;if(l.visible){o=l.definition.width||0;a=parseInt(l.minWidth);if("string"==typeof o){if(-1<o.indexOf("%")){n=e/100*parseInt(o)}else{n=parseInt(o)}}else{n=o}t+=n>a?n:a}});return t}},{key:"addColumn",value:function(e,t,l){var o=this;return new Promise(function(a){var n=o._addColumn(e,t,l);o._reIndexColumns();o.dispatch("column-add",e,t,l);if("fitColumns"!=o.layoutMode()){n.reinitializeWidth()}o.redraw(!0);o.table.rowManager.reinitialize();o.renderer.rerenderColumns();a(n)})}},{key:"deregisterColumn",value:function(e){var t=e.getField(),l;if(t){delete this.columnsByField[t]}l=this.columnsByIndex.indexOf(e);if(-1<l){this.columnsByIndex.splice(l,1)}l=this.columns.indexOf(e);if(-1<l){this.columns.splice(l,1)}this.verticalAlignHeaders();this.redraw()}},{key:"redraw",value:function(e){if(j.elVisible(this.element)){this.verticalAlignHeaders()}if(e){this.table.rowManager.resetScroll();this.table.rowManager.reinitialize()}if(!this.confirm("table-redrawing",e)){this.layoutRefresh()}this.dispatch("table-redraw",e);this.table.footerManager.redraw()}}]);return n}(V),J=function(){function e(l){t(this,e);this._row=l;return new Proxy(this,{get:function(e,t){if("undefined"!=typeof e[t]){return e[t]}else{return e._row.table.componentFunctionBinder.handle("row",e._row,t)}}})}o(e,[{key:"getData",value:function(e){return this._row.getData(e)}},{key:"getElement",value:function(){return this._row.getElement()}},{key:"getCells",value:function(){var e=[];this._row.getCells().forEach(function(t){e.push(t.getComponent())});return e}},{key:"getCell",value:function(e){var t=this._row.getCell(e);return t?t.getComponent():!1}},{key:"getIndex",value:function(){return this._row.getData("data")[this._row.table.options.index]}},{key:"getPosition",value:function(e){return this._row.table.rowManager.getRowPosition(this._row,e)}},{key:"delete",value:function(){return this._row["delete"]()}},{key:"scrollTo",value:function(){return this._row.table.rowManager.scrollToRow(this._row)}},{key:"move",value:function(e,t){this._row.moveToRow(e,t)}},{key:"update",value:function(e){return this._row.updateData(e)}},{key:"normalizeHeight",value:function(){this._row.normalizeHeight(!0)}},{key:"_getSelf",value:function(){return this._row}},{key:"reformat",value:function(){return this._row.reinitialize()}},{key:"getTable",value:function(){return this._row.table}},{key:"getNextRow",value:function(){var e=this._row.nextRow();return e?e.getComponent():e}},{key:"getPrevRow",value:function(){var e=this._row.prevRow();return e?e.getComponent():e}}]);return e}(),$=function(e){a(l,e);var n=c(l);function l(e,o){var a,r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"row";t(this,l);a=n.call(this,o.table);a.parent=o;a.data={};a.type=r;a.element=!1;a.modules={};a.cells=[];a.height=0;a.heightStyled="";a.manualHeight=!1;a.outerHeight=0;a.initialized=!1;a.heightInitialized=!1;a.component=null;a.created=!1;a.setData(e);return a}o(l,[{key:"create",value:function(){if(!this.created){this.created=!0;this.generateElement()}}},{key:"createElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-row");e.setAttribute("role","row");this.element=e}},{key:"getElement",value:function(){this.create();return this.element}},{key:"detachElement",value:function(){if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}}},{key:"generateElement",value:function(){this.createElement();this.dispatch("row-init",this)}},{key:"generateCells",value:function(){this.cells=this.table.columnManager.generateCells(this)}},{key:"initialize",value:function(e){this.create();if(!this.initialized||e){this.deleteCells();while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.dispatch("row-layout-before",this);this.generateCells();this.table.columnManager.renderer.renderRowCells(this);if(e){this.normalizeHeight()}this.dispatch("row-layout",this);if(this.table.options.rowFormatter){this.table.options.rowFormatter(this.getComponent())}this.initialized=!0;this.dispatch("row-layout-after",this)}else{this.table.columnManager.renderer.rerenderRowCells(this)}}},{key:"reinitializeHeight",value:function(){this.heightInitialized=!1;if(this.element&&null!==this.element.offsetParent){this.normalizeHeight(!0)}}},{key:"deinitializeHeight",value:function(){this.heightInitialized=!1}},{key:"reinitialize",value:function(){this.initialized=!1;this.heightInitialized=!1;if(!this.manualHeight){this.height=0;this.heightStyled=""}if(this.element&&null!==this.element.offsetParent){this.initialize(!0)}this.dispatch("row-relayout",this)}},{key:"calcHeight",value:function(e){var t=0,l=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(e){var l=e.getHeight();if(l>t){t=l}});if(e){this.height=Math.max(t,l)}else{this.height=this.manualHeight?this.height:Math.max(t,l)}this.heightStyled=this.height?this.height+"px":"";this.outerHeight=this.element.offsetHeight}},{key:"setCellHeight",value:function(){this.cells.forEach(function(e){e.setHeight()});this.heightInitialized=!0}},{key:"clearCellHeight",value:function(){this.cells.forEach(function(e){e.clearHeight()})}},{key:"normalizeHeight",value:function(e){if(e){this.clearCellHeight()}this.calcHeight(e);this.setCellHeight()}},{key:"setHeight",value:function(e,t){if(this.height!=e||t){this.manualHeight=!0;this.height=e;this.heightStyled=e?e+"px":"";this.setCellHeight();this.outerHeight=this.element.offsetHeight}}},{key:"getHeight",value:function(){return this.outerHeight}},{key:"getWidth",value:function(){return this.element.offsetWidth}},{key:"deleteCell",value:function(e){var t=this.cells.indexOf(e);if(-1<t){this.cells.splice(t,1)}}},{key:"setData",value:function(e){this.data=this.chain("row-data-init-before",[this,e],void 0,e);this.dispatch("row-data-init-after",this)}},{key:"updateData",value:function(e){var t=this,l=this.element&&j.elVisible(this.element),o={},a;return new Promise(function(n){if("string"==typeof e){e=JSON.parse(e)}t.dispatch("row-data-save-before",t);if(t.subscribed("row-data-changing")){o=Object.assign(o,t.data);o=Object.assign(o,e)}a=t.chain("row-data-changing",[t,o,e],null,e);for(var r in a){t.data[r]=a[r]}t.dispatch("row-data-save-after",t);for(var r in e){var s=t.table.columnManager.getColumnsByFieldRoot(r);s.forEach(function(e){var o=t.getCell(e.getField());if(o){var n=e.getFieldValue(a);if(o.getValue()!=n){o.setValueProcessData(n);if(l){o.cellRendered()}}}})}if(l){t.normalizeHeight(!0);if(t.table.options.rowFormatter){t.table.options.rowFormatter(t.getComponent())}}else{t.initialized=!1;t.height=0;t.heightStyled=""}t.dispatch("row-data-changed",t,l,e);t.dispatchExternal("rowUpdated",t.getComponent());if(t.subscribedExternal("dataChanged")){t.dispatchExternal("dataChanged",t.table.rowManager.getData())}n()})}},{key:"getData",value:function(e){if(e){return this.chain("row-data-retrieve",[this,e],null,this.data)}return this.data}},{key:"getCell",value:function(e){var t=!1;e=this.table.columnManager.findColumn(e);if(!this.initialized){this.generateCells()}t=this.cells.find(function(t){return t.column===e});return t}},{key:"getCellIndex",value:function(e){return this.cells.findIndex(function(t){return t===e})}},{key:"findCell",value:function(e){return this.cells.find(function(t){return t.element===e})}},{key:"getCells",value:function(){if(!this.initialized){this.generateCells()}return this.cells}},{key:"nextRow",value:function(){var e=this.table.rowManager.nextDisplayRow(this,!0);return e||!1}},{key:"prevRow",value:function(){var e=this.table.rowManager.prevDisplayRow(this,!0);return e||!1}},{key:"moveToRow",value:function(e,t){var l=this.table.rowManager.findRow(e);if(l){this.table.rowManager.moveRowActual(this,l,!t);this.table.rowManager.refreshActiveData("display",!1,!0)}else{console.warn("Move Error - No matching row found:",e)}}},{key:"delete",value:function(){this.dispatch("row-delete",this);this.deleteActual();return Promise.resolve()}},{key:"deleteActual",value:function(e){this.table.rowManager.getRowIndex(this);this.detatchModules();this.table.rowManager.deleteRow(this,e);this.deleteCells();this.initialized=!1;this.heightInitialized=!1;this.element=!1;this.dispatch("row-deleted",this)}},{key:"detatchModules",value:function(){this.dispatch("row-deleting",this)}},{key:"deleteCells",value:function(){for(var e=this.cells.length,t=0;t<e;t++){this.cells[0]["delete"]()}}},{key:"wipe",value:function(){this.detatchModules();this.deleteCells();if(this.element){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}if(this.element.parentNode){this.element.parentNode.removeChild(this.element)}}this.element=!1;this.modules={}}},{key:"getGroup",value:function(){return this.modules.group||!1}},{key:"getComponent",value:function(){if(!this.component){this.component=new J(this)}return this.component}}]);return l}(V),Q=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.verticalFillMode="fill";o.scrollTop=0;o.scrollLeft=0;o.scrollTop=0;o.scrollLeft=0;return o}o(l,[{key:"clearRows",value:function(){var e=this.tableElement;while(e.firstChild){e.removeChild(e.firstChild)}e.scrollTop=0;e.scrollLeft=0;e.style.minWidth="";e.style.minHeight="";e.style.display="";e.style.visibility=""}},{key:"renderRows",value:function(){var e=this,t=this.tableElement,l=!0;this.rows().forEach(function(o,a){e.styleRow(o,a);t.appendChild(o.getElement());o.initialize(!0);if("group"!==o.type){l=!1}});if(l){t.style.minWidth=this.table.columnManager.getWidth()+"px"}else{t.style.minWidth=""}}},{key:"rerenderRows",value:function(e){this.render();if(e){e()}}},{key:"scrollToRowNearestTop",value:function(e){var t=j.elOffset(e.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-t)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-t))}},{key:"scrollToRow",value:function(e){var t=e.getElement();this.elementVertical.scrollTop=j.elOffset(t).top-j.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}},{key:"visibleRows",value:function(){return this.rows()}}]);return l}(K),Z=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.verticalFillMode="fill";o.scrollTop=0;o.scrollLeft=0;o.vDomRowHeight=20;o.vDomTop=0;o.vDomBottom=0;o.vDomScrollPosTop=0;o.vDomScrollPosBottom=0;o.vDomTopPad=0;o.vDomBottomPad=0;o.vDomMaxRenderChain=90;o.vDomWindowBuffer=0;o.vDomWindowMinTotalRows=20;o.vDomWindowMinMarginRows=5;o.vDomTopNewRows=[];o.vDomBottomNewRows=[];return o}o(l,[{key:"clearRows",value:function(){var e=this.tableElement;while(e.firstChild){e.removeChild(e.firstChild)}e.style.paddingTop="";e.style.paddingBottom="";e.style.minWidth="";e.style.minHeight="";e.style.display="";e.style.visibility="";this.elementVertical.scrollTop=0;this.elementVertical.scrollLeft=0;this.scrollTop=0;this.scrollLeft=0;this.vDomTop=0;this.vDomBottom=0;this.vDomTopPad=0;this.vDomBottomPad=0;this.vDomScrollPosTop=0;this.vDomScrollPosBottom=0}},{key:"renderRows",value:function(){this._virtualRenderFill()}},{key:"rerenderRows",value:function(e){for(var t=this.elementVertical.scrollTop,l=!1,o=!1,a=this.table.rowManager.scrollLeft,n=this.rows(),r=this.vDomTop;r<=this.vDomBottom;r++){if(n[r]){var s=t-n[r].getElement().offsetTop;if(!1===o||Math.abs(s)<o){o=s;l=r}else{break}}}n.forEach(function(e){e.deinitializeHeight()});if(e){e()}this._virtualRenderFill(!1===l?this.rows.length-1:l,!0,o||0);this.scrollColumns(a)}},{key:"scrollColumns",value:function(e){this.table.rowManager.scrollHorizontal(e)}},{key:"scrollRows",value:function(e,t){var l=e-this.vDomScrollPosTop,o=e-this.vDomScrollPosBottom,a=2*this.vDomWindowBuffer,n=this.rows();this.scrollTop=e;if(-l>a||o>a){var r=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*n.length));this.scrollColumns(r)}else{if(t){if(0>l){this._addTopRow(n,-l)}if(0>o){if(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer){this._removeBottomRow(n,-o)}else{this.vDomScrollPosBottom=this.scrollTop}}}else{if(0<=o){this._addBottomRow(n,o)}if(0<=l){if(this.scrollTop>this.vDomWindowBuffer){this._removeTopRow(n,l)}else{this.vDomScrollPosTop=this.scrollTop}}}}}},{key:"resize",value:function(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}},{key:"scrollToRowNearestTop",value:function(e){var t=this.rows().indexOf(e);return!(Math.abs(this.vDomTop-t)>Math.abs(this.vDomBottom-t))}},{key:"scrollToRow",value:function(e){var t=this.rows().indexOf(e);if(-1<t){this._virtualRenderFill(t,!0)}}},{key:"visibleRows",value:function(e){var t=this.elementVertical.scrollTop,l=this.elementVertical.clientHeight+t,o=!1,a=0,n=0,r=this.rows();if(e){a=this.vDomTop;n=this.vDomBottom}else{for(var s=this.vDomTop;s<=this.vDomBottom;s++){if(r[s]){if(!o){if(0<=t-r[s].getElement().offsetTop){a=s}else{o=!0;if(0<=l-r[s].getElement().offsetTop){n=s}else{break}}}else{if(0<=l-r[s].getElement().offsetTop){n=s}else{break}}}}}return r.slice(a,n+1)}},{key:"_virtualRenderFill",value:function(e,t,l){var o=this.tableElement,a=this.elementVertical,n=0,r=0,s=0,d=0,u=0,c=this.rows(),m=c.length,p=this.elementVertical.clientHeight;e=e||0;l=l||0;if(!e){this.clear()}else{while(o.firstChild){o.removeChild(o.firstChild)}s=(m-e+1)*this.vDomRowHeight;if(s<p){e-=Math.ceil((p-s)/this.vDomRowHeight);if(0>e){e=0}}n=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),e);e-=n}if(m&&j.elVisible(this.elementVertical)){this.vDomTop=e;this.vDomBottom=e-1;while((r<=p+this.vDomWindowBuffer||u<this.vDomWindowMinTotalRows)&&this.vDomBottom<m-1){var g=this.vDomBottom+1,b=c[g],h=0;this.styleRow(b,g);o.appendChild(b.getElement());b.initialize();if(!b.heightInitialized){b.normalizeHeight(!0)}h=b.getHeight();if(u<n){d+=h}else{r+=h}if(h>this.vDomWindowBuffer){this.vDomWindowBuffer=2*h}this.vDomBottom++;u++}if(!e){this.vDomTopPad=0;this.vDomRowHeight=Math.floor((r+d)/u);this.vDomBottomPad=this.vDomRowHeight*(m-this.vDomBottom-1);this.vDomScrollHeight=d+r+this.vDomBottomPad-p}else{this.vDomTopPad=!t?this.scrollTop-d:this.vDomRowHeight*this.vDomTop+l;this.vDomBottomPad=this.vDomBottom==m-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-r-d,0)}o.style.paddingTop=this.vDomTopPad+"px";o.style.paddingBottom=this.vDomBottomPad+"px";if(t){this.scrollTop=this.vDomTopPad+d+l-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-p:0)}this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-p);if(this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&t){this.scrollTop+=this.elementVertical.offsetHeight-p}this.vDomScrollPosTop=this.scrollTop;this.vDomScrollPosBottom=this.scrollTop;a.scrollTop=this.scrollTop;this.dispatch("render-virtual-fill")}}},{key:"_addTopRow",value:function(e,t){var l=this.tableElement,o=[],a=0,n=this.vDomTop-1,r=0;while(!0){if(this.vDomTop){var s=e[n],d=void 0,u=void 0;if(s&&r<this.vDomMaxRenderChain){d=s.getHeight()||this.vDomRowHeight;u=s.initialized;if(t>=d){this.styleRow(s,n);l.insertBefore(s.getElement(),l.firstChild);if(!s.initialized||!s.heightInitialized){o.push(s)}s.initialize();if(!u){d=s.getElement().offsetHeight;if(d>this.vDomWindowBuffer){this.vDomWindowBuffer=2*d}}t-=d;a+=d;this.vDomTop--;n--;r++}else{break}}else{break}}else{break}}for(var c=0,m=o,p;c<m.length;c++){p=m[c];p.clearCellHeight()}this._quickNormalizeRowHeight(o);if(a){this.vDomTopPad-=a;if(0>this.vDomTopPad){this.vDomTopPad=n*this.vDomRowHeight}if(1>n){this.vDomTopPad=0}l.style.paddingTop=this.vDomTopPad+"px";this.vDomScrollPosTop-=a}}},{key:"_removeTopRow",value:function(e,t){var l=[],o=0,a=0;while(!0){var n=e[this.vDomTop],r=void 0;if(n&&a<this.vDomMaxRenderChain){r=n.getHeight()||this.vDomRowHeight;if(t>=r){this.vDomTop++;t-=r;o+=r;l.push(n);a++}else{break}}else{break}}for(var s=0,d=l;s<d.length;s++){var u=d[s],c=u.getElement();if(c.parentNode){c.parentNode.removeChild(c)}}if(o){this.vDomTopPad+=o;this.tableElement.style.paddingTop=this.vDomTopPad+"px";this.vDomScrollPosTop+=this.vDomTop?o:o+this.vDomWindowBuffer}}},{key:"_addBottomRow",value:function(e,t){var l=this.tableElement,o=[],a=0,n=this.vDomBottom+1,r=0;while(!0){var s=e[n],d=void 0,u=void 0;if(s&&r<this.vDomMaxRenderChain){d=s.getHeight()||this.vDomRowHeight;u=s.initialized;if(t>=d){this.styleRow(s,n);l.appendChild(s.getElement());if(!s.initialized||!s.heightInitialized){o.push(s)}s.initialize();if(!u){d=s.getElement().offsetHeight;if(d>this.vDomWindowBuffer){this.vDomWindowBuffer=2*d}}t-=d;a+=d;this.vDomBottom++;n++;r++}else{break}}else{break}}for(var c=0,m=o,p;c<m.length;c++){p=m[c];p.clearCellHeight()}this._quickNormalizeRowHeight(o);if(a){this.vDomBottomPad-=a;if(0>this.vDomBottomPad||n==e.length-1){this.vDomBottomPad=0}l.style.paddingBottom=this.vDomBottomPad+"px";this.vDomScrollPosBottom+=a}}},{key:"_removeBottomRow",value:function(e,t){var l=[],o=0,a=0;while(!0){var n=e[this.vDomBottom],r=void 0;if(n&&a<this.vDomMaxRenderChain){r=n.getHeight()||this.vDomRowHeight;if(t>=r){this.vDomBottom--;t-=r;o+=r;l.push(n);a++}else{break}}else{break}}for(var s=0,d=l;s<d.length;s++){var u=d[s],c=u.getElement();if(c.parentNode){c.parentNode.removeChild(c)}}if(o){this.vDomBottomPad+=o;if(0>this.vDomBottomPad){this.vDomBottomPad=0}this.tableElement.style.paddingBottom=this.vDomBottomPad+"px";this.vDomScrollPosBottom-=o}}},{key:"_quickNormalizeRowHeight",value:function(e){var t=f(e),l;try{for(t.s();!(l=t.n()).done;){var o=l.value;o.calcHeight()}}catch(e){t.e(e)}finally{t.f()}var a=f(e),n;try{for(a.s();!(n=a.n()).done;){var r=n.value;r.setCellHeight()}}catch(e){a.e(e)}finally{a.f()}}}]);return l}(K),ee=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.element=l.createHolderElement();l.tableElement=l.createTableElement();l.heightFixer=l.createTableElement();l.firstRender=!1;l.renderMode="virtual";l.fixedHeight=!1;l.rows=[];l.activeRowsPipeline=[];l.activeRows=[];l.activeRowsCount=0;l.displayRows=[];l.displayRowsCount=0;l.scrollTop=0;l.scrollLeft=0;l.rowNumColumn=!1;l.redrawBlock=!1;l.redrawBlockRestoreConfig=!1;l.redrawBlockRederInPosition=!1;l.dataPipeline=[];l.displayPipeline=[];l.renderer=null;return l}o(n,[{key:"createHolderElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-tableholder");e.setAttribute("tabindex",0);e.setAttribute("role","rowgroup");return e}},{key:"createTableElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-table");e.setAttribute("role","rowgroup");return e}},{key:"getElement",value:function(){return this.element}},{key:"getTableElement",value:function(){return this.tableElement}},{key:"getRowPosition",value:function(e,t){if(t){return this.activeRows.indexOf(e)}else{return this.rows.indexOf(e)}}},{key:"initialize",value:function(){var e=this;this.initializeRenderer();this.element.appendChild(this.tableElement);this.firstRender=!0;this.element.addEventListener("scroll",function(){var t=e.element.scrollLeft,l=e.scrollLeft>t,o=e.element.scrollTop,a=e.scrollTop>o;if(e.scrollLeft!=t){e.scrollLeft=t;e.dispatch("scroll-horizontal",t,l);e.dispatchExternal("scrollHorizontal",t,l)}if(e.scrollTop!=o){e.scrollTop=o;e.renderer.scrollRows(o,a);e.dispatch("scroll-vertical",o,a);e.dispatchExternal("scrollVertical",o,a)}})}},{key:"findRow",value:function(t){var l=this;if("object"==e(t)){if(t instanceof $){return t}else if(t instanceof J){return t._getSelf()||!1}else if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement){var o=this.rows.find(function(e){return e.getElement()===t});return o||!1}}else if("undefined"==typeof t||null===t){return!1}else{var a=this.rows.find(function(e){return e.data[l.table.options.index]==t});return a||!1}return!1}},{key:"getRowFromDataObject",value:function(e){var t=this.rows.find(function(t){return t.data===e});return t||!1}},{key:"getRowFromPosition",value:function(e,t){if(t){return this.activeRows[e]}else{return this.rows[e]}}},{key:"scrollToRow",value:function(e,t,l){return this.renderer.scrollToRowPosition(e,t,l)}},{key:"setData",value:function(e,t,l){var o=this;return new Promise(function(a){if(t&&o.getDisplayRows().length){if(o.table.options.pagination){o._setDataActual(e,!0)}else{o.reRenderInPosition(function(){o._setDataActual(e)})}}else{if(o.table.options.autoColumns&&l&&o.table.initialized){o.table.columnManager.generateColumnsFromRowData(e)}o.resetScroll();o._setDataActual(e)}a()})}},{key:"_setDataActual",value:function(t,l){var o=this;this.dispatchExternal("dataProcessing",t);this._wipeElements();if(Array.isArray(t)){this.dispatch("data-processing",t);t.forEach(function(t){if(t&&"object"===e(t)){var l=new $(t,o);o.rows.push(l)}else{console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",t)}});this.refreshActiveData(!1,!1,l);this.dispatch("data-processed",t);this.dispatchExternal("dataProcessed",t)}else{console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",e(t),"\nData:     ",t)}}},{key:"_wipeElements",value:function(){this.dispatch("rows-wipe");this.rows.forEach(function(e){e.wipe()});this.rows=[];this.activeRows=[];this.activeRowsPipeline=[];this.activeRowsCount=0;this.displayRows=[];this.displayRowsCount=0;this.adjustTableSize()}},{key:"deleteRow",value:function(e,t){var l=this.rows.indexOf(e),o=this.activeRows.indexOf(e);if(-1<o){this.activeRows.splice(o,1)}if(-1<l){this.rows.splice(l,1)}this.setActiveRows(this.activeRows);this.displayRowIterator(function(t){var l=t.indexOf(e);if(-1<l){t.splice(l,1)}});if(!t){this.reRenderInPosition()}this.regenerateRowNumbers();this.dispatchExternal("rowDeleted",e.getComponent());if(!this.displayRowsCount){this._showPlaceholder()}if(this.subscribedExternal("dataChanged")){this.dispatchExternal("dataChanged",this.getData())}}},{key:"addRow",value:function(e,t,l,o){var a=this.addRowActual(e,t,l,o);this.dispatch("row-added",a,e,t,l);return a}},{key:"addRows",value:function(e,t,l){var o=this,a=[];return new Promise(function(n){t=o.findAddRowPos(t);if(!Array.isArray(e)){e=[e]}e.length-1;if("undefined"==typeof l&&t||"undefined"!=typeof l&&!t){e.reverse()}e.forEach(function(n){var r=o.addRow(n,t,l,!0);a.push(r);o.dispatch("row-added",r,e,t,l)});o.refreshActiveData(!1,!1,!0);o.regenerateRowNumbers();if(a.length){o._clearPlaceholder()}n(a)})}},{key:"findAddRowPos",value:function(e){if("undefined"==typeof e){e=this.table.options.addRowPos}if("pos"===e){e=!0}if("bottom"===e){e=!1}return e}},{key:"addRowActual",value:function(e,t,l,o){var a=e instanceof $?e:new $(e||{},this),n=this.findAddRowPos(t),r=-1,s,d;if(!l){d=this.chain("row-adding-position",[a,n],null,{index:l,top:n});l=d.index;n=d.top}if("undefined"!=typeof l){l=this.findRow(l)}l=this.chain("row-adding-index",[a,l,n],null,l);if(l){r=this.rows.indexOf(l)}if(l&&-1<r){s=this.activeRows.indexOf(l);this.displayRowIterator(function(e){var t=e.indexOf(l);if(-1<t){e.splice(n?t:t+1,0,a)}});if(-1<s){this.activeRows.splice(n?s:s+1,0,a)}this.rows.splice(n?r:r+1,0,a)}else{if(n){this.displayRowIterator(function(e){e.unshift(a)});this.activeRows.unshift(a);this.rows.unshift(a)}else{this.displayRowIterator(function(e){e.push(a)});this.activeRows.push(a);this.rows.push(a)}}this.setActiveRows(this.activeRows);this.dispatchExternal("rowAdded",a.getComponent());if(this.subscribedExternal("dataChanged")){this.dispatchExternal("dataChanged",this.table.rowManager.getData())}if(!o){this.reRenderInPosition()}return a}},{key:"moveRow",value:function(e,t,l){this.dispatch("row-move",e,t,l);this.moveRowActual(e,t,l);this.regenerateRowNumbers();this.dispatch("row-moved",e,t,l);this.dispatchExternal("rowMoved",e.getComponent())}},{key:"moveRowActual",value:function(e,t,l){var o=this;this.moveRowInArray(this.rows,e,t,l);this.moveRowInArray(this.activeRows,e,t,l);this.displayRowIterator(function(a){o.moveRowInArray(a,e,t,l)});this.dispatch("row-moving",e,t,l)}},{key:"moveRowInArray",value:function(e,t,l,o){var a,n,r,s;if(t!==l){a=e.indexOf(t);if(-1<a){e.splice(a,1);n=e.indexOf(l);if(-1<n){if(o){e.splice(n+1,0,t)}else{e.splice(n,0,t)}}else{e.splice(a,0,t)}}if(e===this.getDisplayRows()){r=a<n?a:n;s=n>a?n:a+1;for(var d=r;d<=s;d++){if(e[d]){this.styleRow(e[d],d)}}}}}},{key:"clearData",value:function(){this.setData([])}},{key:"getRowIndex",value:function(e){return this.findRowIndex(e,this.rows)}},{key:"getDisplayRowIndex",value:function(e){var t=this.getDisplayRows().indexOf(e);return-1<t?t:!1}},{key:"nextDisplayRow",value:function(e,t){var l=this.getDisplayRowIndex(e),o=!1;if(!1!==l&&l<this.displayRowsCount-1){o=this.getDisplayRows()[l+1]}if(o&&(!(o instanceof $)||"row"!=o.type)){return this.nextDisplayRow(o,t)}return o}},{key:"prevDisplayRow",value:function(e,t){var l=this.getDisplayRowIndex(e),o=!1;if(l){o=this.getDisplayRows()[l-1]}if(t&&o&&(!(o instanceof $)||"row"!=o.type)){return this.prevDisplayRow(o,t)}return o}},{key:"findRowIndex",value:function(e,t){var l;e=this.findRow(e);if(e){l=t.indexOf(e);if(-1<l){return l}}return!1}},{key:"getData",value:function(e,t){var l=[],o=this.getRows(e);o.forEach(function(e){if("row"==e.type){l.push(e.getData(t||"data"))}});return l}},{key:"getComponents",value:function(e){var t=[],l=this.getRows(e);l.forEach(function(e){t.push(e.getComponent())});return t}},{key:"getDataCount",value:function(e){var t=this.getRows(e);return t.length}},{key:"scrollHorizontal",value:function(e){this.scrollLeft=e;this.element.scrollLeft=e;this.dispatch("scroll-horizontal",e)}},{key:"registerDataPipelineHandler",value:function(e,t){if("undefined"!=typeof t){this.dataPipeline.push({handler:e,priority:t});this.dataPipeline.sort(function(e,t){return e.priority-t.priority})}else{console.error("Data pipeline handlers must have a priority in order to be registered")}}},{key:"registerDisplayPipelineHandler",value:function(e,t){if("undefined"!=typeof t){this.displayPipeline.push({handler:e,priority:t});this.displayPipeline.sort(function(e,t){return e.priority-t.priority})}else{console.error("Display pipeline handlers must have a priority in order to be registered")}}},{key:"refreshActiveData",value:function(e,t,l){var o=this.table,a="",n=0,r=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof e){n=this.dataPipeline.findIndex(function(t){return t.handler===e});if(-1<n){a="dataPipeline";if(t){if(n==this.dataPipeline.length-1){a="display"}else{n++}}}else{n=this.displayPipeline.findIndex(function(t){return t.handler===e});if(-1<n){a="displayPipeline";if(t){if(n==this.displayPipeline.length-1){a="end"}else{n++}}}else{console.error("Unable to refresh data, invalid handler provided",e);return}}}else{a=e||"all";n=0}if(this.redrawBlock){if(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===a&&n<this.redrawBlockRestoreConfig.index||r.indexOf(a)<r.indexOf(this.redrawBlockRestoreConfig.stage))){this.redrawBlockRestoreConfig={handler:e,skipStage:t,renderInPosition:l,stage:a,index:n}}}else{this.dispatch("data-refeshing");if(!e){this.activeRowsPipeline[0]=this.rows.slice(0)}switch(a){case"all":case"dataPipeline":for(var s=n,d;s<this.dataPipeline.length;s++){d=this.dataPipeline[s].handler(this.activeRowsPipeline[s].slice(0));this.activeRowsPipeline[s+1]=d||this.activeRowsPipeline[s].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);this.regenerateRowNumbers();case"display":n=0;this.resetDisplayRows();case"displayPipeline":for(var u=n,c;u<this.displayPipeline.length;u++){c=this.displayPipeline[u].handler((u?this.getDisplayRows(u-1):this.activeRows).slice(0),l);this.setDisplayRows(c||this.getDisplayRows(u-1).slice(0),u)}}if(j.elVisible(this.element)){if(l){this.reRenderInPosition()}else{if(!e){this.table.columnManager.renderer.renderColumns()}this.renderTable();if(o.options.layoutColumnsOnNewData){this.table.columnManager.redraw(!0)}}}this.dispatch("data-refeshed")}}},{key:"regenerateRowNumbers",value:function(){var e=this;if(this.rowNumColumn){this.activeRows.forEach(function(t){var l=t.getCell(e.rowNumColumn);if(l){l._generateContents()}})}}},{key:"setActiveRows",value:function(e){this.activeRows=e;this.activeRowsCount=this.activeRows.length}},{key:"resetDisplayRows",value:function(){this.displayRows=[];this.displayRows.push(this.activeRows.slice(0));this.displayRowsCount=this.displayRows[0].length}},{key:"getNextDisplayIndex",value:function(){return this.displayRows.length}},{key:"setDisplayRows",value:function(e,t){var l=!0;if(t&&"undefined"!=typeof this.displayRows[t]){this.displayRows[t]=e;l=!0}else{this.displayRows.push(e);l=t=this.displayRows.length-1}if(t==this.displayRows.length-1){this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}return l}},{key:"getDisplayRows",value:function(e){if("undefined"==typeof e){return this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]}else{return this.displayRows[e]||[]}}},{key:"getVisibleRows",value:function(e){return this.renderer.visibleRows(!e)}},{key:"displayRowIterator",value:function(e){this.activeRowsPipeline.forEach(e);this.displayRows.forEach(e);this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}},{key:"getRows",value:function(e){var t;switch(e){case"active":t=this.activeRows;break;case"display":t=this.table.rowManager.getDisplayRows();break;case"visible":t=this.getVisibleRows(!0);break;default:t=this.chain("rows-retrieve",e,null,this.rows)||this.rows;}return t}},{key:"reRenderInPosition",value:function(e){if(this.redrawBlock){if(e){e()}else{this.redrawBlockRederInPosition=!0}}else{this.renderer.rerenderRows(e)}}},{key:"initializeRenderer",value:function(){var e;if("string"==typeof this.table.options.renderVertical){e={virtual:Z,basic:Q}[this.table.options.renderVertical]}else{e=this.table.options.renderVertical}if(e){this.renderer=new e(this.table,this.element,this.tableElement);this.renderer.initialize();if(this.table.element.clientHeight||this.table.options.height){this.fixedHeight=!0}else{this.fixedHeight=!1}}else{console.error("Unable to find matching renderer:",table.options.renderVertical)}}},{key:"getRenderMode",value:function(){return this.renderMode}},{key:"renderTable",value:function(){this.dispatchExternal("renderStarted");this.element.scrollTop=0;this._clearTable();if(this.displayRowsCount){this.renderer.renderRows();if(this.firstRender){this.firstRender=!1;this.layoutRefresh()}}else{this.renderEmptyScroll()}if(!this.fixedHeight){this.adjustTableSize()}this.dispatch("table-layout");if(!this.displayRowsCount){this._showPlaceholder()}this.dispatchExternal("renderComplete")}},{key:"renderEmptyScroll",value:function(){if(this.table.options.placeholder){this.tableElement.style.display="none"}else{this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}}},{key:"_clearTable",value:function(){this.tableElement;this._clearPlaceholder();this.scrollTop=0;this.scrollLeft=0;this.renderer.clearRows()}},{key:"_showPlaceholder",value:function(){if(this.table.options.placeholder){this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode);this.getElement().appendChild(this.table.options.placeholder);this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px"}}},{key:"_clearPlaceholder",value:function(){if(this.table.options.placeholder&&this.table.options.placeholder.parentNode){this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}}},{key:"styleRow",value:function(e,t){var l=e.getElement();if(t%2){l.classList.add("tabulator-row-even");l.classList.remove("tabulator-row-odd")}else{l.classList.add("tabulator-row-odd");l.classList.remove("tabulator-row-even")}}},{key:"normalizeHeight",value:function(){this.activeRows.forEach(function(e){e.normalizeHeight()})}},{key:"adjustTableSize",value:function(){var e=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){var t=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){this.element.style.minHeight="calc(100% - "+t+"px)";this.element.style.height="calc(100% - "+t+"px)";this.element.style.maxHeight="calc(100% - "+t+"px)"}else{this.element.style.height="";this.element.style.height=this.table.element.clientHeight-t+"px";this.element.scrollTop=this.scrollTop}this.renderer.resize();if(!this.fixedHeight&&e!=this.element.clientHeight){if(this.subscribed("table-resize")){this.dispatch("table-resize")}else{this.redraw()}}}}},{key:"reinitialize",value:function(){this.rows.forEach(function(e){e.reinitialize(!0)})}},{key:"blockRedraw",value:function(){this.redrawBlock=!0;this.redrawBlockRestoreConfig=!1}},{key:"restoreRedraw",value:function(){this.redrawBlock=!1;if(this.redrawBlockRestoreConfig){this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition);this.redrawBlockRestoreConfig=!1}else{if(this.redrawBlockRederInPosition){this.reRenderInPosition()}}this.redrawBlockRederInPosition=!1}},{key:"redraw",value:function(e){var t=this.scrollLeft;this.adjustTableSize();this.table.tableWidth=this.table.element.clientWidth;if(!e){this.reRenderInPosition();this.scrollHorizontal(t);if(!this.displayRowsCount){if(this.table.options.placeholder){this.getElement().appendChild(this.table.options.placeholder)}}}else{this.renderTable()}}},{key:"resetScroll",value:function(){this.element.scrollLeft=0;this.element.scrollTop=0;if("ie"===this.table.browser){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0);this.element.dispatchEvent(e)}else{this.element.dispatchEvent(new Event("scroll"))}}}]);return n}(V),te=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.active=!1;l.element=l.createElement();l.external=!1;l.links=[];l.initializeElement();return l}o(n,[{key:"initialize",value:function(){this.initializeElement()}},{key:"createElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-footer");return e}},{key:"initializeElement",value:function(){if(this.table.options.footerElement){switch(e(this.table.options.footerElement)){case"string":if("<"===this.table.options.footerElement[0]){this.element.innerHTML=this.table.options.footerElement}else{this.external=!0;this.element=document.querySelector(this.table.options.footerElement)}break;default:this.element=this.table.options.footerElement;break;}}}},{key:"getElement",value:function(){return this.element}},{key:"append",value:function(e,t){this.activate(t);this.element.appendChild(e);this.table.rowManager.adjustTableSize()}},{key:"prepend",value:function(e,t){this.activate(t);this.element.insertBefore(e,this.element.firstChild);this.table.rowManager.adjustTableSize()}},{key:"remove",value:function(e){e.parentNode.removeChild(e);this.deactivate()}},{key:"deactivate",value:function(e){if(!this.element.firstChild||e){if(!this.external){this.element.parentNode.removeChild(this.element)}this.active=!1}}},{key:"activate",value:function(e){if(!this.active){this.active=!0;if(!this.external){this.table.element.appendChild(this.getElement());this.table.element.style.display=""}}if(e){this.links.push(e)}}},{key:"redraw",value:function(){this.links.forEach(function(e){e.footerRedraw()})}}]);return n}(V),le=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.el=o.table.element;o.abortClasses=["tabulator-headers","tabulator-table"];o.previousTargets={};o.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"];o.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"};o.buildListenerMap();o.bindSubscriptionWatchers();return o}o(l,[{key:"buildListenerMap",value:function(){var e={};this.listeners.forEach(function(t){e[t]={handler:null,components:[]}});this.listeners=e}},{key:"bindSubscriptionWatchers",value:function(){for(var e=Object.keys(this.listeners),t=Object.values(this.componentMap),l=0,o=t;l<o.length;l++){var a=o[l],n=f(e),r;try{for(n.s();!(r=n.n()).done;){var s=r.value;this.subscriptionChange(a+"-"+s,this.subscriptionChanged.bind(this,a,s))}}catch(e){n.e(e)}finally{n.f()}}}},{key:"subscriptionChanged",value:function(e,t,l){var o=this.listeners[t].components,a=o.indexOf(e),n=!1;if(l){if(-1===a){o.push(e);n=!0}}else{if(!this.subscribed(e+"-"+t)){if(-1<a){o.splice(a,1);n=!0}}}if(n){this.updateEventListeners()}}},{key:"updateEventListeners",value:function(){for(var e in this.listeners){var t=this.listeners[e];if(t.components.length){if(!t.handler){t.handler=this.track.bind(this,e);this.el.addEventListener(e,t.handler)}}else{if(t.handler){this.el.removeEventListener(e,t.handler);t.handler=null}}}}},{key:"track",value:function(t,l){var e=l.composedPath&&l.composedPath()||l.path,o=this.findTargets(e);o=this.bindComponents(t,o);this.triggerEvents(t,l,o)}},{key:"findTargets",value:function(e){var t=this,l={},o=Object.keys(this.componentMap),a=f(e),n;try{for(a.s();!(n=a.n()).done;){var r=n.value,s=r.classList?m(r.classList):[],d=s.filter(function(e){return t.abortClasses.includes(e)});if(d.length){break}var u=s.filter(function(e){return o.includes(e)}),c=f(u),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;l[this.componentMap[g]]=r}}catch(e){c.e(e)}finally{c.f()}}}catch(e){a.e(e)}finally{a.f()}if(l.group&&l.group===l.row){delete l.row}return l}},{key:"bindComponents",value:function(e,t){var l=this,o=Object.keys(t).reverse(),a=this.listeners[e],n={},r=f(o),s;try{var d=function(){var e=s.value,o=void 0,r=t[e],d=l.previousTargets[e];if(d&&d.target===r){o=d.component}else{switch(e){case"row":case"group":if(a.components.includes("row")||a.components.includes("cell")){var u=l.table.rowManager.getVisibleRows();o=u.find(function(e){return e.getElement()===r})}break;case"column":if(a.components.includes("column")){o=l.table.columnManager.findColumn(r)}break;case"cell":if(a.components.includes("cell")){o=t.row.findCell(r)}break;}}if(o){t[e]=o;n[e]={target:r,component:o}}};for(r.s();!(s=r.n()).done;){d()}}catch(e){r.e(e)}finally{r.f()}this.previousTargets=n;return t}},{key:"triggerEvents",value:function(t,l,e){var o=this.listeners[t];for(var a in e){if(e[a]&&o.components.includes(a)){this.dispatch(a+"-"+t,l,e[a])}}}}]);return l}(V),oe=function(){function e(l){t(this,e);this.table=l;this.bindings={}}o(e,[{key:"bind",value:function(e,t,l){if(!this.bindings[e]){this.bindings[e]={}}if(this.bindings[e][t]){console.warn("Unable to bind component handler, a matching function name is already bound",e,t,hanlder)}else{this.bindings[e][t]=l}}},{key:"handle",value:function(e,t,l){if(this.bindings[e]&&this.bindings[e][l]){return this.bindings[e][l].bind(null,t)}else{if("then"!==l&&"string"==typeof l&&!l.startsWith("_")){console.error("The "+e+" component does not have a "+l+" function, have you checked that you have the correct Tabulator module installed?")}}}}]);return e}(),ae=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.loaderElement=l.createLoaderElement();l.msgElement=l.createMsgElement();l.loadingElement=null;l.errorElement=null;l.requestOrder=0;l.loading=!1;return l}o(n,[{key:"initialize",value:function(){var e;this.loaderElement.appendChild(this.msgElement);if(this.table.options.dataLoaderLoading){if("string"==typeof this.table.options.dataLoaderLoading){e=document.createElement("template");e.innerHTML=this.table.options.dataLoaderLoading.trim();this.loadingElement=e.firstElementChild}else{this.loadingElement=this.table.options.dataLoaderLoading}}if(this.table.options.dataLoaderError){if("string"==typeof this.table.options.dataLoaderError){e=document.createElement("template");e.innerHTML=this.table.options.dataLoaderError.trim();this.errorElement=e.firstElementChild}else{this.errorElement=this.table.options.dataLoaderError}}}},{key:"createLoaderElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-loader");return e}},{key:"createMsgElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-loader-msg");e.setAttribute("role","alert");return e}},{key:"load",value:function(t,l,o,a,n){var r=this,s=++this.requestOrder;this.dispatchExternal("dataLoading",t);if(t&&(0==t.indexOf("{")||0==t.indexOf("["))){t=JSON.parse(t)}if(this.confirm("data-loading",t,l,o,n)){this.loading=!0;if(!n){this.showLoader()}var l=this.chain("data-params",[t,o,n],l||{},{});l=this.mapParams(l,this.table.options.dataSendParams);var d=this.chain("data-load",[t,l,o,n],Promise.resolve([]));return d.then(function(t){if(!Array.isArray(t)&&"object"==e(t)){t=r.mapParams(t,r.objectInvert(r.table.options.dataReceiveParams))}var l=r.chain("data-loaded",t,null,t);if(s==r.requestOrder){r.hideLoader();if(!1!==l){r.dispatchExternal("dataLoaded",l);r.table.rowManager.setData(l,a,!a)}}else{console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}})["catch"](function(e){console.error("Data Load Error: ",e);r.dispatchExternal("dataLoadError",e);if(!n){r.showError()}setTimeout(function(){r.hideLoader()},3e3)})["finally"](function(){r.loading=!1})}else{this.dispatchExternal("dataLoaded",t);if(!t){t=[]}this.table.rowManager.setData(t,a,!a);return Promise.resolve()}}},{key:"mapParams",value:function(e,t){var l={};for(var o in e){l[t.hasOwnProperty(o)?t[o]:o]=e[o]}return l}},{key:"objectInvert",value:function(e){var t={};for(var l in e){t[e[l]]=l}return t}},{key:"blockActiveLoad",value:function(){this.requestOrder++}},{key:"showLoader",value:function(){var e="function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader;if(e){this.hideLoader();while(this.msgElement.firstChild){this.msgElement.removeChild(this.msgElement.firstChild)}this.msgElement.classList.remove("tabulator-error");this.msgElement.classList.add("tabulator-loading");if(this.loadingElement){this.msgElement.appendChild(this.loadingElement)}else{this.msgElement.innerHTML=this.langText("data|loading")}this.table.element.appendChild(this.loaderElement)}}},{key:"showError",value:function(){this.hideLoader();while(this.msgElement.firstChild){this.msgElement.removeChild(this.msgElement.firstChild)}this.msgElement.classList.remove("tabulator-loading");this.msgElement.classList.add("tabulator-error");if(this.errorElement){this.msgElement.appendChild(this.errorElement)}else{this.msgElement.innerHTML=this.langText("data|error")}this.table.element.appendChild(this.loaderElement)}},{key:"hideLoader",value:function(){if(this.loaderElement.parentNode){this.loaderElement.parentNode.removeChild(this.loaderElement)}}}]);return n}(V),ne=function(){function e(l,o,a){t(this,e);this.table=l;this.events={};this.optionsList=o||{};this.subscriptionNotifiers={};this.dispatch=a?this._debugDispatch.bind(this):this._dispatch.bind(this);this.debug=a}o(e,[{key:"subscriptionChange",value:function(e,t){if(!this.subscriptionNotifiers[e]){this.subscriptionNotifiers[e]=[]}this.subscriptionNotifiers[e].push(t);if(this.subscribed(e)){this._notifiySubscriptionChange(e,!0)}}},{key:"subscribe",value:function(e,t){if(!this.events[e]){this.events[e]=[]}this.events[e].push(t);this._notifiySubscriptionChange(e,!0)}},{key:"unsubscribe",value:function(e,t){var l;if(this.events[e]){if(t){l=this.events[e].findIndex(function(e){return e===t});if(-1<l){this.events[e].splice(l,1)}else{console.warn("Cannot remove event, no matching event found:",e,t);return}}else{delete this.events[e]}}else{console.warn("Cannot remove event, no events set on:",e);return}this._notifiySubscriptionChange(e,!1)}},{key:"subscribed",value:function(e){return this.events[e]&&this.events[e].length}},{key:"_notifiySubscriptionChange",value:function(e,t){var l=this.subscriptionNotifiers[e];if(l){l.forEach(function(e){e(t)})}}},{key:"_dispatch",value:function(){var e=this,t=Array.from(arguments),l=t.shift(),o;if(this.events[l]){this.events[l].forEach(function(l,a){var n=l.apply(e.table,t);if(!a){o=n}})}return o}},{key:"_debugDispatch",value:function(){var e=Array.from(arguments),t=e[0];e[0]="ExternalEvent:"+e[0];if(!0===this.debug||this.debug.includes(t)){var l;(l=console).log.apply(l,m(e))}return this._dispatch.apply(this,arguments)}}]);return e}(),ie=function(){function e(l){t(this,e);this.events={};this.subscriptionNotifiers={};this.dispatch=l?this._debugDispatch.bind(this):this._dispatch.bind(this);this.chain=l?this._debugChain.bind(this):this._chain.bind(this);this.confirm=l?this._debugConfirm.bind(this):this._confirm.bind(this);this.debug=l}o(e,[{key:"subscriptionChange",value:function(e,t){if(!this.subscriptionNotifiers[e]){this.subscriptionNotifiers[e]=[]}this.subscriptionNotifiers[e].push(t);if(this.subscribed(e)){this._notifiySubscriptionChange(e,!0)}}},{key:"subscribe",value:function(e,t){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1e4;if(!this.events[e]){this.events[e]=[]}this.events[e].push({callback:t,priority:l});this.events[e].sort(function(e,t){return e.priority-t.priority});this._notifiySubscriptionChange(e,!0)}},{key:"unsubscribe",value:function(e,t){var l;if(this.events[e]){if(t){l=this.events[e].findIndex(function(e){return e.callback===t});if(-1<l){this.events[e].splice(l,1)}else{console.warn("Cannot remove event, no matching event found:",e,t);return}}}else{console.warn("Cannot remove event, no events set on:",e);return}this._notifiySubscriptionChange(e,!1)}},{key:"subscribed",value:function(e){return this.events[e]&&this.events[e].length}},{key:"_chain",value:function(e,t,l,o){var a=this,n=l;if(!Array.isArray(t)){t=[t]}if(this.subscribed(e)){this.events[e].forEach(function(e){n=e.callback.apply(a,t.concat([n]))});return n}else{return"function"==typeof o?o():o}}},{key:"_confirm",value:function(e,t){var l=this,o=!1;if(!Array.isArray(t)){t=[t]}if(this.subscribed(e)){this.events[e].forEach(function(e){if(e.callback.apply(l,t)){o=!0}})}return o}},{key:"_notifiySubscriptionChange",value:function(e,t){var l=this.subscriptionNotifiers[e];if(l){l.forEach(function(e){e(t)})}}},{key:"_dispatch",value:function(){var e=this,t=Array.from(arguments),l=t.shift();if(this.events[l]){this.events[l].forEach(function(l){l.callback.apply(e,t)})}}},{key:"_debugDispatch",value:function(){var e=Array.from(arguments),t=e[0];e[0]="InternalEvent:"+t;if(!0===this.debug||this.debug.includes(t)){var l;(l=console).log.apply(l,m(e))}return this._dispatch.apply(this,arguments)}},{key:"_debugChain",value:function(){var e=Array.from(arguments),t=e[0];e[0]="InternalEvent:"+t;if(!0===this.debug||this.debug.includes(t)){var l;(l=console).log.apply(l,m(e))}return this._chain.apply(this,arguments)}},{key:"_debugConfirm",value:function(){var e=Array.from(arguments),t=e[0];e[0]="InternalEvent:"+t;if(!0===this.debug||this.debug.includes(t)){var l;(l=console).log.apply(l,m(e))}return this._confirm.apply(this,arguments)}}]);return e}(),re=function(){function e(){t(this,e)}o(e,null,[{key:"register",value:function(t){e.tables.push(t)}},{key:"deregister",value:function(t){var l=e.tables.indexOf(t);if(-1<l){e.tables.splice(l,1)}}},{key:"lookupTable",value:function(t,l){var o=[],a,n;if("string"==typeof t){a=document.querySelectorAll(t);if(a.length){for(var r=0;r<a.length;r++){n=e.matchElement(a[r]);if(n){o.push(n)}}}}else if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||t instanceof ge){n=e.matchElement(t);if(n){o.push(n)}}else if(Array.isArray(t)){t.forEach(function(t){o=o.concat(e.lookupTable(t))})}else{if(!l){console.warn("Table Connection Error - Invalid Selector",t)}}return o}},{key:"matchElement",value:function(t){return e.tables.find(function(e){return t instanceof ge?e===t:e.element===t})}}]);return e}();re.tables=[];var se=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o._handler=null;return o}o(l,[{key:"initialize",value:function(){}},{key:"registerTableOption",value:function(e,t){this.table.optionsList.register(e,t)}},{key:"registerColumnOption",value:function(e,t){this.table.columnManager.optionsList.register(e,t)}},{key:"registerTableFunction",value:function(e,t){if("undefined"==typeof this.table[e]){this.table[e]=t}else{console.warn("Unable to bind table function, name already in use",e)}}},{key:"registerComponentFunction",value:function(e,t,l){return this.table.componentFunctionBinder.bind(e,t,l)}},{key:"registerDataHandler",value:function(e,t){this.table.rowManager.registerDataPipelineHandler(e,t);this._handler=e}},{key:"registerDisplayHandler",value:function(e,t){this.table.rowManager.registerDisplayPipelineHandler(e,t);this._handler=e}},{key:"refreshData",value:function(e,t){if(!t){t=this._handler}if(t){this.table.rowManager.refreshActiveData(t,!1,e)}}}]);return l}(V);function y(e){e.forEach(function(e){e.reinitializeWidth()});if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}}var de=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e,"layout");o.mode=null;o.registerTableOption("layout","fitData");o.registerTableOption("layoutColumnsOnNewData",!1);o.registerColumnOption("widthGrow");o.registerColumnOption("widthShrink");return o}o(l,[{key:"initialize",value:function(){var e=this.table.options.layout;if(l.modes[e]){this.mode=e}else{console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e);this.mode="fitData"}this.table.element.setAttribute("tabulator-layout",this.mode)}},{key:"getMode",value:function(){return this.mode}},{key:"layout",value:function(){l.modes[this.mode].call(this,this.table.columnManager.columnsByIndex);this.dispatch("layout-refreshed")}}]);return l}(se);de.moduleName="layout";de.modes={fitData:function(e){this.table.columnManager.renderer.reinitializeColumnWidths(e);if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}},fitDataFill:y,fitDataTable:y,fitDataStretch:function(e){var t=this,l=0,o=this.table.rowManager.element.clientWidth,a=0,n=!1;e.forEach(function(e){if(!e.widthFixed){e.reinitializeWidth()}if(t.table.options.responsiveLayout?e.modules.responsive.visible:e.visible){n=e}if(e.visible){l+=e.getWidth()}});if(n){a=o-l+n.getWidth();if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){n.setWidth(0);this.table.modules.responsiveLayout.update()}if(0<a){n.setWidth(a)}else{n.reinitializeWidth()}}else{if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}}},fitColumns:function(e){var o=this.table.element.clientWidth,a=0,n=0,r=0,s=0,d=[],u=[],c=0,m=0,p=0;function t(e){var t;if("string"==typeof e){if(-1<e.indexOf("%")){t=o/100*parseInt(e)}else{t=parseInt(e)}}else{t=e}return t}function l(e,o,a,n){var u=[],c=0,m=0,p=0,g=r,b=0,h=0,v=[];function s(e){return a*(e.column.definition.widthGrow||1)}function d(e){return t(e.width)-a*(e.column.definition.widthShrink||0)}e.forEach(function(e){var t=n?d(e):s(e);if(e.column.minWidth>=t){u.push(e)}else{if(e.column.maxWidth&&e.column.maxWidth<t){e.width=e.column.maxWidth;o-=e.column.maxWidth;g-=n?e.column.definition.widthShrink||1:e.column.definition.widthGrow||1;if(g){a=Math.floor(o/g)}}else{v.push(e);h+=n?e.column.definition.widthShrink||1:e.column.definition.widthGrow||1}}});if(u.length){u.forEach(function(e){c+=n?e.width-e.column.minWidth:e.column.minWidth;e.width=e.column.minWidth});m=o-c;p=h?Math.floor(m/h):m;b=m-p*h;b+=l(v,m,p,n)}else{b=h?o-Math.floor(o/h)*h:o;v.forEach(function(e){e.width=n?d(e):s(e)})}return b}if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}if(this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight){o-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth}e.forEach(function(e){var l,o,n;if(e.visible){l=e.definition.width;o=parseInt(e.minWidth);if(l){n=t(l);a+=n>o?n:o;if(e.definition.widthShrink){u.push({column:e,width:n>o?n:o});c+=e.definition.widthShrink}}else{d.push({column:e,width:0});r+=e.definition.widthGrow||1}}});n=o-a;s=Math.floor(n/r);var p=l(d,n,s,!1);if(d.length&&0<p){d[d.length-1].width+=+p}d.forEach(function(e){n-=e.width});m=Math.abs(p)+n;if(0<m&&c){p=l(u,m,Math.floor(m/c),!0)}if(u.length){u[u.length-1].width-=p}d.forEach(function(e){e.column.setWidth(e.width)});u.forEach(function(e){e.column.setWidth(e.width)})}};var ue=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.locale="default";l.lang=!1;l.bindings={};l.langList={};l.registerTableOption("locale",!1);l.registerTableOption("langs",{});return l}o(n,[{key:"initialize",value:function(){this.langList=j.deepClone(n.langs);if(!1!==this.table.options.columnDefaults.headerFilterPlaceholder){this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder)}for(var e in this.table.options.langs){this.installLang(e,this.table.options.langs[e])}this.setLocale(this.table.options.locale);this.registerTableFunction("setLocale",this.setLocale.bind(this));this.registerTableFunction("getLocale",this.getLocale.bind(this));this.registerTableFunction("getLang",this.getLang.bind(this))}},{key:"setHeaderFilterPlaceholder",value:function(e){this.langList["default"].headerFilters["default"]=e}},{key:"setHeaderFilterColumnPlaceholder",value:function(e,t){this.langList["default"].headerFilters.columns[e]=t;if(this.lang&&!this.lang.headerFilters.columns[e]){this.lang.headerFilters.columns[e]=t}}},{key:"installLang",value:function(e,t){if(this.langList[e]){this._setLangProp(this.langList[e],t)}else{this.langList[e]=t}}},{key:"_setLangProp",value:function(t,l){for(var o in l){if(t[o]&&"object"==e(t[o])){this._setLangProp(t[o],l[o])}else{t[o]=l[o]}}}},{key:"setLocale",value:function(t){t=t||"default";function l(t,o){for(var a in t){if("object"==e(t[a])){if(!o[a]){o[a]={}}l(t[a],o[a])}else{o[a]=t[a]}}}if(!0===t&&navigator.language){t=navigator.language.toLowerCase()}if(t){if(!this.langList[t]){var o=t.split("-")[0];if(this.langList[o]){console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,o);t=o}else{console.warn("Localization Error - Matching locale not found, using default: ",t);t="default"}}}this.locale=t;this.lang=j.deepClone(this.langList["default"]||{});if("default"!=t){l(this.langList[t],this.lang)}this.dispatchExternal("localized",this.locale,this.lang);this._executeBindings()}},{key:"getLocale",value:function(){return this.locale}},{key:"getLang",value:function(e){return e?this.langList[e]:this.lang}},{key:"getText",value:function(e,t){var e=t?e+"|"+t:e,l=e.split("|"),o=this._getLangElement(l,this.locale);return o||""}},{key:"_getLangElement",value:function(e){var t=this.lang;e.forEach(function(e){var l;if(t){l=t[e];if("undefined"!=typeof l){t=l}else{t=!1}}});return t}},{key:"bind",value:function(e,t){if(!this.bindings[e]){this.bindings[e]=[]}this.bindings[e].push(t);t(this.getText(e),this.lang)}},{key:"_executeBindings",value:function(){var e=this,t=function(t){e.bindings[t].forEach(function(l){l(e.getText(t),e.lang)})};for(var l in this.bindings){t(l)}}}]);return n}(se);ue.moduleName="localize";ue.langs={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}};var ce=function(e){a(l,e);var n=c(l);function l(e){t(this,l);return n.call(this,e)}o(l,[{key:"initialize",value:function(){this.registerTableFunction("tableComms",this.receive.bind(this))}},{key:"getConnections",value:function(e){var t=this,l=[],o;o=re.lookupTable(e);o.forEach(function(e){if(t.table!==e){l.push(e)}});return l}},{key:"send",value:function(e,t,l,o){var a=this,n=this.getConnections(e);n.forEach(function(e){e.tableComms(a.table.element,t,l,o)});if(!n.length&&e){console.warn("Table Connection Error - No tables matching selector found",e)}}},{key:"receive",value:function(e,t,l,o){if(this.table.modExists(t)){return this.table.modules[t].commsReceived(e,l,o)}else{console.warn("Inter-table Comms Error - no such module:",t)}}}]);return l}(se);ce.moduleName="comms";var me=Object.freeze({__proto__:null,LayoutModule:de,LocalizeModule:ue,CommsModule:ce}),pe=function(){function l(e,o){t(this,l);this.bindStaticFuctionality(e);this.bindModules(e,me,!0);if(o){this.bindModules(e,o)}}o(l,[{key:"bindStaticFuctionality",value:function(t){t.moduleBindings={};t.extendModule=function(l,o,a){if(t.moduleBindings[l]){var n=t.moduleBindings[l][o];if(n){if("object"==e(a)){for(var r in a){n[r]=a[r]}}else{console.warn("Module Error - Invalid value type, it must be an object")}}else{console.warn("Module Error - property does not exist:",o)}}else{console.warn("Module Error - module does not exist:",l)}};t.registerModule=function(e){if(!Array.isArray(e)){e=[e]}e.forEach(function(e){t.registerModuleBinding(e)})};t.registerModuleBinding=function(e){t.moduleBindings[e.moduleName]=e};t.findTable=function(e){var t=re.lookupTable(e,!0);return Array.isArray(t)&&!t.length?!1:t};t.prototype.bindModules=function(){this.modules={};for(var e in t.moduleBindings){var l=t.moduleBindings[e];this.modules[e]=new l(this);if(l.prototype.moduleCore){this.modulesCore[e]=this.modules[e]}else{this.modulesRegular[e]=this.modules[e]}}}}},{key:"bindModules",value:function(e,t,l){var o=Object.values(t);if(l){o.forEach(function(e){e.prototype.moduleCore=!0})}e.registerModule(o)}}]);return l}(),ge=function(){function l(e,o){var a=this;t(this,l);this.options={};this.columnManager=null;this.rowManager=null;this.footerManager=null;this.vdomHoz=null;this.externalEvents=null;this.eventBus=null;this.interactionMonitor=!1;this.browser="";this.browserSlow=!1;this.browserMobile=!1;this.rtl=!1;this.originalElement=null;this.componentFunctionBinder=new oe(this);this.dataLoader=!1;this.modules={};this.modulesCore={};this.modulesRegular={};this.optionsList=new U(this,"table constructor");this.initialized=!1;if(this.initializeElement(e)){this.initialzeCoreSystems(o);setTimeout(function(){a._create()})}re.register(this)}o(l,[{key:"initializeElement",value:function(e){if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement){this.element=e;return!0}else if("string"==typeof e){this.element=document.querySelector(e);if(this.element){return!0}else{console.error("Tabulator Creation Error - no element found matching selector: ",e);return!1}}else{console.error("Tabulator Creation Error - Invalid element provided:",e);return!1}}},{key:"initialzeCoreSystems",value:function(e){this.columnManager=new Y(this);this.rowManager=new ee(this);this.footerManager=new te(this);this.dataLoader=new ae(this);this.bindModules();this.options=this.optionsList.generate(l.defaultOptions,e);this._clearObjectPointers();this._mapDepricatedFunctionality();this.externalEvents=new ne(this,this.options,this.options.debugEventsExternal);this.eventBus=new ie(this.options.debugEventsInternal);this.interactionMonitor=new le(this);this.dataLoader.initialize();this.columnManager.initialize();this.rowManager.initialize();this.footerManager.initialize()}},{key:"_mapDepricatedFunctionality",value:function(){}},{key:"_clearSelection",value:function(){this.element.classList.add("tabulator-block-select");if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}else if(document.selection){document.selection.empty()}this.element.classList.remove("tabulator-block-select")}},{key:"_create",value:function(){this.externalEvents.dispatch("tableBuilding");this.eventBus.dispatch("table-building");this._rtlCheck();this._buildElement();this._initializeTable();this._loadInitialData();this.initialized=!0;this.externalEvents.dispatch("tableBuilt")}},{key:"_rtlCheck",value:function(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==e.direction){break}case"rtl":this.element.classList.add("tabulator-rtl");this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1;}}},{key:"_clearObjectPointers",value:function(){this.options.columns=this.options.columns.slice(0);if(this.options.data&&!this.options.reactiveData){this.options.data=this.options.data.slice(0)}}},{key:"_buildElement",value:function(){var t=this.element,l=this.options,o;if("TABLE"===t.tagName){this.originalElement=this.element;o=document.createElement("div");var a=t.attributes;for(var n in a){if("object"==e(a[n])){o.setAttribute(a[n].name,a[n].value)}}t.parentNode.replaceChild(o,t);this.element=t=o}t.classList.add("tabulator");t.setAttribute("role","grid");while(t.firstChild){t.removeChild(t.firstChild)}if(l.height){l.height=isNaN(l.height)?l.height:l.height+"px";t.style.height=l.height}if(!1!==l.minHeight){l.minHeight=isNaN(l.minHeight)?l.minHeight:l.minHeight+"px";t.style.minHeight=l.minHeight}if(!1!==l.maxHeight){l.maxHeight=isNaN(l.maxHeight)?l.maxHeight:l.maxHeight+"px";t.style.maxHeight=l.maxHeight}}},{key:"_initializeTable",value:function(){var e=this.element,t=this.options;this.columnManager.initialize();this.rowManager.initialize();this._detectBrowser();for(var l in this.modulesCore){var o=this.modulesCore[l];o.initialize()}if("string"==typeof t.placeholder){var a=document.createElement("div");a.classList.add("tabulator-placeholder");var n=document.createElement("span");n.innerHTML=t.placeholder;a.appendChild(n);t.placeholder=a}e.appendChild(this.columnManager.getElement());e.appendChild(this.rowManager.getElement());if(t.footerElement){this.footerManager.activate()}if(t.autoColumns&&t.data){this.columnManager.generateColumnsFromRowData(this.options.data)}for(var r in this.modulesRegular){var s=this.modulesRegular[r];s.initialize()}this.columnManager.setColumns(t.columns);this.eventBus.dispatch("table-built")}},{key:"_loadInitialData",value:function(){this.dataLoader.load(this.options.data)}},{key:"destroy",value:function(){var e=this.element;re.deregister(this);this.eventBus.dispatch("table-destroy");this.rowManager.rows.forEach(function(e){e.wipe()});this.rowManager.rows=[];this.rowManager.activeRows=[];this.rowManager.displayRows=[];while(e.firstChild){e.removeChild(e.firstChild)}e.classList.remove("tabulator")}},{key:"_detectBrowser",value:function(){var e=navigator.userAgent||navigator.vendor||window.opera;if(-1<e.indexOf("Trident")){this.browser="ie";this.browserSlow=!0}else if(-1<e.indexOf("Edge")){this.browser="edge";this.browserSlow=!0}else if(-1<e.indexOf("Firefox")){this.browser="firefox";this.browserSlow=!1}else{this.browser="other";this.browserSlow=!1}this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}},{key:"blockRedraw",value:function(){return this.rowManager.blockRedraw()}},{key:"restoreRedraw",value:function(){return this.rowManager.restoreRedraw()}},{key:"setDataFromLocalFile",value:function(e){var t=this;return new Promise(function(l,o){var a=document.createElement("input");a.type="file";a.accept=e||".json,application/json";a.addEventListener("change",function(){var e=a.files[0],n=new FileReader,r;n.readAsText(e);n.onload=function(){try{r=JSON.parse(n.result)}catch(t){console.warn("File Load Error - File contents is invalid JSON",t);o(t);return}t.setData(r).then(function(e){l(e)})["catch"](function(e){l(e)})};n.onerror=function(){console.warn("File Load Error - Unable to read file");o()}});a.click()})}},{key:"setData",value:function(e,t,l){if(this.initialized){return this.dataLoader.load(e,t,l,!1)}else{console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}}},{key:"clearData",value:function(){this.dataLoader.blockActiveLoad();this.rowManager.clearData()}},{key:"getData",value:function(e){return this.rowManager.getData(e)}},{key:"getDataCount",value:function(e){return this.rowManager.getDataCount(e)}},{key:"replaceData",value:function(e,t,l){if(this.initialized){return this.dataLoader.load(e,t,l,!0,!0)}else{console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"updateData",value:function(e){var t=this,l=0;if(this.initialized){return new Promise(function(o,a){t.dataLoader.blockActiveLoad();if("string"==typeof e){e=JSON.parse(e)}if(e){e.forEach(function(e){var a=t.rowManager.findRow(e[t.options.index]);if(a){l++;a.updateData(e).then(function(){l--;if(!l){o()}})}})}else{console.warn("Update Error - No data provided");a("Update Error - No data provided")}})}else{console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"addData",value:function(e,t,l){var o=this;if(this.initialized){return new Promise(function(a,n){o.dataLoader.blockActiveLoad();if("string"==typeof e){e=JSON.parse(e)}if(e){o.rowManager.addRows(e,t,l).then(function(e){var t=[];e.forEach(function(e){t.push(e.getComponent())});a(t)})}else{console.warn("Update Error - No data provided");n("Update Error - No data provided")}})}else{console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"updateOrAddData",value:function(e){var t=this,l=[],o=0;if(this.initialized){return new Promise(function(a,n){t.dataLoader.blockActiveLoad();if("string"==typeof e){e=JSON.parse(e)}if(e){e.forEach(function(e){var n=t.rowManager.findRow(e[t.options.index]);o++;if(n){n.updateData(e).then(function(){o--;l.push(n.getComponent());if(!o){a(l)}})}else{t.rowManager.addRows(e).then(function(e){o--;l.push(e[0].getComponent());if(!o){a(l)}})}})}else{console.warn("Update Error - No data provided");n("Update Error - No data provided")}})}else{console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"getRow",value:function(e){var t=this.rowManager.findRow(e);if(t){return t.getComponent()}else{console.warn("Find Error - No matching row found:",e);return!1}}},{key:"getRowFromPosition",value:function(e,t){var l=this.rowManager.getRowFromPosition(e,t);if(l){return l.getComponent()}else{console.warn("Find Error - No matching row found:",e);return!1}}},{key:"deleteRow",value:function(e){var t=this,l=[];if(!Array.isArray(e)){e=[e]}var o=f(e),a;try{for(o.s();!(a=o.n()).done;){var n=a.value,r=this.rowManager.findRow(n,!0);if(r){l.push(r)}else{console.error("Delete Error - No matching row found:",n);return Promise.reject("Delete Error - No matching row found")}}}catch(e){o.e(e)}finally{o.f()}l.sort(function(e,l){return t.rowManager.rows.indexOf(e)>t.rowManager.rows.indexOf(l)?1:-1});l.forEach(function(e){e["delete"]()});this.rowManager.reRenderInPosition();return Promise.resolve()}},{key:"addRow",value:function(e,t,l){if(this.initialized){if("string"==typeof e){e=JSON.parse(e)}return this.rowManager.addRows(e,t,l).then(function(e){return e[0].getComponent()})}else{console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"updateOrAddRow",value:function(e,t){var l=this.rowManager.findRow(e);if("string"==typeof t){t=JSON.parse(t)}if(l){return l.updateData(t).then(function(){return l.getComponent()})}else{return this.rowManager.addRows(t).then(function(e){return e[0].getComponent()})}}},{key:"updateRow",value:function(e,t){var l=this.rowManager.findRow(e);if("string"==typeof t){t=JSON.parse(t)}if(l){return l.updateData(t).then(function(){resolve(l.getComponent())})}else{console.warn("Update Error - No matching row found:",e);return Promise.reject("Update Error - No matching row found")}}},{key:"scrollToRow",value:function(e,t,l){var o=this.rowManager.findRow(e);if(o){return this.rowManager.scrollToRow(o,t,l)}else{console.warn("Scroll Error - No matching row found:",e);return Promise.reject("Scroll Error - No matching row found")}}},{key:"moveRow",value:function(e,t,l){var o=this.rowManager.findRow(e);if(o){o.moveToRow(t,l)}else{console.warn("Move Error - No matching row found:",e)}}},{key:"getRows",value:function(e){if(this.initialized){return this.rowManager.getComponents(e)}else{console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"getRowPosition",value:function(e,t){var l=this.rowManager.findRow(e);if(l){return this.rowManager.getRowPosition(l,t)}else{console.warn("Position Error - No matching row found:",e);return!1}}},{key:"setColumns",value:function(e){if(this.initialized){this.columnManager.setColumns(e)}else{console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}}},{key:"getColumns",value:function(e){return this.columnManager.getComponents(e)}},{key:"getColumn",value:function(e){var t=this.columnManager.findColumn(e);if(t){return t.getComponent()}else{console.warn("Find Error - No matching column found:",e);return!1}}},{key:"getColumnDefinitions",value:function(){return this.columnManager.getDefinitionTree()}},{key:"showColumn",value:function(e){var t=this.columnManager.findColumn(e);if(t){t.show()}else{console.warn("Column Show Error - No matching column found:",e);return!1}}},{key:"hideColumn",value:function(e){var t=this.columnManager.findColumn(e);if(t){t.hide()}else{console.warn("Column Hide Error - No matching column found:",e);return!1}}},{key:"toggleColumn",value:function(e){var t=this.columnManager.findColumn(e);if(t){if(t.visible){t.hide()}else{t.show()}}else{console.warn("Column Visibility Toggle Error - No matching column found:",e);return!1}}},{key:"addColumn",value:function(e,t,l){var o=this.columnManager.findColumn(l);return this.columnManager.addColumn(e,t,o).then(function(e){return e.getComponent()})}},{key:"deleteColumn",value:function(e){var t=this.columnManager.findColumn(e);if(t){return t["delete"]()}else{console.warn("Column Delete Error - No matching column found:",e);return Promise.reject()}}},{key:"updateColumnDefinition",value:function(e,t){var l=this.columnManager.findColumn(e);if(l){return l.updateDefinition(t)}else{console.warn("Column Update Error - No matching column found:",e);return Promise.reject()}}},{key:"moveColumn",value:function(e,t,l){var o=this.columnManager.findColumn(e),a=this.columnManager.findColumn(t);if(o){if(a){this.columnManager.moveColumn(o,a,l)}else{console.warn("Move Error - No matching column found:",a)}}else{console.warn("Move Error - No matching column found:",e)}}},{key:"scrollToColumn",value:function(e,t,l){var o=this;return new Promise(function(){var a=o.columnManager.findColumn(e);if(a){return o.columnManager.scrollToColumn(a,t,l)}else{console.warn("Scroll Error - No matching column found:",e);return Promise.reject("Scroll Error - No matching column found")}})}},{key:"redraw",value:function(e){if(this.initialized){this.columnManager.redraw(e);this.rowManager.redraw(e)}else{console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}}},{key:"setHeight",value:function(e){this.options.height=isNaN(e)?e:e+"px";this.element.style.height=this.options.height;this.rowManager.initializeRenderer();this.rowManager.redraw()}},{key:"on",value:function(e,t){this.externalEvents.subscribe(e,t)}},{key:"off",value:function(e,t){this.externalEvents.unsubscribe(e,t)}},{key:"dispatchEvent",value:function(){var e,t=Array.from(arguments),l=t.shift();(e=this.externalEvents).dispatch.apply(e,arguments)}},{key:"modExists",value:function(e,t){if(this.modules[e]){return!0}else{if(t){console.error("Tabulator Module Not Installed: "+e)}return!1}}},{key:"module",value:function(e){var t=this.modules[e];if(!t){console.error("Tabulator module not installed: "+e)}return t}}]);return l}();ge.defaultOptions={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};new pe(ge);var be=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.allowedTypes=["","data","download","clipboard","print","htmlOutput"];l.registerColumnOption("accessor");l.registerColumnOption("accessorParams");l.registerColumnOption("accessorData");l.registerColumnOption("accessorDataParams");l.registerColumnOption("accessorDownload");l.registerColumnOption("accessorDownloadParams");l.registerColumnOption("accessorClipboard");l.registerColumnOption("accessorClipboardParams");l.registerColumnOption("accessorPrint");l.registerColumnOption("accessorPrintParams");l.registerColumnOption("accessorHtmlOutput");l.registerColumnOption("accessorHtmlOutputParams");return l}o(n,[{key:"initialize",value:function(){this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("row-data-retrieve",this.transformRow.bind(this))}},{key:"initializeColumn",value:function(e){var t=this,l=!1,o={};this.allowedTypes.forEach(function(a){var n="accessor"+(a.charAt(0).toUpperCase()+a.slice(1)),r;if(e.definition[n]){r=t.lookupAccessor(e.definition[n]);if(r){l=!0;o[n]={accessor:r,params:e.definition[n+"Params"]||{}}}}});if(l){e.modules.accessor=o}}},{key:"lookupAccessor",value:function(t){var l=!1;switch(e(t)){case"string":if(n.accessors[t]){l=n.accessors[t]}else{console.warn("Accessor Error - No such accessor found, ignoring: ",t)}break;case"function":l=t;break;}return l}},{key:"transformRow",value:function(e,t){var l="accessor"+(t.charAt(0).toUpperCase()+t.slice(1)),o=e.getComponent(),a=j.deepClone(e.data||{});this.table.columnManager.traverse(function(e){var n,r,s,d;if(e.modules.accessor){r=e.modules.accessor[l]||e.modules.accessor.accessor||!1;if(r){n=e.getFieldValue(a);if("undefined"!=n){d=e.getComponent();s="function"==typeof r.params?r.params(n,a,t,d,o):r.params;e.setFieldValue(a,r.accessor(n,a,t,s,d,o))}}}});return a}}]);return n}(se);be.moduleName="accessor";be.accessors={};function w(t,l){var o=[];l=l||"";if(Array.isArray(t)){t.forEach(function(e,t){o=o.concat(w(e,l?l+"["+t+"]":t))})}else if("object"===e(t)){for(var a in t){o=o.concat(w(t[a],l?l+"["+a+"]":a))}}else{o.push({key:l,value:t})}return o}function C(e){var t=w(e),l=[];t.forEach(function(e){l.push(encodeURIComponent(e.key)+"="+encodeURIComponent(e.value))});return l.join("&")}function E(t,l){var o=[];l=l||"";if(Array.isArray(t)){t.forEach(function(e,t){o=o.concat(E(e,l?l+"["+t+"]":t))})}else if("object"===e(t)){for(var a in t){o=o.concat(E(t[a],l?l+"["+a+"]":a))}}else{o.push({key:l,value:t})}return o}var he=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.config=!1;o.url="";o.urlGenerator=!1;o.params=!1;o.loaderPromise=!1;o.registerTableOption("ajaxURL",!1);o.registerTableOption("ajaxURLGenerator",!1);o.registerTableOption("ajaxParams",{});o.registerTableOption("ajaxConfig","get");o.registerTableOption("ajaxContentType","form");o.registerTableOption("ajaxRequestFunc",!1);o.registerTableOption("ajaxRequesting",function(){});o.registerTableOption("ajaxResponse",!1);o.contentTypeFormatters=l.contentTypeFormatters;return o}o(l,[{key:"initialize",value:function(){this.loaderPromise=this.table.options.ajaxRequestFunc||l.defaultLoaderPromise;this.urlGenerator=this.table.options.ajaxURLGenerator||l.defaultURLGenerator;if(this.table.options.ajaxParams){this.setParams(this.table.options.ajaxParams)}if(this.table.options.ajaxConfig){this.setConfig(this.table.options.ajaxConfig)}if(this.table.options.ajaxURL){this.setUrl(this.table.options.ajaxURL)}this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this));this.subscribe("data-loading",this.requestDataCheck.bind(this));this.subscribe("data-load",this.requestData.bind(this))}},{key:"requestDataCheck",value:function(e){return!!(!e&&this.url||"string"==typeof e)}},{key:"requestData",value:function(e,t,l,o,a){if(this.requestDataCheck(e)){if(e){this.setUrl(e)}if(t){this.setParams(t,!0)}if(l){this.setConfig(l)}return this.sendRequest()}else{return a}}},{key:"setParams",value:function(e,t){if(t){this.params=this.params||{};for(var l in e){this.params[l]=e[l]}}else{this.params=e}}},{key:"getParams",value:function(){return this.params||{}}},{key:"setConfig",value:function(e){this._loadDefaultConfig();if("string"==typeof e){this.config.method=e}else{for(var t in e){this.config[t]=e[t]}}}},{key:"_loadDefaultConfig",value:function(e){if(!this.config||e){this.config={};for(var t in l.defaultConfig){this.config[t]=l.defaultConfig[t]}}}},{key:"setUrl",value:function(e){this.url=e}},{key:"getUrl",value:function(){return this.url}},{key:"sendRequest",value:function(){var e=this,t=this.url;this._loadDefaultConfig();if(!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)){return this.loaderPromise(t,this.config,this.params).then(function(t){if(e.table.options.ajaxResponse){t=e.table.options.ajaxResponse.call(e.table,e.url,e.params,t)}return t})}else{return Promise.reject()}}}]);return l}(se);he.moduleName="ajax";he.defaultConfig={method:"GET"};he.defaultURLGenerator=function(e,t,l){if(e){if(l&&Object.keys(l).length){if(!t.method||"get"==t.method.toLowerCase()){t.method="get";e+=(e.includes("?")?"&":"?")+C(l)}}}return e};he.defaultLoaderPromise=function(t,l,o){var a=this,n;return new Promise(function(r,s){t=a.urlGenerator.call(a.table,t,l,o);if("GET"!=l.method.toUpperCase()){n="object"===e(a.table.options.ajaxContentType)?a.table.options.ajaxContentType:a.contentTypeFormatters[a.table.options.ajaxContentType];if(n){for(var d in n.headers){if(!l.headers){l.headers={}}if("undefined"==typeof l.headers[d]){l.headers[d]=n.headers[d]}}l.body=n.body.call(a,t,l,o)}else{console.warn("Ajax Error - Invalid ajaxContentType value:",a.table.options.ajaxContentType)}}if(t){if("undefined"==typeof l.headers){l.headers={}}if("undefined"==typeof l.headers.Accept){l.headers.Accept="application/json"}if("undefined"==typeof l.headers["X-Requested-With"]){l.headers["X-Requested-With"]="XMLHttpRequest"}if("undefined"==typeof l.mode){l.mode="cors"}if("cors"==l.mode){if("undefined"==typeof l.headers.Origin){l.headers.Origin=window.location.origin}if("undefined"==typeof l.credentials){l.credentials="same-origin"}}else{if("undefined"==typeof l.credentials){l.credentials="include"}}fetch(t,l).then(function(e){if(e.ok){e.json().then(function(e){r(e)})["catch"](function(e){s(e);console.warn("Ajax Load Error - Invalid JSON returned",e)})}else{console.error("Ajax Load Error - Connection Error: "+e.status,e.statusText);s(e)}})["catch"](function(e){console.error("Ajax Load Error - Connection Error: ",e);s(e)})}else{console.warn("Ajax Load Error - No URL Set");r([])}})};he.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(e,t,l){return JSON.stringify(l)}},form:{headers:{},body:function(e,t,l){var o=E(l),a=new FormData;o.forEach(function(e){a.append(e.key,e.value)});return a}}};var ve=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.mode=!0;l.pasteParser=function(){};l.pasteAction=function(){};l.customSelection=!1;l.rowRange=!1;l.blocked=!0;l.registerTableOption("clipboard",!1);l.registerTableOption("clipboardCopyStyled",!0);l.registerTableOption("clipboardCopyConfig",!1);l.registerTableOption("clipboardCopyFormatter",!1);l.registerTableOption("clipboardCopyRowRange","active");l.registerTableOption("clipboardPasteParser","table");l.registerTableOption("clipboardPasteAction","insert");l.registerColumnOption("clipboard");l.registerColumnOption("titleClipboard");return l}o(n,[{key:"initialize",value:function(){var t=this;this.mode=this.table.options.clipboard;this.rowRange=this.table.options.clipboardCopyRowRange;if(!0===this.mode||"copy"===this.mode){this.table.element.addEventListener("copy",function(l){var e,o,a;if(!t.blocked){l.preventDefault();if(t.customSelection){e=t.customSelection;if(t.table.options.clipboardCopyFormatter){e=t.table.options.clipboardCopyFormatter("plain",e)}}else{var a=t.table.modules["export"].generateExportList(t.table.options.clipboardCopyConfig,t.table.options.clipboardCopyStyled,t.rowRange,"clipboard");o=t.table.modules["export"].genereateHTMLTable(a);e=o?t.generatePlainContent(a):"";if(t.table.options.clipboardCopyFormatter){e=t.table.options.clipboardCopyFormatter("plain",e);o=t.table.options.clipboardCopyFormatter("html",o)}}if(window.clipboardData&&window.clipboardData.setData){window.clipboardData.setData("Text",e)}else if(l.clipboardData&&l.clipboardData.setData){l.clipboardData.setData("text/plain",e);if(o){l.clipboardData.setData("text/html",o)}}else if(l.originalEvent&&l.originalEvent.clipboardData.setData){l.originalEvent.clipboardData.setData("text/plain",e);if(o){l.originalEvent.clipboardData.setData("text/html",o)}}t.dispatchExternal("clipboardCopied",e,o);t.reset()}})}if(!0===this.mode||"paste"===this.mode){this.table.element.addEventListener("paste",function(l){t.paste(l)})}this.setPasteParser(this.table.options.clipboardPasteParser);this.setPasteAction(this.table.options.clipboardPasteAction);this.registerTableFunction("copyToClipboard",this.copy.bind(this))}},{key:"reset",value:function(){this.blocked=!0;this.customSelection=!1}},{key:"generatePlainContent",value:function(t){var l=[];t.forEach(function(t){var o=[];t.columns.forEach(function(l){var a="";if(l){if("group"===t.type){l.value=l.component.getKey()}if(null===l.value){a=""}else{switch(e(l.value)){case"object":a=JSON.stringify(l.value);break;case"undefined":a="";break;default:a=l.value;}}}o.push(a)});l.push(o.join("\t"))});return l.join("\n")}},{key:"copy",value:function(e,t){var e,l,o;this.blocked=!1;this.customSelection=!1;if(!0===this.mode||"copy"===this.mode){this.rowRange=e||this.table.options.clipboardCopyRowRange;if("undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){e=document.createRange();e.selectNodeContents(this.table.element);l=window.getSelection();if(l.toString()&&t){this.customSelection=l.toString()}l.removeAllRanges();l.addRange(e)}else if("undefined"!=typeof document.selection&&"undefined"!=typeof document.body.createTextRange){o=document.body.createTextRange();o.moveToElementText(this.table.element);o.select()}document.execCommand("copy");if(l){l.removeAllRanges()}}}},{key:"setPasteAction",value:function(t){switch(e(t)){case"string":this.pasteAction=n.pasteActions[t];if(!this.pasteAction){console.warn("Clipboard Error - No such paste action found:",t)}break;case"function":this.pasteAction=t;break;}}},{key:"setPasteParser",value:function(t){switch(e(t)){case"string":this.pasteParser=n.pasteParsers[t];if(!this.pasteParser){console.warn("Clipboard Error - No such paste parser found:",t)}break;case"function":this.pasteParser=t;break;}}},{key:"paste",value:function(t){var e,l,o;if(this.checkPaseOrigin(t)){e=this.getPasteData(t);l=this.pasteParser.call(this,e);if(l){t.preventDefault();if(this.table.modExists("mutator")){l=this.mutateData(l)}o=this.pasteAction.call(this,l);this.dispatchExternal("clipboardPasted",e,l,o)}else{this.dispatchExternal("clipboardPasteError",e)}}}},{key:"mutateData",value:function(e){var t=this,l=[];if(Array.isArray(e)){e.forEach(function(e){l.push(t.table.modules.mutator.transformRow(e,"clipboard"))})}else{l=e}return l}},{key:"checkPaseOrigin",value:function(t){var e=!0;if("DIV"!=t.target.tagName||this.table.modules.edit.currentCell){e=!1}return e}},{key:"getPasteData",value:function(t){var e;if(window.clipboardData&&window.clipboardData.getData){e=window.clipboardData.getData("Text")}else if(t.clipboardData&&t.clipboardData.getData){e=t.clipboardData.getData("text/plain")}else if(t.originalEvent&&t.originalEvent.clipboardData.getData){e=t.originalEvent.clipboardData.getData("text/plain")}return e}}]);return n}(se);ve.moduleName="clipboard";ve.pasteActions={replace:function(e){return this.table.setData(e)},update:function(e){return this.table.updateOrAddData(e)},insert:function(e){return this.table.addData(e)}};ve.pasteParsers={table:function(e){var t=[],l=!0,o=this.table.columnManager.columns,a=[],n=[];e=e.split("\n");e.forEach(function(e){t.push(e.split("\t"))});if(t.length&&!(1===t.length&&2>t[0].length)){t[0].forEach(function(e){var t=o.find(function(t){return e&&t.definition.title&&e.trim()&&t.definition.title.trim()===e.trim()});if(t){a.push(t)}else{l=!1}});if(!l){l=!0;a=[];t[0].forEach(function(e){var t=o.find(function(t){return e&&t.field&&e.trim()&&t.field.trim()===e.trim()});if(t){a.push(t)}else{l=!1}});if(!l){a=this.table.columnManager.columnsByIndex}}if(l){t.shift()}t.forEach(function(e){var t={};e.forEach(function(e,l){if(a[l]){t[a[l].field]=e}});n.push(t)});return n}else{return!1}}};var fe=function(){function e(l){t(this,e);this._row=l;return new Proxy(this,{get:function(e,t){if("undefined"!=typeof e[t]){return e[t]}else{return e._row.table.componentFunctionBinder.handle("row",e._row,t)}}})}o(e,[{key:"getData",value:function(e){return this._row.getData(e)}},{key:"getElement",value:function(){return this._row.getElement()}},{key:"getTable",value:function(){return this._row.table}},{key:"getCells",value:function(){var e=[];this._row.getCells().forEach(function(t){e.push(t.getComponent())});return e}},{key:"getCell",value:function(e){var t=this._row.getCell(e);return t?t.getComponent():!1}},{key:"_getSelf",value:function(){return this._row}}]);return e}(),ye=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.topCalcs=[];l.botCalcs=[];l.genColumn=!1;l.topElement=l.createElement();l.botElement=l.createElement();l.topRow=!1;l.botRow=!1;l.topInitialized=!1;l.botInitialized=!1;l.registerTableOption("columnCalcs",!0);l.registerColumnOption("topCalc");l.registerColumnOption("topCalcParams");l.registerColumnOption("topCalcFormatter");l.registerColumnOption("topCalcFormatterParams");l.registerColumnOption("bottomCalc");l.registerColumnOption("bottomCalcParams");l.registerColumnOption("bottomCalcFormatter");l.registerColumnOption("bottomCalcFormatterParams");return l}o(n,[{key:"createElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-calcs-holder");return e}},{key:"initialize",value:function(){this.genColumn=new G({field:"value"},this);this.subscribe("cell-value-changed",this.cellValueChanged.bind(this));this.subscribe("column-init",this.initializeColumnCheck.bind(this));this.subscribe("row-deleted",this.rowsUpdated.bind(this));this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this));this.subscribe("row-added",this.rowsUpdated.bind(this));this.subscribe("column-moved",this.recalcActiveRows.bind(this));this.subscribe("column-add",this.recalcActiveRows.bind(this));this.subscribe("data-refeshed",this.recalcActiveRows.bind(this));this.subscribe("table-redraw",this.tableRedraw.bind(this));this.registerTableFunction("getCalcResults",this.getResults.bind(this));this.registerTableFunction("recalc",this.userRecalc.bind(this))}},{key:"tableRedraw",value:function(e){this.recalc(this.table.rowManager.activeRows);if(e){this.redraw()}}},{key:"userRecalc",value:function(){this.recalc(this.table.rowManager.activeRows)}},{key:"rowsUpdated",value:function(){if(this.table.options.groupBy){this.recalcRowGroup(this)}else{this.recalcActiveRows()}}},{key:"recalcActiveRows",value:function(){this.recalc(this.table.rowManager.activeRows)}},{key:"cellValueChanged",value:function(e){if(e.column.definition.topCalc||e.column.definition.bottomCalc){if(this.table.options.groupBy){if("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs){this.recalcActiveRows()}if("table"!=this.table.options.columnCalcs){this.recalcRowGroup(e.row)}}else{this.recalcActiveRows()}}}},{key:"initializeColumnCheck",value:function(e){if(e.definition.topCalc||e.definition.bottomCalc){this.initializeColumn(e)}}},{key:"initializeColumn",value:function(t){var l=t.definition,o={topCalcParams:l.topCalcParams||{},botCalcParams:l.bottomCalcParams||{}};if(l.topCalc){switch(e(l.topCalc)){case"string":if(n.calculations[l.topCalc]){o.topCalc=n.calculations[l.topCalc]}else{console.warn("Column Calc Error - No such calculation found, ignoring: ",l.topCalc)}break;case"function":o.topCalc=l.topCalc;break;}if(o.topCalc){t.modules.columnCalcs=o;this.topCalcs.push(t);if("group"!=this.table.options.columnCalcs){this.initializeTopRow()}}}if(l.bottomCalc){switch(e(l.bottomCalc)){case"string":if(n.calculations[l.bottomCalc]){o.botCalc=n.calculations[l.bottomCalc]}else{console.warn("Column Calc Error - No such calculation found, ignoring: ",l.bottomCalc)}break;case"function":o.botCalc=l.bottomCalc;break;}if(o.botCalc){t.modules.columnCalcs=o;this.botCalcs.push(t);if("group"!=this.table.options.columnCalcs){this.initializeBottomRow()}}}}},{key:"registerColumnField",value:function(){}},{key:"removeCalcs",value:function(){var e=!1;if(this.topInitialized){this.topInitialized=!1;this.topElement.parentNode.removeChild(this.topElement);e=!0}if(this.botInitialized){this.botInitialized=!1;this.table.footerManager.remove(this.botElement);e=!0}if(e){this.table.rowManager.adjustTableSize()}}},{key:"initializeTopRow",value:function(){if(!this.topInitialized){this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling);this.topInitialized=!0}}},{key:"initializeBottomRow",value:function(){if(!this.botInitialized){this.table.footerManager.prepend(this.botElement);this.botInitialized=!0}}},{key:"scrollHorizontal",value:function(e){if(this.botInitialized&&this.botRow){this.botRow.getElement().style.marginLeft=-e+"px"}}},{key:"recalc",value:function(e){var t;if(this.topInitialized||this.botInitialized){this.rowsToData(e);if(this.topInitialized){if(this.topRow){this.topRow.deleteCells()}t=this.generateRow("top",this.rowsToData(e));this.topRow=t;while(this.topElement.firstChild){this.topElement.removeChild(this.topElement.firstChild)}this.topElement.appendChild(t.getElement());t.initialize(!0)}if(this.botInitialized){if(this.botRow){this.botRow.deleteCells()}t=this.generateRow("bottom",this.rowsToData(e));this.botRow=t;while(this.botElement.firstChild){this.botElement.removeChild(this.botElement.firstChild)}this.botElement.appendChild(t.getElement());t.initialize(!0)}this.table.rowManager.adjustTableSize();if(this.table.modExists("frozenColumns")){this.table.modules.frozenColumns.layout()}}}},{key:"recalcRowGroup",value:function(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}},{key:"recalcAll",value:function(){var e=this;if(this.topCalcs.length||this.botCalcs.length){if("group"!==this.table.options.columnCalcs){this.recalcActiveRows()}if(this.table.options.groupBy&&"table"!==this.table.options.columnCalcs){var t=this.table.modules.groupRows.getChildGroups();t.forEach(function(t){e.recalcGroup(t)})}}}},{key:"recalcGroup",value:function(e){var t,l;if(e){if(e.calcs){if(e.calcs.bottom){t=this.rowsToData(e.rows);l=this.generateRowData("bottom",t);e.calcs.bottom.updateData(l);e.calcs.bottom.reinitialize()}if(e.calcs.top){t=this.rowsToData(e.rows);l=this.generateRowData("top",t);e.calcs.top.updateData(l);e.calcs.top.reinitialize()}}}}},{key:"generateTopRow",value:function(e){return this.generateRow("top",this.rowsToData(e))}},{key:"generateBottomRow",value:function(e){return this.generateRow("bottom",this.rowsToData(e))}},{key:"rowsToData",value:function(e){var t=this,l=[];e.forEach(function(e){l.push(e.getData());if(t.table.options.dataTree&&t.table.options.dataTreeChildColumnCalcs){if(e.modules.dataTree.open){var o=t.rowsToData(t.table.modules.dataTree.getFilteredTreeChildren(e));l=l.concat(o)}}});return l}},{key:"generateRow",value:function(e,t){var l=this,o=this.generateRowData(e,t),a;if(this.table.modExists("mutator")){this.table.modules.mutator.disable()}a=new $(o,this,"calc");if(this.table.modExists("mutator")){this.table.modules.mutator.enable()}a.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e);a.component=!1;a.getComponent=function(){if(!a.component){a.component=new fe(l)}return a.component};a.generateCells=function(){var t=[];l.table.columnManager.columnsByIndex.forEach(function(o){l.genColumn.setField(o.getField());l.genColumn.hozAlign=o.hozAlign;if(o.definition[e+"CalcFormatter"]&&l.table.modExists("format")){l.genColumn.modules.format={formatter:l.table.modules.format.getFormatter(o.definition[e+"CalcFormatter"]),params:o.definition[e+"CalcFormatterParams"]||{}}}else{l.genColumn.modules.format={formatter:l.table.modules.format.getFormatter("plaintext"),params:{}}}l.genColumn.definition.cssClass=o.definition.cssClass;var n=new W(l.genColumn,a);n.getElement();n.column=o;n.setWidth();o.cells.push(n);t.push(n);if(!o.visible){n.hide()}});a.cells=t};return a}},{key:"generateRowData",value:function(e,t){var l={},o="top"==e?this.topCalcs:this.botCalcs,a="top"==e?"topCalc":"botCalc",n,r;o.forEach(function(e){var o=[];if(e.modules.columnCalcs&&e.modules.columnCalcs[a]){t.forEach(function(t){o.push(e.getFieldValue(t))});r=a+"Params";n="function"==typeof e.modules.columnCalcs[r]?e.modules.columnCalcs[r](o,t):e.modules.columnCalcs[r];e.setFieldValue(l,e.modules.columnCalcs[a](o,t,n))}});return l}},{key:"hasTopCalcs",value:function(){return!!this.topCalcs.length}},{key:"hasBottomCalcs",value:function(){return!!this.botCalcs.length}},{key:"redraw",value:function(){if(this.topRow){this.topRow.normalizeHeight(!0)}if(this.botRow){this.botRow.normalizeHeight(!0)}}},{key:"getResults",value:function(){var e=this,t={},l;if(this.table.options.groupBy&&this.table.modExists("groupRows")){l=this.table.modules.groupRows.getGroups(!0);l.forEach(function(l){t[l.getKey()]=e.getGroupResults(l)})}else{t={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}}}return t}},{key:"getGroupResults",value:function(e){var t=this,l=e._getSelf(),o=e.getSubGroups(),a={},n={};o.forEach(function(e){a[e.getKey()]=t.getGroupResults(e)});n={top:l.calcs.top?l.calcs.top.getData():{},bottom:l.calcs.bottom?l.calcs.bottom.getData():{},groups:a};return n}}]);return n}(se);ye.moduleName="columnCalcs";ye.calculations={avg:function(e,t,l){var o=0,a="undefined"!=typeof l.precision?l.precision:2;if(e.length){o=e.reduce(function(e,t){return+e+ +t});o=o/e.length;o=!1!==a?o.toFixed(a):o}return parseFloat(o).toString()},max:function(e,t,l){var o=null,a="undefined"!=typeof l.precision?l.precision:!1;e.forEach(function(e){e=+e;if(e>o||null===o){o=e}});return null!==o?!1!==a?o.toFixed(a):o:""},min:function(e,t,l){var o=null,a="undefined"!=typeof l.precision?l.precision:!1;e.forEach(function(e){e=+e;if(e<o||null===o){o=e}});return null!==o?!1!==a?o.toFixed(a):o:""},sum:function(e,t,l){var o=0,a="undefined"!=typeof l.precision?l.precision:!1;if(e.length){e.forEach(function(e){e=+e;o+=!isNaN(e)?+e:0})}return!1!==a?o.toFixed(a):o},concat:function(e){var t=0;if(e.length){t=e.reduce(function(e,t){return e+""+(t+"")})}return t},count:function(e){var t=0;if(e.length){e.forEach(function(e){if(e){t++}})}return t}};var we=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.indent=10;l.field="";l.collapseEl=null;l.expandEl=null;l.branchEl=null;l.elementField=!1;l.startOpen=function(){};l.displayIndex=0;l.registerTableOption("dataTree",!1);l.registerTableOption("dataTreeFilter",!0);l.registerTableOption("dataTreeSort",!0);l.registerTableOption("dataTreeElementColumn",!1);l.registerTableOption("dataTreeBranchElement",!0);l.registerTableOption("dataTreeChildIndent",9);l.registerTableOption("dataTreeChildField","_children");l.registerTableOption("dataTreeCollapseElement",!1);l.registerTableOption("dataTreeExpandElement",!1);l.registerTableOption("dataTreeStartExpanded",!1);l.registerTableOption("dataTreeChildColumnCalcs",!1);l.registerTableOption("dataTreeSelectPropagate",!1);l.registerComponentFunction("row","treeCollapse",l.collapseRow.bind(d(l)));l.registerComponentFunction("row","treeExpand",l.expandRow.bind(d(l)));l.registerComponentFunction("row","treeToggle",l.toggleRow.bind(d(l)));l.registerComponentFunction("row","getTreeParent",l.getTreeParent.bind(d(l)));l.registerComponentFunction("row","getTreeChildren",l.getRowChildren.bind(d(l)));l.registerComponentFunction("row","addTreeChild",l.addTreeChildRow.bind(d(l)));return l}o(n,[{key:"initialize",value:function(){if(this.table.options.dataTree){var t=null,l=this.table.columnManager.getFirstVisibileColumn(),o=this.table.options;this.field=o.dataTreeChildField;this.indent=o.dataTreeChildIndent;this.elementField=o.dataTreeElementColumn||(l?l.field:!1);if(o.dataTreeBranchElement){if(!0===o.dataTreeBranchElement){this.branchEl=document.createElement("div");this.branchEl.classList.add("tabulator-data-tree-branch")}else{if("string"==typeof o.dataTreeBranchElement){t=document.createElement("div");t.innerHTML=o.dataTreeBranchElement;this.branchEl=t.firstChild}else{this.branchEl=o.dataTreeBranchElement}}}if(o.dataTreeCollapseElement){if("string"==typeof o.dataTreeCollapseElement){t=document.createElement("div");t.innerHTML=o.dataTreeCollapseElement;this.collapseEl=t.firstChild}else{this.collapseEl=o.dataTreeCollapseElement}}else{this.collapseEl=document.createElement("div");this.collapseEl.classList.add("tabulator-data-tree-control");this.collapseEl.tabIndex=0;this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"}if(o.dataTreeExpandElement){if("string"==typeof o.dataTreeExpandElement){t=document.createElement("div");t.innerHTML=o.dataTreeExpandElement;this.expandEl=t.firstChild}else{this.expandEl=o.dataTreeExpandElement}}else{this.expandEl=document.createElement("div");this.expandEl.classList.add("tabulator-data-tree-control");this.expandEl.tabIndex=0;this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"}switch(e(o.dataTreeStartExpanded)){case"boolean":this.startOpen=function(){return o.dataTreeStartExpanded};break;case"function":this.startOpen=o.dataTreeStartExpanded;break;default:this.startOpen=function(e,t){return o.dataTreeStartExpanded[t]};break;}this.subscribe("row-init",this.initializeRow.bind(this));this.subscribe("row-layout-after",this.layoutRow.bind(this));this.subscribe("row-relayout",this.layoutRow.bind(this));this.subscribe("row-deleted",this.rowDelete.bind(this),0);this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10);this.subscribe("column-moving-rows",this.columnMoving.bind(this));this.registerDisplayHandler(this.getRows.bind(this),30)}}},{key:"getRowChildren",value:function(e){return this.getTreeChildren(e,!0)}},{key:"columnMoving",value:function(){var e=this,t=[];this.table.rowManager.rows.forEach(function(l){t=t.concat(e.getTreeChildren(l,!1,!0))});return t}},{key:"rowDataChanged",value:function(e,t,l){if(this.redrawNeeded(l)){this.initializeRow(e);if(t){this.layoutRow(e);this.refreshData(!0)}}}},{key:"initializeRow",value:function(t){var l=t.getData()[this.field],o=Array.isArray(l),a=o||!o&&"object"===e(l)&&null!==l;if(!a&&t.modules.dataTree&&t.modules.dataTree.branchEl){t.modules.dataTree.branchEl.parentNode.removeChild(t.modules.dataTree.branchEl)}if(!a&&t.modules.dataTree&&t.modules.dataTree.controlEl){t.modules.dataTree.controlEl.parentNode.removeChild(t.modules.dataTree.controlEl)}t.modules.dataTree={index:t.modules.dataTree?t.modules.dataTree.index:0,open:a?t.modules.dataTree?t.modules.dataTree.open:this.startOpen(t.getComponent(),0):!1,controlEl:t.modules.dataTree&&a?t.modules.dataTree.controlEl:!1,branchEl:t.modules.dataTree&&a?t.modules.dataTree.branchEl:!1,parent:t.modules.dataTree?t.modules.dataTree.parent:!1,children:a}}},{key:"reinitializeRowChildren",value:function(e){var t=this.getTreeChildren(e,!1,!0);t.forEach(function(e){e.reinitialize(!0)})}},{key:"layoutRow",value:function(e){var t=this.elementField?e.getCell(this.elementField):e.getCells()[0],l=t.getElement(),o=e.modules.dataTree;if(o.branchEl){if(o.branchEl.parentNode){o.branchEl.parentNode.removeChild(o.branchEl)}o.branchEl=!1}if(o.controlEl){if(o.controlEl.parentNode){o.controlEl.parentNode.removeChild(o.controlEl)}o.controlEl=!1}this.generateControlElement(e,l);e.getElement().classList.add("tabulator-tree-level-"+o.index);if(o.index){if(this.branchEl){o.branchEl=this.branchEl.cloneNode(!0);l.insertBefore(o.branchEl,l.firstChild);if(this.table.rtl){o.branchEl.style.marginRight=(o.branchEl.offsetWidth+o.branchEl.style.marginLeft)*(o.index-1)+o.index*this.indent+"px"}else{o.branchEl.style.marginLeft=(o.branchEl.offsetWidth+o.branchEl.style.marginRight)*(o.index-1)+o.index*this.indent+"px"}}else{if(this.table.rtl){l.style.paddingRight=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-right"))+o.index*this.indent+"px"}else{l.style.paddingLeft=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-left"))+o.index*this.indent+"px"}}}}},{key:"generateControlElement",value:function(t,l){var o=this,a=t.modules.dataTree,l=l||t.getCells()[0].getElement(),n=a.controlEl;if(!1!==a.children){if(a.open){a.controlEl=this.collapseEl.cloneNode(!0);a.controlEl.addEventListener("click",function(l){l.stopPropagation();o.collapseRow(t)})}else{a.controlEl=this.expandEl.cloneNode(!0);a.controlEl.addEventListener("click",function(l){l.stopPropagation();o.expandRow(t)})}a.controlEl.addEventListener("mousedown",function(t){t.stopPropagation()});if(n&&n.parentNode===l){n.parentNode.replaceChild(a.controlEl,n)}else{l.insertBefore(a.controlEl,l.firstChild)}}}},{key:"setDisplayIndex",value:function(e){this.displayIndex=e}},{key:"getDisplayIndex",value:function(){return this.displayIndex}},{key:"getRows",value:function(e){var t=this,l=[];e.forEach(function(e){var o,a;l.push(e);if(e instanceof $){e.create();o=e.modules.dataTree.children;if(!o.index&&!1!==o.children){a=t.getChildren(e);a.forEach(function(e){e.create();l.push(e)})}}});return l}},{key:"getChildren",value:function(e,t){var l=this,o=e.modules.dataTree,a=[],n=[];if(!1!==o.children&&(o.open||t)){if(!Array.isArray(o.children)){o.children=this.generateChildren(e)}if(this.table.modExists("filter")&&this.table.options.dataTreeFilter){a=this.table.modules.filter.filter(o.children)}else{a=o.children}if(this.table.modExists("sort")&&this.table.options.dataTreeSort){this.table.modules.sort.sort(a)}a.forEach(function(e){n.push(e);var t=l.getChildren(e);t.forEach(function(e){n.push(e)})})}return n}},{key:"generateChildren",value:function(e){var t=this,l=[],o=e.getData()[this.field];if(!Array.isArray(o)){o=[o]}o.forEach(function(o){var a=new $(o||{},t.table.rowManager);a.create();a.modules.dataTree.index=e.modules.dataTree.index+1;a.modules.dataTree.parent=e;if(a.modules.dataTree.children){a.modules.dataTree.open=t.startOpen(a.getComponent(),a.modules.dataTree.index)}l.push(a)});return l}},{key:"expandRow",value:function(e){var t=e.modules.dataTree;if(!1!==t.children){t.open=!0;e.reinitialize();this.refreshData(!0);this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index)}}},{key:"collapseRow",value:function(e){var t=e.modules.dataTree;if(!1!==t.children){t.open=!1;e.reinitialize();this.refreshData(!0);this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index)}}},{key:"toggleRow",value:function(e){var t=e.modules.dataTree;if(!1!==t.children){if(t.open){this.collapseRow(e)}else{this.expandRow(e)}}}},{key:"getTreeParent",value:function(e){return e.modules.dataTree.parent?e.modules.dataTree.parent.getComponent():!1}},{key:"getFilteredTreeChildren",value:function(e){var t=e.modules.dataTree,l=[],o;if(t.children){if(!Array.isArray(t.children)){t.children=this.generateChildren(e)}if(this.table.modExists("filter")&&this.table.options.dataTreeFilter){o=this.table.modules.filter.filter(t.children)}else{o=t.children}o.forEach(function(e){if(e instanceof $){l.push(e)}})}return l}},{key:"rowDelete",value:function(e){var t=e.modules.dataTree.parent,l;if(t){l=this.findChildIndex(e,t);if(!1!==l){t.data[this.field].splice(l,1)}if(!t.data[this.field].length){delete t.data[this.field]}this.initializeRow(t);this.layoutRow(t)}this.refreshData(!0)}},{key:"addTreeChildRow",value:function(e,t,l,o){var a=!1;if("string"==typeof t){t=JSON.parse(t)}if(!Array.isArray(e.data[this.field])){e.data[this.field]=[];e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)}if("undefined"!=typeof o){a=this.findChildIndex(o,e);if(!1!==a){e.data[this.field].splice(l?a:a+1,0,t)}}if(!1===a){if(l){e.data[this.field].unshift(t)}else{e.data[this.field].push(t)}}this.initializeRow(e);this.layoutRow(e);this.refreshData(!0)}},{key:"findChildIndex",value:function(t,l){var o=this,a=!1;if("object"==e(t)){if(t instanceof $){a=t.data}else if(t instanceof RowComponent){a=t._getSelf().data}else if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement){if(l.modules.dataTree){a=l.modules.dataTree.children.find(function(e){return e instanceof $?e.element===t:!1});if(a){a=a.data}}}}else if("undefined"==typeof t||null===t){a=!1}else{a=l.data[this.field].find(function(e){return e.data[o.table.options.index]==t})}if(a){if(Array.isArray(l.data[this.field])){a=l.data[this.field].indexOf(a)}if(-1==a){a=!1}}return a}},{key:"getTreeChildren",value:function(e,t,l){var o=this,a=e.modules.dataTree,n=[];if(a.children){if(!Array.isArray(a.children)){a.children=this.generateChildren(e)}a.children.forEach(function(e){if(e instanceof $){n.push(t?e.getComponent():e);if(l){n=n.concat(o.getTreeChildren(e,t,l))}}})}return n}},{key:"checkForRestyle",value:function(e){if(!e.row.cells.indexOf(e)){this.layoutRow(e.row)}}},{key:"getChildField",value:function(){return this.field}},{key:"redrawNeeded",value:function(e){return(this.field?"undefined"!=typeof e[this.field]:!1)||(this.elementField?"undefined"!=typeof e[this.elementField]:!1)}}]);return n}(se);we.moduleName="dataTree";var Ce=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.registerTableOption("downloadReady",function(e,t){return t});o.registerTableOption("downloadConfig",{});o.registerTableOption("downloadRowRange","active");o.registerColumnOption("download");o.registerColumnOption("titleDownload");return o}o(l,[{key:"initialize",value:function(){this.registerTableFunction("download",this.download.bind(this));this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}},{key:"downloadToTab",value:function(e,t,l,o){this.download(e,t,l,o,!0)}},{key:"download",value:function(e,t,o,a,n){var s=!1;function r(l,o){if(n){if(!0===n){this.triggerDownload(l,o,e,t,!0)}else{n(l)}}else{this.triggerDownload(l,o,e,t)}}if("function"==typeof e){s=e}else{if(l.downloaders[e]){s=l.downloaders[e]}else{console.warn("Download Error - No such download type found: ",e)}}if(s){var d=this.generateExportList(a);s.call(this.table,d,o||{},r.bind(this))}}},{key:"generateExportList",value:function(e){var t=this.table.modules["export"].generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),l=this.table.options.groupHeaderDownload;if(l&&!Array.isArray(l)){l=[l]}t.forEach(function(e){var t;if("group"===e.type){t=e.columns[0];if(l&&l[e.indent]){t.value=l[e.indent](t.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)}}});return t}},{key:"triggerDownload",value:function(e,t,l,o,a){var n=document.createElement("a"),r=new Blob([e],{type:t}),o=o||"Tabulator."+("function"==typeof l?"txt":l);r=this.table.options.downloadReady(e,r);if(r){if(a){window.open(window.URL.createObjectURL(r))}else{if(navigator.msSaveOrOpenBlob){navigator.msSaveOrOpenBlob(r,o)}else{n.setAttribute("href",window.URL.createObjectURL(r));n.setAttribute("download",o);n.style.display="none";document.body.appendChild(n);n.click();document.body.removeChild(n)}}this.dispatchExternal("downloadComplete")}}},{key:"commsReceived",value:function(e,t,l){switch(t){case"intercept":this.download(l.type,"",l.options,l.active,l.intercept);break;}}}]);return l}(se);Ce.moduleName="download";Ce.downloaders={csv:function(t,l,o){var a=l&&l.delimiter?l.delimiter:",",n=[],r=[];t.forEach(function(t){var l=[];switch(t.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":t.columns.forEach(function(e,t){if(e&&1===e.depth){r[t]="undefined"==typeof e.value||null===e.value?"":"\""+(e.value+"").split("\"").join("\"\"")+"\""}});break;case"row":t.columns.forEach(function(t){if(t){switch(e(t.value)){case"object":t.value=JSON.stringify(t.value);break;case"undefined":case"null":t.value="";break;}l.push("\""+(t.value+"").split("\"").join("\"\"")+"\"")}});n.push(l.join(a));break;}});if(r.length){n.unshift(r.join(a))}n=n.join("\n");if(l.bom){n="\uFEFF"+n}o(n,"text/csv")},json:function(e,t,l){var o=[];e.forEach(function(e){var t={};switch(e.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":e.columns.forEach(function(e){if(e){t[e.component.getField()]=e.value}});o.push(t);break;}});o=JSON.stringify(o,null,"\t");l(o,"application/json")},pdf:function(t,l,o){var n=[],r=[],s={},d=l.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},u=l.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},c=l.jsPDF||{},m=l&&l.title?l.title:"";if(!c.orientation){c.orientation=l.orientation||"landscape"}if(!c.unit){c.unit="pt"}t.forEach(function(e){switch(e.type){case"header":n.push(a(e));break;case"group":r.push(a(e,d));break;case"calc":r.push(a(e,u));break;case"row":r.push(a(e));break;}});function a(t,l){var o=[];t.columns.forEach(function(t){var a;if(t){switch(e(t.value)){case"object":t.value=JSON.stringify(t.value);break;case"undefined":case"null":t.value="";break;}a={content:t.value,colSpan:t.width,rowSpan:t.height};if(l){a.styles=l}o.push(a)}else{o.push("")}});return o}var p=new jspdf.jsPDF(c);if(l&&l.autoTable){if("function"==typeof l.autoTable){s=l.autoTable(p)||{}}else{s=l.autoTable}}if(m){s.didDrawPage=function(){p.text(m,40,30)}}s.head=n;s.body=r;p.autoTable(s);if(l&&l.documentProcessing){l.documentProcessing(p)}o(p.output("arraybuffer"),"application/pdf")},xlsx:function(t,l,o){var n=this,r=l.sheetName||"Sheet1",s=XLSX.utils.book_new(),d=new V(this),u;s.SheetNames=[];s.Sheets={};function a(){var l=[],o=[],a={},n={s:{c:0,r:0},e:{c:t[0]?t[0].columns.reduce(function(e,t){return e+(t&&t.width?t.width:1)},0):0,r:t.length}};t.forEach(function(t,a){var n=[];t.columns.forEach(function(t,l){if(t){n.push(!(t.value instanceof Date)&&"object"===e(t.value)?JSON.stringify(t.value):t.value);if(1<t.width||-1<t.height){o.push({s:{r:a,c:l},e:{r:a+t.height-1,c:l+t.width-1}})}}else{n.push("")}});l.push(n)});XLSX.utils.sheet_add_aoa(a,l);a["!ref"]=XLSX.utils.encode_range(n);if(o.length){a["!merges"]=o}return a}if(l.sheetOnly){o(a());return}if(l.sheets){for(var c in l.sheets){if(!0===l.sheets[c]){s.SheetNames.push(c);s.Sheets[c]=a()}else{s.SheetNames.push(c);d.commsSend(l.sheets[c],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:n.active,intercept:function(e){s.Sheets[c]=e}})}}}else{s.SheetNames.push(r);s.Sheets[r]=a()}if(l.documentProcessing){s=l.documentProcessing(s)}u=XLSX.write(s,{bookType:"xlsx",bookSST:!0,type:"binary"});o(function(e){for(var t=new ArrayBuffer(e.length),l=new Uint8Array(t),o=0;o!=e.length;++o){l[o]=255&e.charCodeAt(o)}return t}(u),"application/octet-stream")},html:function(e,t,l){if(this.modExists("export",!0)){l(this.modules["export"].genereateHTMLTable(e),"text/html")}}};function k(t,e){var o=e.mask,a="undefined"!=typeof e.maskLetterChar?e.maskLetterChar:"A",n="undefined"!=typeof e.maskNumberChar?e.maskNumberChar:"9",r="undefined"!=typeof e.maskWildcardChar?e.maskWildcardChar:"*";function l(e){var s=o[e];if("undefined"!=typeof s&&s!==r&&s!==a&&s!==n){t.value=t.value+""+s;l(e+1)}}t.addEventListener("keydown",function(l){var e=t.value.length,s=l.key;if(46<l.keyCode){if(e>=o.length){l.preventDefault();l.stopPropagation();return!1}else{switch(o[e]){case a:if(s.toUpperCase()==s.toLowerCase()){l.preventDefault();l.stopPropagation();return!1}break;case n:if(isNaN(s)){l.preventDefault();l.stopPropagation();return!1}break;case r:break;default:if(s!==o[e]){l.preventDefault();l.stopPropagation();return!1}}}}});t.addEventListener("keyup",function(o){if(46<o.keyCode){if(e.maskAutoFill){l(t.value.length)}}});if(!t.placeholder){t.placeholder=o}if(e.maskAutoFill){l(t.value.length)}}function R(t,l,o,a,n){var s=t.getValue(),d=document.createElement("input");d.setAttribute("type",n.search?"search":"text");d.style.padding="4px";d.style.width="100%";d.style.boxSizing="border-box";if(n.elementAttributes&&"object"==e(n.elementAttributes)){for(var u in n.elementAttributes){if("+"==u.charAt(0)){u=u.slice(1);d.setAttribute(u,d.getAttribute(u)+n.elementAttributes["+"+u])}else{d.setAttribute(u,n.elementAttributes[u])}}}d.value="undefined"!=typeof s?s:"";l(function(){d.focus({preventScroll:!0});d.style.height="100%"});function r(){if((null===s||"undefined"==typeof s)&&""!==d.value||d.value!==s){if(o(d.value)){s=d.value}}else{a()}}d.addEventListener("change",r);d.addEventListener("blur",r);d.addEventListener("keydown",function(t){switch(t.keyCode){case 13:r();break;case 27:a();break;case 35:case 36:t.stopPropagation();break;}});if(n.mask){k(d,n)}return d}function x(t,l,o,a,n){var s=t.getValue(),d=n.verticalNavigation||"hybrid",u=(null!==s&&"undefined"!=typeof s?s:"")+"",c=(u.match(/(?:\r\n|\r|\n)/g)||[]).length+1,m=document.createElement("textarea"),p=0;m.style.display="block";m.style.padding="2px";m.style.height="100%";m.style.width="100%";m.style.boxSizing="border-box";m.style.whiteSpace="pre-wrap";m.style.resize="none";if(n.elementAttributes&&"object"==e(n.elementAttributes)){for(var g in n.elementAttributes){if("+"==g.charAt(0)){g=g.slice(1);m.setAttribute(g,m.getAttribute(g)+n.elementAttributes["+"+g])}else{m.setAttribute(g,n.elementAttributes[g])}}}m.value=u;l(function(){m.focus({preventScroll:!0});m.style.height="100%";m.scrollHeight;m.style.height=m.scrollHeight+"px";t.getRow().normalizeHeight()});function r(){if((null===s||"undefined"==typeof s)&&""!==m.value||m.value!==s){if(o(m.value)){s=m.value}setTimeout(function(){t.getRow().normalizeHeight()},300)}else{a()}}m.addEventListener("change",r);m.addEventListener("blur",r);m.addEventListener("keyup",function(){m.style.height="";var e=m.scrollHeight;m.style.height=e+"px";if(e!=p){p=e;t.getRow().normalizeHeight()}});m.addEventListener("keydown",function(t){switch(t.keyCode){case 27:a();break;case 38:if("editor"==d||"hybrid"==d&&m.selectionStart){t.stopImmediatePropagation();t.stopPropagation()}break;case 40:if("editor"==d||"hybrid"==d&&m.selectionStart!==m.value.length){t.stopImmediatePropagation();t.stopPropagation()}break;case 35:case 36:t.stopPropagation();break;}});if(n.mask){k(m,n)}return m}function T(t,l,o,a,n){var s=t.getValue(),d=n.verticalNavigation||"editor",u=document.createElement("input");u.setAttribute("type","number");if("undefined"!=typeof n.max){u.setAttribute("max",n.max)}if("undefined"!=typeof n.min){u.setAttribute("min",n.min)}if("undefined"!=typeof n.step){u.setAttribute("step",n.step)}u.style.padding="4px";u.style.width="100%";u.style.boxSizing="border-box";if(n.elementAttributes&&"object"==e(n.elementAttributes)){for(var c in n.elementAttributes){if("+"==c.charAt(0)){c=c.slice(1);u.setAttribute(c,u.getAttribute(c)+n.elementAttributes["+"+c])}else{u.setAttribute(c,n.elementAttributes[c])}}}u.value=s;var m=function(){r()};l(function(){u.removeEventListener("blur",m);u.focus({preventScroll:!0});u.style.height="100%";u.addEventListener("blur",m)});function r(){var e=u.value;if(!isNaN(e)&&""!==e){e=+e}if(e!==s){if(o(e)){s=e}}else{a()}}u.addEventListener("keydown",function(t){switch(t.keyCode){case 13:r();break;case 27:a();break;case 38:case 40:if("editor"==d){t.stopImmediatePropagation();t.stopPropagation()}break;case 35:case 36:t.stopPropagation();break;}});if(n.mask){k(u,n)}return u}function M(t,l,o,a,n){var s=t.getValue(),d=document.createElement("input");d.setAttribute("type","range");if("undefined"!=typeof n.max){d.setAttribute("max",n.max)}if("undefined"!=typeof n.min){d.setAttribute("min",n.min)}if("undefined"!=typeof n.step){d.setAttribute("step",n.step)}d.style.padding="4px";d.style.width="100%";d.style.boxSizing="border-box";if(n.elementAttributes&&"object"==e(n.elementAttributes)){for(var u in n.elementAttributes){if("+"==u.charAt(0)){u=u.slice(1);d.setAttribute(u,d.getAttribute(u)+n.elementAttributes["+"+u])}else{d.setAttribute(u,n.elementAttributes[u])}}}d.value=s;l(function(){d.focus({preventScroll:!0});d.style.height="100%"});function r(){var e=d.value;if(!isNaN(e)&&""!==e){e=+e}if(e!=s){if(o(e)){s=e}}else{a()}}d.addEventListener("blur",function(){r()});d.addEventListener("keydown",function(t){switch(t.keyCode){case 13:r();break;case 27:a();break;}});return d}function L(t,l,o,a,n){var k=this,R=this,x=t.getElement(),T=t.getValue(),M=n.verticalNavigation||"editor",L="undefined"!=typeof T||null===T?Array.isArray(T)?T:[T]:"undefined"!=typeof n.defaultValue?n.defaultValue:[],D=document.createElement("input"),F=document.createElement("div"),S=n.multiselect,H=[],z={},P=[],A=[],_=!0,O=!1,B="",V=null;if(Array.isArray(n)||!Array.isArray(n)&&"object"===e(n)&&!n.values){console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object");n={values:n}}function r(e){var l={},o=R.table.getData(),a;if(e){a=R.table.columnManager.getColumnByField(e)}else{a=t.getColumn()._getSelf()}if(a){o.forEach(function(e){var t=a.getFieldValue(e);if(null!==t&&"undefined"!=typeof t&&""!==t){l[t]=!0}})}else{console.warn("unable to find matching column to create select lookup list:",e)}return Object.keys(l)}function s(l,o){var r=[],s=[];function a(e){var e={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1};if(-1<o.indexOf(e.value)){c(e)}r.push(e);s.push(e);return e}if("function"==typeof l){l=l(t)}if(Array.isArray(l)){l.forEach(function(t){var l;if("object"===e(t)){if(t.options){l={label:t.label,group:!0,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1};s.push(l);t.options.forEach(function(e){a(e)})}else{a(t)}}else{l={label:t,value:t,element:!1};if(-1<o.indexOf(l.value)){c(l)}r.push(l);s.push(l)}})}else{for(var u in l){var m={label:l[u],value:u,element:!1};if(-1<o.indexOf(m.value)){c(m)}r.push(m);s.push(m)}}if(n.sortValuesList){r.sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0});s.sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0});if("asc"!==n.sortValuesList){r.reverse();s.reverse()}}H=r;P=s;d()}function d(){while(F.firstChild){F.removeChild(F.firstChild)}P.forEach(function(l){var o=l.element;if(!o){o=document.createElement("div");l.label=n.listItemFormatter?n.listItemFormatter(l.value,l.label,t,o,l.itemParams):l.label;if(l.group){o.classList.add("tabulator-edit-select-list-group");o.tabIndex=0;o.innerHTML=""===l.label?"&nbsp;":l.label}else{o.classList.add("tabulator-edit-select-list-item");o.tabIndex=0;o.innerHTML=""===l.label?"&nbsp;":l.label;o.addEventListener("click",function(){O=!0;setTimeout(function(){O=!1},10);if(S){p(l);D.focus()}else{g(l)}});if(-1<A.indexOf(l)){o.classList.add("active")}}if(l.elementAttributes&&"object"==e(l.elementAttributes)){for(var a in l.elementAttributes){if("+"==a.charAt(0)){a=a.slice(1);o.setAttribute(a,D.getAttribute(a)+l.elementAttributes["+"+a])}else{o.setAttribute(a,l.elementAttributes[a])}}}o.addEventListener("mousedown",function(){_=!1;setTimeout(function(){_=!0},10)});l.element=o}F.appendChild(o)})}function u(e,t){if(!S&&z&&z.element){z.element.classList.remove("active")}if(z&&z.element){z.element.classList.remove("focused")}z=e;if(e.element){e.element.classList.add("focused");if(t){e.element.classList.add("active")}}if(e&&e.element&&e.element.scrollIntoView){e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}function c(e){var t=A.indexOf(e);if(-1==t){A.push(e);u(e,!0)}h()}function m(e){var t=A[e];if(-1<e){A.splice(e,1);if(t.element){t.element.classList.remove("active")}}}function p(e){if(!e){e=z}var t=A.indexOf(e);if(-1<t){m(t)}else{if(!0!==S&&A.length>=S){m(0)}c(e)}h()}function g(e){w();if(!e){e=z}if(e){D.value=e.label;o(e.value)}L=[e.value]}function b(e){if(!e){w()}var t=[];A.forEach(function(e){t.push(e.value)});L=t;o(t)}function h(){var e=[];A.forEach(function(t){e.push(t.label)});D.value=e.join(", ");if(!1===R.currentCell){b(!0)}}function v(){for(var e=A.length,t=0;t<e;t++){m(0)}}function f(){w();a()}function y(){A=[];if(!F.parentNode){if(!0===n.values){s(r(),L)}else if("string"==typeof n.values){s(r(n.values),L)}else{s(n.values||[],L)}var e=j.elOffset(x);F.style.minWidth=x.offsetWidth+"px";F.style.top=e.top+x.offsetHeight+"px";F.style.left=e.left+"px";F.addEventListener("mousedown",function(){_=!1;setTimeout(function(){_=!0},10)});document.body.appendChild(F)}}function w(){if(F.parentNode){F.parentNode.removeChild(F)}C()}function C(){R.table.rowManager.element.removeEventListener("scroll",f)}function E(){clearTimeout(V);var e=String.fromCharCode(event.keyCode).toLowerCase();B+=e.toLowerCase();var t=H.find(function(e){return"undefined"!=typeof e.label&&e.label.toLowerCase().startsWith(B)});if(t){u(t,!S)}V=setTimeout(function(){B=""},800)}D.setAttribute("type","text");D.style.padding="4px";D.style.width="100%";D.style.boxSizing="border-box";D.style.cursor="default";D.readOnly=!1!=this.currentCell;if(n.elementAttributes&&"object"==e(n.elementAttributes)){for(var N in n.elementAttributes){if("+"==N.charAt(0)){N=N.slice(1);D.setAttribute(N,D.getAttribute(N)+n.elementAttributes["+"+N])}else{D.setAttribute(N,n.elementAttributes[N])}}}D.value="undefined"!=typeof T||null===T?T:"";D.addEventListener("search",function(){if(!D.value){v();b()}});D.addEventListener("keydown",function(t){var e;switch(t.keyCode){case 38:e=H.indexOf(z);if("editor"==M||"hybrid"==M&&e){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(0<e){u(H[e-1],!S)}}break;case 40:e=H.indexOf(z);if("editor"==M||"hybrid"==M&&e<H.length-1){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(e<H.length-1){if(-1==e){u(H[0],!S)}else{u(H[e+1],!S)}}}break;case 37:case 39:t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();break;case 13:if(S){p()}else{g()}break;case 27:f();break;case 9:break;default:if(!1===R.currentCell){t.preventDefault()}if(38<=t.keyCode&&90>=t.keyCode){E(t.keyCode)}}});D.addEventListener("blur",function(){if(_){if(S){b()}else{f()}}});D.addEventListener("focus",function(){if(!O){y()}});F=document.createElement("div");F.classList.add("tabulator-edit-select-list");l(function(){D.style.height="100%";D.focus({preventScroll:!0})});setTimeout(function(){k.table.rowManager.element.addEventListener("scroll",f)},10);return D}function D(t,l,o,a,n){var C=this,E=this,R=t.getElement(),x=t.getValue(),T=n.verticalNavigation||"editor",M="undefined"!=typeof x||null===x?x:"undefined"!=typeof n.defaultValue?n.defaultValue:"",L=document.createElement("input"),D=document.createElement("div"),F=[],S=!1,H=!0,z=!1;L.setAttribute("type","search");L.style.padding="4px";L.style.width="100%";L.style.boxSizing="border-box";if(n.elementAttributes&&"object"==e(n.elementAttributes)){for(var P in n.elementAttributes){if("+"==P.charAt(0)){P=P.slice(1);L.setAttribute(P,L.getAttribute(P)+n.elementAttributes["+"+P])}else{L.setAttribute(P,n.elementAttributes[P])}}}D.classList.add("tabulator-edit-select-list");D.addEventListener("mousedown",function(){H=!1;setTimeout(function(){H=!0},10)});function r(){if(!0===n.values){z=s()}else if("string"==typeof n.values){z=s(n.values)}}function s(e){var l={},o=E.table.getData(),a;if(e){a=E.table.columnManager.getColumnByField(e)}else{a=t.getColumn()._getSelf()}if(a){o.forEach(function(e){var t=a.getFieldValue(e);if(null!==t&&"undefined"!=typeof t&&""!==t){l[t]=!0}});if(n.sortValuesList){if("asc"==n.sortValuesList){l=Object.keys(l).sort()}else{l=Object.keys(l).sort().reverse()}}else{l=Object.keys(l)}}else{console.warn("unable to find matching column to create autocomplete lookup list:",e)}return l}function d(e,t){var l=[],o,a;if(z){o=z}else{o=n.values||[]}if(n.searchFunc){l=n.searchFunc(e,o);if(l instanceof Promise){u("undefined"!=typeof n.searchingPlaceholder?n.searchingPlaceholder:"Searching...");l.then(function(e){p(c(e),t)})["catch"](function(e){console.err("error in autocomplete search promise:",e)})}else{p(c(l),t)}}else{a=c(o);if(""===e){if(n.showListOnEmpty){l=a}}else{a.forEach(function(t){if(null!==t.value||"undefined"!=typeof t.value){if(-1<(t.value+"").toLowerCase().indexOf((e+"").toLowerCase())||-1<(t.title+"").toLowerCase().indexOf((e+"").toLowerCase())){l.push(t)}}})}p(l,t)}}function u(e){var t=document.createElement("div");m();if(!1!==e){t.classList.add("tabulator-edit-select-list-notice");t.tabIndex=0;if(e instanceof Node){t.appendChild(e)}else{t.innerHTML=e}D.appendChild(t)}}function c(t){var l=[];if(Array.isArray(t)){t.forEach(function(t){var o={};if("object"===e(t)){o.title=n.listItemFormatter?n.listItemFormatter(t.value,t.label):t.label;o.value=t.value}else{o.title=n.listItemFormatter?n.listItemFormatter(t,t):t;o.value=t}l.push(o)})}else{for(var o in t){var a={title:n.listItemFormatter?n.listItemFormatter(o,t[o]):t[o],value:o};l.push(a)}}return l}function m(){while(D.firstChild){D.removeChild(D.firstChild)}}function p(e,t){if(e.length){g(e,t)}else{if(n.emptyPlaceholder){u(n.emptyPlaceholder)}}}function g(e,t){var l=!1;m();F=e;F.forEach(function(e){var o=e.element;if(!o){o=document.createElement("div");o.classList.add("tabulator-edit-select-list-item");o.tabIndex=0;o.innerHTML=e.title;o.addEventListener("click",function(){v(e);b()});o.addEventListener("mousedown",function(){H=!1;setTimeout(function(){H=!0},10)});e.element=o;if(t&&e.value==x){L.value=e.title;e.element.classList.add("active");l=!0}if(e===S){e.element.classList.add("active");l=!0}}D.appendChild(o)});if(!l){v(!1)}}function b(){f();if(S){if(x!==S.value){x=S.value;L.value=S.title;o(S.value)}else{a()}}else{if(n.freetext){x=L.value;o(L.value)}else{if(n.allowEmpty&&""===L.value){x=L.value;o(L.value)}else{a()}}}}function h(){if(!D.parentNode){while(D.firstChild){D.removeChild(D.firstChild)}var e=j.elOffset(R);D.style.minWidth=R.offsetWidth+"px";D.style.top=e.top+R.offsetHeight+"px";D.style.left=e.left+"px";document.body.appendChild(D)}}function v(e){if(S&&S.element){S.element.classList.remove("active")}S=e;if(e&&e.element){e.element.classList.add("active")}if(e&&e.element&&e.element.scrollIntoView){e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}function f(){if(D.parentNode){D.parentNode.removeChild(D)}w()}function y(){f();a()}function w(){E.table.rowManager.element.removeEventListener("scroll",y)}L.addEventListener("keydown",function(t){var e;switch(t.keyCode){case 38:e=F.indexOf(S);if("editor"==T||"hybrid"==T&&e){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(0<e){v(F[e-1])}else{v(!1)}}break;case 40:e=F.indexOf(S);if("editor"==T||"hybrid"==T&&e<F.length-1){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(e<F.length-1){if(-1==e){v(F[0])}else{v(F[e+1])}}}break;case 37:case 39:t.stopImmediatePropagation();t.stopPropagation();break;case 13:b();break;case 27:y();break;case 36:case 35:t.stopImmediatePropagation();break;}});L.addEventListener("keyup",function(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:d(L.value);}});L.addEventListener("search",function(){d(L.value)});L.addEventListener("blur",function(){if(H){b()}});L.addEventListener("focus",function(){var e=M;r();h();L.value=e;d(e,!0)});l(function(){L.style.height="100%";L.focus({preventScroll:!0})});if(n.mask){k(L,n)}setTimeout(function(){C.table.rowManager.element.addEventListener("scroll",y)},10);r();L.value=M;d(M,!0);return L}function F(t,l,o,a,n){var u=this,c=t.getElement(),m=t.getValue(),p=c.getElementsByTagName("svg").length||5,g=c.getElementsByTagName("svg")[0]?c.getElementsByTagName("svg")[0].getAttribute("width"):14,b=[],h=document.createElement("div"),v=document.createElementNS("http://www.w3.org/2000/svg","svg");function r(e){b.forEach(function(t,l){if(l<e){if("ie"==u.table.browser){t.setAttribute("class","tabulator-star-active")}else{t.classList.replace("tabulator-star-inactive","tabulator-star-active")}t.innerHTML="<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>"}else{if("ie"==u.table.browser){t.setAttribute("class","tabulator-star-inactive")}else{t.classList.replace("tabulator-star-active","tabulator-star-inactive")}t.innerHTML="<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>"}})}function s(t){var e=document.createElement("span"),l=v.cloneNode(!0);b.push(l);e.addEventListener("mouseenter",function(l){l.stopPropagation();l.stopImmediatePropagation();r(t)});e.addEventListener("mousemove",function(t){t.stopPropagation();t.stopImmediatePropagation()});e.addEventListener("click",function(l){l.stopPropagation();l.stopImmediatePropagation();o(t);c.blur()});e.appendChild(l);h.appendChild(e)}function d(e){m=e;r(e)}c.style.whiteSpace="nowrap";c.style.overflow="hidden";c.style.textOverflow="ellipsis";h.style.verticalAlign="middle";h.style.display="inline-block";h.style.padding="4px";v.setAttribute("width",g);v.setAttribute("height",g);v.setAttribute("viewBox","0 0 512 512");v.setAttribute("xml:space","preserve");v.style.padding="0 1px";if(n.elementAttributes&&"object"==e(n.elementAttributes)){for(var f in n.elementAttributes){if("+"==f.charAt(0)){f=f.slice(1);h.setAttribute(f,h.getAttribute(f)+n.elementAttributes["+"+f])}else{h.setAttribute(f,n.elementAttributes[f])}}}for(var y=1;y<=p;y++){s(y)}m=Math.min(parseInt(m),p);r(m);h.addEventListener("mousemove",function(){r(0)});h.addEventListener("click",function(){o(0)});c.addEventListener("blur",function(){a()});c.addEventListener("keydown",function(t){switch(t.keyCode){case 39:d(m+1);break;case 37:d(m-1);break;case 13:o(m);break;case 27:a();break;}});return h}function S(t,l,o,a,n){var s,d,u=t.getElement(),c="undefined"==typeof n.max?(null===(s=u.getElementsByTagName("div")[0])||void 0===s?void 0:s.getAttribute("max"))||100:n.max,m="undefined"==typeof n.min?(null===(d=u.getElementsByTagName("div")[0])||void 0===d?void 0:d.getAttribute("min"))||0:n.min,p=(c-m)/100,g=t.getValue()||0,b=document.createElement("div"),h=document.createElement("div"),v,f;function r(){var e=window.getComputedStyle(u,null),t=p*Math.round(h.offsetWidth/((u.clientWidth-parseInt(e.getPropertyValue("padding-left"))-parseInt(e.getPropertyValue("padding-right")))/100))+m;o(t);u.setAttribute("aria-valuenow",t);u.setAttribute("aria-label",g)}b.style.position="absolute";b.style.right="0";b.style.top="0";b.style.bottom="0";b.style.width="5px";b.classList.add("tabulator-progress-handle");h.style.display="inline-block";h.style.position="relative";h.style.height="100%";h.style.backgroundColor="#488CE9";h.style.maxWidth="100%";h.style.minWidth="0%";if(n.elementAttributes&&"object"==e(n.elementAttributes)){for(var y in n.elementAttributes){if("+"==y.charAt(0)){y=y.slice(1);h.setAttribute(y,h.getAttribute(y)+n.elementAttributes["+"+y])}else{h.setAttribute(y,n.elementAttributes[y])}}}u.style.padding="4px 4px";g=Math.min(parseFloat(g),c);g=Math.max(parseFloat(g),m);g=Math.round((g-m)/p);h.style.width=g+"%";u.setAttribute("aria-valuemin",m);u.setAttribute("aria-valuemax",c);h.appendChild(b);b.addEventListener("mousedown",function(t){v=t.screenX;f=h.offsetWidth});b.addEventListener("mouseover",function(){b.style.cursor="ew-resize"});u.addEventListener("mousemove",function(t){if(v){h.style.width=f+t.screenX-v+"px"}});u.addEventListener("mouseup",function(t){if(v){t.stopPropagation();t.stopImmediatePropagation();v=!1;f=!1;r()}});u.addEventListener("keydown",function(t){switch(t.keyCode){case 39:t.preventDefault();h.style.width=h.clientWidth+u.clientWidth/100+"px";break;case 37:t.preventDefault();h.style.width=h.clientWidth-u.clientWidth/100+"px";break;case 9:case 13:r();break;case 27:a();break;}});u.addEventListener("blur",function(){a()});return h}function H(t,l,o,a,n){var s=t.getValue(),d=document.createElement("input"),u=n.tristate,c="undefined"==typeof n.indeterminateValue?null:n.indeterminateValue,m=!1;d.setAttribute("type","checkbox");d.style.marginTop="5px";d.style.boxSizing="border-box";if(n.elementAttributes&&"object"==e(n.elementAttributes)){for(var p in n.elementAttributes){if("+"==p.charAt(0)){p=p.slice(1);d.setAttribute(p,d.getAttribute(p)+n.elementAttributes["+"+p])}else{d.setAttribute(p,n.elementAttributes[p])}}}d.value=s;if(u&&("undefined"==typeof s||s===c||""===s)){m=!0;d.indeterminate=!0}if("firefox"!=this.table.browser){l(function(){d.focus({preventScroll:!0})})}d.checked=!0===s||"true"===s||"True"===s||1===s;l(function(){d.focus()});function r(e){if(u){if(!e){if(d.checked&&!m){d.checked=!1;d.indeterminate=!0;m=!0;return c}else{m=!1;return d.checked}}else{if(m){return c}else{return d.checked}}}else{return d.checked}}d.addEventListener("change",function(){o(r())});d.addEventListener("blur",function(){o(r(!0))});d.addEventListener("keydown",function(t){if(13==t.keyCode){o(r())}if(27==t.keyCode){a()}});return d}var Ee=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.currentCell=!1;l.mouseClick=!1;l.recursionBlock=!1;l.invalidEdit=!1;l.editedCells=[];l.editors=n.editors;l.registerColumnOption("editable");l.registerColumnOption("editor");l.registerColumnOption("editorParams");l.registerColumnOption("cellEditing");l.registerColumnOption("cellEdited");l.registerColumnOption("cellEditCancelled");l.registerTableFunction("getEditedCells",l.getEditedCells.bind(d(l)));l.registerTableFunction("clearCellEdited",l.clearCellEdited.bind(d(l)));l.registerTableFunction("navigatePrev",l.navigatePrev.bind(d(l)));l.registerTableFunction("navigateNext",l.navigateNext.bind(d(l)));l.registerTableFunction("navigateLeft",l.navigateLeft.bind(d(l)));l.registerTableFunction("navigateRight",l.navigateRight.bind(d(l)));l.registerTableFunction("navigateUp",l.navigateUp.bind(d(l)));l.registerTableFunction("navigateDown",l.navigateDown.bind(d(l)));l.registerComponentFunction("cell","isEdited",l.cellisEdited.bind(d(l)));l.registerComponentFunction("cell","clearEdited",l.clearEdited.bind(d(l)));l.registerComponentFunction("cell","edit",l.editCell.bind(d(l)));l.registerComponentFunction("cell","cancelEdit",l.cellCancelEdit.bind(d(l)));l.registerComponentFunction("cell","navigatePrev",l.navigatePrev.bind(d(l)));l.registerComponentFunction("cell","navigateNext",l.navigateNext.bind(d(l)));l.registerComponentFunction("cell","navigateLeft",l.navigateLeft.bind(d(l)));l.registerComponentFunction("cell","navigateRight",l.navigateRight.bind(d(l)));l.registerComponentFunction("cell","navigateUp",l.navigateUp.bind(d(l)));l.registerComponentFunction("cell","navigateDown",l.navigateDown.bind(d(l)));return l}o(n,[{key:"initialize",value:function(){this.subscribe("cell-init",this.bindEditor.bind(this));this.subscribe("cell-delete",this.clearEdited.bind(this));this.subscribe("column-layout",this.initializeColumnCheck.bind(this));this.subscribe("column-delete",this.columnDeleteCheck.bind(this));this.subscribe("row-deleting",this.rowDeleteCheck.bind(this));this.subscribe("data-refeshing",this.cancelEdit.bind(this));this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this));this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this));this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this));this.subscribe("keybinding-nav-right",this.navigateRight.bind(this));this.subscribe("keybinding-nav-up",this.navigateUp.bind(this));this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}},{key:"keybindingNavigateNext",value:function(t){var e=this.currentCell,l=this.options("tabEndNewRow");if(e){if(!this.navigateNext(t)){if(l){e.getElement().firstChild.blur();if(!0===l){l=this.table.addRow({})}else{if("function"==typeof l){l=this.table.addRow(l(e.row.getComponent()))}else{l=this.table.addRow(Object.assign({},l))}}l.then(function(){setTimeout(function(){nav.next()})})}}}}},{key:"cellisEdited",value:function(e){return!!e.modules.edit&&e.modules.edit.edited}},{key:"cellCancelEdit",value:function(e){if(e===this.currentCell){this.table.modules.edit.cancelEdit()}else{console.warn("Cancel Editor Error - This cell is not currently being edited ")}}},{key:"clearCellEdited",value:function(e){var t=this;if(!e){e=this.modules.edit.getEditedCells()}if(!Array.isArray(e)){e=[e]}e.forEach(function(e){t.modules.edit.clearEdited(e._getSelf())})}},{key:"navigatePrev",value:function(t){var e=this.currentCell,l,o;if(e){if(t){t.preventDefault()}l=this.navigateLeft();if(l){return!0}else{o=this.table.rowManager.prevDisplayRow(e.row,!0);if(o){l=this.findNextEditableCell(o,o.cells.length);if(l){l.getComponent().edit();return!0}}}}return!1}},{key:"navigateNext",value:function(t){var e=this.currentCell,l,o;if(e){if(t){t.preventDefault()}l=this.navigateRight();if(l){return!0}else{o=this.table.rowManager.nextDisplayRow(e.row,!0);if(o){l=this.findNextEditableCell(o,-1);if(l){l.getComponent().edit();return!0}}}}return!1}},{key:"navigateLeft",value:function(t){var e=this.currentCell,l,o;if(e){if(t){t.preventDefault()}l=e.getIndex();o=this.findPrevEditableCell(e.row,l);if(o){o.getComponent().edit();return!0}}return!1}},{key:"navigateRight",value:function(t){var e=this.currentCell,l,o;if(e){if(t){t.preventDefault()}l=e.getIndex();o=this.findNextEditableCell(e.row,l);if(o){o.getComponent().edit();return!0}}return!1}},{key:"navigateUp",value:function(t){var e=this.currentCell,l,o;if(e){if(t){t.preventDefault()}l=e.getIndex();o=this.table.rowManager.prevDisplayRow(e.row,!0);if(o){o.cells[l].getComponent().edit();return!0}}return!1}},{key:"navigateDown",value:function(t){var e=this.currentCell,l,o;if(e){if(t){t.preventDefault()}l=e.getIndex();o=this.table.rowManager.nextDisplayRow(e.row,!0);if(o){o.cells[l].getComponent().edit();return!0}}return!1}},{key:"findNextEditableCell",value:function(e,t){var l=!1;if(t<e.cells.length-1){for(var o=t+1,a;o<e.cells.length;o++){a=e.cells[o];if(a.column.modules.edit&&j.elVisible(a.getElement())){var n=!0;if("function"==typeof a.column.modules.edit.check){n=a.column.modules.edit.check(a.getComponent())}if(n){l=a;break}}}}return l}},{key:"findPrevEditableCell",value:function(e,t){var l=!1;if(0<t){for(var o=t-1;0<=o;o--){var a=e.cells[o],n=!0;if(a.column.modules.edit&&j.elVisible(a.getElement())){if("function"==typeof a.column.modules.edit.check){n=a.column.modules.edit.check(a.getComponent())}if(n){l=a;break}}}}return l}},{key:"initializeColumnCheck",value:function(e){if("undefined"!=typeof e.definition.editor){this.initializeColumn(e)}}},{key:"columnDeleteCheck",value:function(e){if(this.currentCell&&this.currentCell.column===e){this.cancelEdit()}}},{key:"rowDeleteCheck",value:function(e){if(this.currentCell&&this.currentCell.row===e){this.cancelEdit()}}},{key:"initializeColumn",value:function(t){var l={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{}};switch(e(t.definition.editor)){case"string":if(this.editors[t.definition.editor]){l.editor=this.editors[t.definition.editor]}else{console.warn("Editor Error - No such editor found: ",t.definition.editor)}break;case"function":l.editor=t.definition.editor;break;case"boolean":if(!0===t.definition.editor){if("function"!=typeof t.definition.formatter){if(this.editors[t.definition.formatter]){l.editor=this.editors[t.definition.formatter]}else{l.editor=this.editors.input}}else{console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter)}}break;}if(l.editor){t.modules.edit=l}}},{key:"getCurrentCell",value:function(){return this.currentCell?this.currentCell.getComponent():!1}},{key:"clearEditor",value:function(e){var t=this.currentCell,l;this.invalidEdit=!1;if(t){this.currentCell=!1;l=t.getElement();if(e){if(t.validate){t.validate()}}else{l.classList.remove("tabulator-validation-fail")}l.classList.remove("tabulator-editing");while(l.firstChild){l.removeChild(l.firstChild)}t.row.getElement().classList.remove("tabulator-row-editing")}}},{key:"cancelEdit",value:function(){if(this.currentCell){var e=this.currentCell,t=this.currentCell.getComponent();this.clearEditor(!0);e.setValueActual(e.getValue());e.cellRendered();if("textarea"==e.column.definition.editor||e.column.definition.variableHeight){e.row.normalizeHeight(!0)}if(e.column.definition.cellEditCancelled){e.column.definition.cellEditCancelled.call(this.table,t)}this.dispatchExternal("cellEditCancelled",t)}}},{key:"bindEditor",value:function(t){if(t.column.modules.edit){var l=this,o=t.getElement(!0);o.setAttribute("tabindex",0);o.addEventListener("click",function(){if(!o.classList.contains("tabulator-editing")){o.focus({preventScroll:!0})}});o.addEventListener("mousedown",function(t){if(2===t.button){t.preventDefault()}else{l.mouseClick=!0}});o.addEventListener("focus",function(o){if(!l.recursionBlock){l.edit(t,o,!1)}})}}},{key:"focusCellNoEvent",value:function(e,t){this.recursionBlock=!0;if(!(t&&"ie"===this.table.browser)){e.getElement().focus({preventScroll:!0})}this.recursionBlock=!1}},{key:"editCell",value:function(e,t){this.focusCellNoEvent(e);this.edit(e,!1,t)}},{key:"focusScrollAdjust",value:function(e){if("virtual"==this.table.rowManager.getRenderMode()){var t=this.table.rowManager.element.scrollTop,l=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,o=e.row.getElement(),a=o.offsetTop;if(o.offsetTop<t){this.table.rowManager.element.scrollTop-=t-o.offsetTop}else{if(o.offsetTop+o.offsetHeight>l){this.table.rowManager.element.scrollTop+=o.offsetTop+o.offsetHeight-l}}var n=this.table.rowManager.element.scrollLeft,r=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,s=e.getElement(),a=s.offsetLeft;if(this.table.modExists("frozenColumns")){n+=parseInt(this.table.modules.frozenColumns.leftMargin);r-=parseInt(this.table.modules.frozenColumns.rightMargin)}if("virtual"===this.table.options.renderHorizontal){n-=parseInt(this.table.columnManager.renderer.vDomPadLeft);r-=parseInt(this.table.columnManager.renderer.vDomPadLeft)}if(s.offsetLeft<n){this.table.rowManager.element.scrollLeft-=n-s.offsetLeft}else{if(s.offsetLeft+s.offsetWidth>r){this.table.rowManager.element.scrollLeft+=s.offsetLeft+s.offsetWidth-r}}}}},{key:"edit",value:function(t,l,o){var s=this,d=!0,u=function(){},c=t.getElement(),m,p,g;if(this.currentCell){if(!this.invalidEdit){this.cancelEdit()}return}function a(e){if(s.currentCell===t){var l=!0;if(t.column.modules.validate&&s.table.modExists("validate")&&"manual"!=s.table.options.validationMode){l=s.table.modules.validate.validate(t.column.modules.validate,t,e)}if(!0===l||"highlight"===s.table.options.validationMode){s.clearEditor();if(!t.modules.edit){t.modules.edit={}}t.modules.edit.edited=!0;if(-1==s.editedCells.indexOf(t)){s.editedCells.push(t)}t.setValue(e,!0);if(s.table.options.dataTree&&s.table.modExists("dataTree")){s.table.modules.dataTree.checkForRestyle(t)}if(!0!==l){c.classList.add("tabulator-validation-fail");s.table.externalEvents.dispatch("validationFailed",t.getComponent(),e,l);return!1}return!0}else{s.invalidEdit=!0;c.classList.add("tabulator-validation-fail");s.focusCellNoEvent(t,!0);u();s.table.externalEvents.dispatch("validationFailed",t.getComponent(),e,l);return!1}}}function n(){if(s.currentCell===t){s.cancelEdit();if(s.table.options.dataTree&&s.table.modExists("dataTree")){s.table.modules.dataTree.checkForRestyle(t)}}}function r(e){u=e}if(!t.column.modules.edit.blocked){if(l){l.stopPropagation()}switch(e(t.column.modules.edit.check)){case"function":d=t.column.modules.edit.check(t.getComponent());break;case"boolean":d=t.column.modules.edit.check;break;}if(d||o){s.cancelEdit();s.currentCell=t;this.focusScrollAdjust(t);p=t.getComponent();if(this.mouseClick){this.mouseClick=!1;if(t.column.definition.cellClick){t.column.definition.cellClick.call(this.table,l,p)}}if(t.column.definition.cellEditing){t.column.definition.cellEditing.call(this.table,p)}this.dispatchExternal("cellEditing",p);g="function"==typeof t.column.modules.edit.params?t.column.modules.edit.params(p):t.column.modules.edit.params;m=t.column.modules.edit.editor.call(s,p,r,a,n,g);if(!1!==m){if(m instanceof Node){c.classList.add("tabulator-editing");t.row.getElement().classList.add("tabulator-row-editing");while(c.firstChild){c.removeChild(c.firstChild)}c.appendChild(m);u();for(var b=c.children,h=0;h<b.length;h++){b[h].addEventListener("click",function(t){t.stopPropagation()})}}else{console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",m);c.blur();return!1}}else{c.blur();return!1}return!0}else{this.mouseClick=!1;c.blur();return!1}}else{this.mouseClick=!1;c.blur();return!1}}},{key:"getEditedCells",value:function(){var e=[];this.editedCells.forEach(function(t){e.push(t.getComponent())});return e}},{key:"clearEdited",value:function(e){var t;if(e.modules.edit&&e.modules.edit.edited){e.modules.edit.edited=!1;if(e.modules.validate){e.modules.validate.invalid=!1}}t=this.editedCells.indexOf(e);if(-1<t){this.editedCells.splice(t,1)}}}]);return n}(se);Ee.moduleName="edit";Ee.editors={input:R,textarea:x,number:T,range:M,select:L,autocomplete:D,star:F,progress:S,tickCross:H};var ke=function e(l,o,a,n){t(this,e);this.type=l;this.columns=o;this.component=a||!1;this.indent=n||0},Re=function e(l,o,a,n,r){t(this,e);this.value=l;this.component=o||!1;this.width=a;this.height=n;this.depth=r},xe=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.config={};l.cloneTableStyle=!0;l.colVisProp="";l.registerTableOption("htmlOutputConfig",!1);l.registerColumnOption("htmlOutput");l.registerColumnOption("titleHtmlOutput");return l}o(n,[{key:"initialize",value:function(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}},{key:"generateExportList",value:function(e,t,l,o){this.cloneTableStyle=t;this.config=e||{};this.colVisProp=o;var a=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],n=this.bodyToExportRows(this.rowLookup(l));return a.concat(n)}},{key:"genereateTable",value:function(e,t,l,o){var a=this.generateExportList(e,t,l,o);return this.genereateTableElement(a)}},{key:"rowLookup",value:function(e){var t=this,l=[];if("function"==typeof e){e.call(this.table).forEach(function(e){e=t.table.rowManager.findRow(e);if(e){l.push(e)}})}else{switch(e){case!0:case"visible":l=this.table.rowManager.getVisibleRows(!0);break;case"all":l=this.table.rowManager.rows;break;case"selected":l=this.table.modules.selectRow.selectedRows;break;case"active":default:if(this.table.options.pagination){l=this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2)}else{l=this.table.rowManager.getDisplayRows()}}}return Object.assign([],l)}},{key:"generateColumnGroupHeaders",value:function(){var e=this,t=[],l=!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex;l.forEach(function(l){var o=e.processColumnGroup(l);if(o){t.push(o)}});return t}},{key:"processColumnGroup",value:function(e){var t=this,l=e.columns,o=0,a=e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,n={title:a,column:e,depth:1};if(l.length){n.subGroups=[];n.width=0;l.forEach(function(e){var l=t.processColumnGroup(e);if(l){n.width+=l.width;n.subGroups.push(l);if(l.depth>o){o=l.depth}}});n.depth+=o;if(!n.width){return!1}}else{if(this.columnVisCheck(e)){n.width=1}else{return!1}}return n}},{key:"columnVisCheck",value:function(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])}},{key:"headersToExportRows",value:function(e){var l=[],o=0,a=[];function t(e,a){var n=o-a;if("undefined"==typeof l[a]){l[a]=[]}e.height=e.subGroups?1:n-e.depth+1;l[a].push(e);if(1<e.height){for(var r=1;r<e.height;r++){if("undefined"==typeof l[a+r]){l[a+r]=[]}l[a+r].push(!1)}}if(1<e.width){for(var s=1;s<e.width;s++){l[a].push(!1)}}if(e.subGroups){e.subGroups.forEach(function(e){t(e,a+1)})}}e.forEach(function(e){if(e.depth>o){o=e.depth}});e.forEach(function(e){t(e,0)});l.forEach(function(e){var t=[];e.forEach(function(e){if(e){t.push(new Re(e.title,e.column.getComponent(),e.width,e.height,e.depth))}else{t.push(null)}});a.push(new ke("header",t))});return a}},{key:"bodyToExportRows",value:function(e){var t=this,l=[],o=[];this.table.columnManager.columnsByIndex.forEach(function(e){if(t.columnVisCheck(e)){l.push(e.getComponent())}});if(!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")){if(this.table.modules.columnCalcs.topInitialized){e.unshift(this.table.modules.columnCalcs.topRow)}if(this.table.modules.columnCalcs.botInitialized){e.push(this.table.modules.columnCalcs.botRow)}}e=e.filter(function(e){switch(e.type){case"group":return!1!==t.config.rowGroups;case"calc":return!1!==t.config.columnCalcs;case"row":return!(t.table.options.dataTree&&!1===t.config.dataTree&&e.modules.dataTree.parent);}return!0});e.forEach(function(e){var a=e.getData(t.colVisProp),n=[],r=0;switch(e.type){case"group":r=e.level;n.push(new Re(e.key,e.getComponent(),l.length,1));break;case"calc":case"row":l.forEach(function(e){n.push(new Re(e._column.getFieldValue(a),e,1,1))});if(t.table.options.dataTree&&!1!==t.config.dataTree){r=e.modules.dataTree.index}break;}o.push(new ke(e.type,n,e.getComponent(),r))});return o}},{key:"genereateTableElement",value:function(e){var t=this,l=document.createElement("table"),o=document.createElement("thead"),a=document.createElement("tbody"),n=this.lookupTableStyles(),r=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],s={};s.rowFormatter=null!==r?r:this.table.options.rowFormatter;if(this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")){s.treeElementField=this.table.modules.dataTree.elementField}s.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))];if(s.groupHeader&&!Array.isArray(s.groupHeader)){s.groupHeader=[s.groupHeader]}l.classList.add("tabulator-print-table");this.mapElementStyles(this.table.columnManager.getHeadersElement(),o,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]);if(1e3<e.length){console.warn("It may take a long time to render an HTML table with more than 1000 rows")}e.forEach(function(e,l){switch(e.type){case"header":o.appendChild(t.genereateHeaderElement(e,s,n));break;case"group":a.appendChild(t.genereateGroupElement(e,s,n));break;case"calc":a.appendChild(t.genereateCalcElement(e,s,n));break;case"row":var r=t.genereateRowElement(e,s,n);t.mapElementStyles(l%2&&n.evenRow?n.evenRow:n.oddRow,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);a.appendChild(r);break;}});if(o.innerHTML){l.appendChild(o)}l.appendChild(a);this.mapElementStyles(this.table.element,l,["border-top","border-left","border-right","border-bottom"]);return l}},{key:"lookupTableStyles",value:function(){var e={};if(this.cloneTableStyle&&window.getComputedStyle){e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)");e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)");e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs");e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)");e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0];if(e.firstRow){e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell");e.firstCell=e.styleCells[0];e.lastCell=e.styleCells[e.styleCells.length-1]}}return e}},{key:"genereateHeaderElement",value:function(e){var t=this,l=document.createElement("tr");e.columns.forEach(function(e){if(e){var o=document.createElement("th"),a=e.component._column.definition.cssClass?e.component._column.definition.cssClass.split(" "):[];o.colSpan=e.width;o.rowSpan=e.height;o.innerHTML=e.value;if(t.cloneTableStyle){o.style.boxSizing="border-box"}a.forEach(function(e){o.classList.add(e)});t.mapElementStyles(e.component.getElement(),o,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]);t.mapElementStyles(e.component._column.contentElement,o,["padding-top","padding-left","padding-right","padding-bottom"]);if(e.component._column.visible){t.mapElementStyles(e.component.getElement(),o,["width"])}else{if(e.component._column.definition.width){o.style.width=e.component._column.definition.width+"px"}}if(e.component._column.parent){t.mapElementStyles(e.component._column.parent.groupElement,o,["border-top"])}l.appendChild(o)}});return l}},{key:"genereateGroupElement",value:function(e,t,l){var o=document.createElement("tr"),a=document.createElement("td"),n=e.columns[0];o.classList.add("tabulator-print-table-row");if(t.groupHeader&&t.groupHeader[e.indent]){n.value=t.groupHeader[e.indent](n.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)}else{if(!1===t.groupHeader){n.value=n.value}else{n.value=e.component._group.generator(n.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)}}a.colSpan=n.width;a.innerHTML=n.value;o.classList.add("tabulator-print-table-group");o.classList.add("tabulator-group-level-"+e.indent);if(n.component.isVisible()){o.classList.add("tabulator-group-visible")}this.mapElementStyles(l.firstGroup,o,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);this.mapElementStyles(l.firstGroup,a,["padding-top","padding-left","padding-right","padding-bottom"]);o.appendChild(a);return o}},{key:"genereateCalcElement",value:function(e,t,l){var o=this.genereateRowElement(e,t,l);o.classList.add("tabulator-print-table-calcs");this.mapElementStyles(l.calcRow,o,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);return o}},{key:"genereateRowElement",value:function(t,l,o){var a=this,n=document.createElement("tr");n.classList.add("tabulator-print-table-row");t.columns.forEach(function(r){if(r){var s=document.createElement("td"),d=r.component._column,u=r.value,c={modules:{},getValue:function(){return u},getField:function(){return d.definition.field},getElement:function(){return s},getColumn:function(){return d.getComponent()},getData:function(){return t.component.getData()},getRow:function(){return t.component},getComponent:function(){return c},column:d},m=d.definition.cssClass?d.definition.cssClass.split(" "):[];m.forEach(function(e){s.classList.add(e)});if(a.table.modExists("format")&&!1!==a.config.formatCells){u=a.table.modules.format.formatExportValue(c,a.colVisProp)}else{switch(e(u)){case"object":u=JSON.stringify(u);break;case"undefined":case"null":u="";break;default:u=u;}}if(u instanceof Node){s.appendChild(u)}else{s.innerHTML=u}if(o.firstCell){a.mapElementStyles(o.firstCell,s,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]);if(d.definition.align){s.style.textAlign=d.definition.align}}if(a.table.options.dataTree&&!1!==a.config.dataTree){if(l.treeElementField&&l.treeElementField==d.field||!l.treeElementField&&0==i){if(t.component._row.modules.dataTree.controlEl){s.insertBefore(t.component._row.modules.dataTree.controlEl.cloneNode(!0),s.firstChild)}if(t.component._row.modules.dataTree.branchEl){s.insertBefore(t.component._row.modules.dataTree.branchEl.cloneNode(!0),s.firstChild)}}}n.appendChild(s);if(c.modules.format&&c.modules.format.renderedCallback){c.modules.format.renderedCallback()}if(l.rowFormatter&&!1!==a.config.formatCells){l.rowFormatter(t.component)}}});return n}},{key:"genereateHTMLTable",value:function(e){var t=document.createElement("div");t.appendChild(this.genereateTableElement(e));return t.innerHTML}},{key:"getHtml",value:function(e,t,l,o){var a=this.generateExportList(l||this.table.options.htmlOutputConfig,t,e,o||"htmlOutput");return this.genereateHTMLTable(a)}},{key:"mapElementStyles",value:function(e,t,l){if(this.cloneTableStyle&&e&&t){var o={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var a=window.getComputedStyle(e);l.forEach(function(e){t.style[o[e]]=a.getPropertyValue(e)})}}}}]);return n}(se);xe.moduleName="export";var Te=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.filterList=[];l.headerFilters={};l.headerFilterColumns=[];l.prevHeaderFilterChangeCheck="";l.prevHeaderFilterChangeCheck="{}";l.changed=!1;l.tableInitialized=!1;l.registerTableOption("filterMode","local");l.registerTableOption("initialFilter",!1);l.registerTableOption("initialHeaderFilter",!1);l.registerTableOption("headerFilterLiveFilterDelay",300);l.registerColumnOption("headerFilter");l.registerColumnOption("headerFilterPlaceholder");l.registerColumnOption("headerFilterParams");l.registerColumnOption("headerFilterEmptyCheck");l.registerColumnOption("headerFilterFunc");l.registerColumnOption("headerFilterFuncParams");l.registerColumnOption("headerFilterLiveFilter");l.registerTableFunction("searchRows",l.searchRows.bind(d(l)));l.registerTableFunction("searchData",l.searchData.bind(d(l)));l.registerTableFunction("setFilter",l.userSetFilter.bind(d(l)));l.registerTableFunction("refreshFilter",l.userRefreshFilter.bind(d(l)));l.registerTableFunction("addFilter",l.userAddFilter.bind(d(l)));l.registerTableFunction("getFilters",l.getFilters.bind(d(l)));l.registerTableFunction("setHeaderFilterFocus",l.userSetHeaderFilterFocus.bind(d(l)));l.registerTableFunction("getHeaderFilterValue",l.userGetHeaderFilterValue.bind(d(l)));l.registerTableFunction("setHeaderFilterValue",l.userSetHeaderFilterValue.bind(d(l)));l.registerTableFunction("getHeaderFilters",l.getHeaderFilters.bind(d(l)));l.registerTableFunction("removeFilter",l.userRemoveFilter.bind(d(l)));l.registerTableFunction("clearFilter",l.userClearFilter.bind(d(l)));l.registerTableFunction("clearHeaderFilter",l.userClearHeaderFilter.bind(d(l)));l.registerComponentFunction("column","headerFilterFocus",l.setHeaderFilterFocus.bind(d(l)));l.registerComponentFunction("column","reloadHeaderFilter",l.reloadHeaderFilter.bind(d(l)));l.registerComponentFunction("column","getHeaderFilterValue",l.getHeaderFilterValue.bind(d(l)));l.registerComponentFunction("column","setHeaderFilterValue",l.setHeaderFilterValue.bind(d(l)));return l}o(n,[{key:"initialize",value:function(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this));this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this));this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this));this.subscribe("table-built",this.tableBuilt.bind(this));if("remote"===this.table.options.filterMode){this.subscribe("data-params",this.remoteFilterParams.bind(this))}this.registerDataHandler(this.filter.bind(this),10)}},{key:"tableBuilt",value:function(){var e=this;if(this.table.options.initialFilter){this.setFilter(this.table.options.initialFilter)}if(this.table.options.initialHeaderFilter){this.table.options.initialHeaderFilter.forEach(function(t){var l=e.table.columnManager.findColumn(t.field);if(l){e.setHeaderFilterValue(l,t.value)}else{console.warn("Column Filter Error - No matching column found:",t.field);return!1}})}this.tableInitialized=!0}},{key:"remoteFilterParams",value:function(e,t,l,o){o.filter=this.getFilters(!0,!0);return o}},{key:"userSetFilter",value:function(e,t,l,o){this.setFilter(e,t,l,o);this.refreshFilter()}},{key:"userRefreshFilter",value:function(){this.refreshFilter()}},{key:"userAddFilter",value:function(e,t,l,o){this.addFilter(e,t,l,o);this.refreshFilter()}},{key:"userSetHeaderFilterFocus",value:function(e){var t=this.table.columnManager.findColumn(e);if(t){this.setHeaderFilterFocus(t)}else{console.warn("Column Filter Focus Error - No matching column found:",e);return!1}}},{key:"userGetHeaderFilterValue",value:function(e){var t=this.table.columnManager.findColumn(e);if(t){return this.getHeaderFilterValue(t)}else{console.warn("Column Filter Error - No matching column found:",e)}}},{key:"userSetHeaderFilterValue",value:function(e,t){var l=this.table.columnManager.findColumn(e);if(l){this.setHeaderFilterValue(l,t)}else{console.warn("Column Filter Error - No matching column found:",e);return!1}}},{key:"userRemoveFilter",value:function(e,t,l){this.removeFilter(e,t,l);this.refreshFilter()}},{key:"userClearFilter",value:function(e){this.clearFilter(e);this.refreshFilter()}},{key:"userClearHeaderFilter",value:function(){this.clearHeaderFilter();this.refreshFilter()}},{key:"searchRows",value:function(e,t,l){return this.search("rows",e,t,l)}},{key:"searchData",value:function(e,t,l){return this.search("data",e,t,l)}},{key:"initializeColumnHeaderFilter",value:function(e){var t=e.definition;if(t.headerFilter){if("undefined"!=typeof t.headerFilterPlaceholder&&t.field){this.module("localize").setHeaderFilterColumnPlaceholder(t.field,t.headerFilterPlaceholder)}this.initializeColumn(e)}}},{key:"initializeColumn",value:function(t){var o=this,a=t.getField();function l(l){var r="input"==t.modules.filter.tagType&&"text"==t.modules.filter.attrType||"textarea"==t.modules.filter.tagType?"partial":"match",s="",d="",u;if("undefined"==typeof t.modules.filter.prevSuccess||t.modules.filter.prevSuccess!==l){t.modules.filter.prevSuccess=l;if(!t.modules.filter.emptyFunc(l)){t.modules.filter.value=l;switch(e(t.definition.headerFilterFunc)){case"string":if(n.filters[t.definition.headerFilterFunc]){s=t.definition.headerFilterFunc;u=function(e){var o=t.definition.headerFilterFuncParams||{},a=t.getFieldValue(e);o="function"==typeof o?o(l,a,e):o;return n.filters[t.definition.headerFilterFunc](l,a,e,o)}}else{console.warn("Header Filter Error - Matching filter function not found: ",t.definition.headerFilterFunc)}break;case"function":u=function(e){var o=t.definition.headerFilterFuncParams||{},a=t.getFieldValue(e);o="function"==typeof o?o(l,a,e):o;return t.definition.headerFilterFunc(l,a,e,o)};s=u;break;}if(!u){switch(r){case"partial":u=function(e){var o=t.getFieldValue(e);if("undefined"!=typeof o&&null!==o){return-1<(o+"").toLowerCase().indexOf((l+"").toLowerCase())}else{return!1}};s="like";break;default:u=function(e){return t.getFieldValue(e)==l};s="=";}}o.headerFilters[a]={value:l,func:u,type:s,params:{}}}else{delete o.headerFilters[a]}d=JSON.stringify(o.headerFilters);if(o.prevHeaderFilterChangeCheck!==d){o.prevHeaderFilterChangeCheck=d;o.trackChanges();o.refreshFilter()}}return!0}t.modules.filter={success:l,attrType:!1,tagType:!1,emptyFunc:!1};this.generateHeaderFilterElement(t)}},{key:"generateHeaderFilterElement",value:function(t,l,o){var n=this,r=this,s=t.modules.filter.success,d=t.getField(),u,c,m,p,g,b,h;function a(){}if(t.modules.filter.headerElement&&t.modules.filter.headerElement.parentNode){t.contentElement.removeChild(t.modules.filter.headerElement.parentNode)}if(d){t.modules.filter.emptyFunc=t.definition.headerFilterEmptyCheck||function(e){return!e&&"0"!==e&&0!==e};u=document.createElement("div");u.classList.add("tabulator-header-filter");switch(e(t.definition.headerFilter)){case"string":if(r.table.modules.edit.editors[t.definition.headerFilter]){c=r.table.modules.edit.editors[t.definition.headerFilter];if(("tick"===t.definition.headerFilter||"tickCross"===t.definition.headerFilter)&&!t.definition.headerFilterEmptyCheck){t.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e}}}else{console.warn("Filter Error - Cannot build header filter, No such editor found: ",t.definition.editor)}break;case"function":c=t.definition.headerFilter;break;case"boolean":if(t.modules.edit&&t.modules.edit.editor){c=t.modules.edit.editor}else{if(t.definition.formatter&&r.table.modules.edit.editors[t.definition.formatter]){c=r.table.modules.edit.editors[t.definition.formatter];if(("tick"===t.definition.formatter||"tickCross"===t.definition.formatter)&&!t.definition.headerFilterEmptyCheck){t.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e}}}else{c=r.table.modules.edit.editors.input}}break;}if(c){p={getValue:function(){return"undefined"!=typeof l?l:""},getField:function(){return t.definition.field},getElement:function(){return u},getColumn:function(){return t.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}};h=t.definition.headerFilterParams||{};h="function"==typeof h?h.call(r.table):h;m=c.call(this.table.modules.edit,p,function(){},s,a,h);if(!m){console.warn("Filter Error - Cannot add filter to "+d+" column, editor returned a value of false");return}if(!(m instanceof Node)){console.warn("Filter Error - Cannot add filter to "+d+" column, editor should return an instance of Node, the editor returned:",m);return}if(d){r.langBind("headerFilters|columns|"+t.definition.field,function(e){m.setAttribute("placeholder","undefined"!=typeof e&&e?e:r.langText("headerFilters|default"))})}else{r.langBind("headerFilters|default",function(e){m.setAttribute("placeholder",e)})}m.addEventListener("click",function(t){t.stopPropagation();m.focus()});m.addEventListener("focus",function(){var e=n.table.columnManager.element.scrollLeft;if(e!==n.table.rowManager.element.scrollLeft){n.table.rowManager.scrollHorizontal(e);n.table.columnManager.scrollHorizontal(e)}});g=!1;b=function(){if(g){clearTimeout(g)}g=setTimeout(function(){s(m.value)},r.table.options.headerFilterLiveFilterDelay)};t.modules.filter.headerElement=m;t.modules.filter.attrType=m.hasAttribute("type")?m.getAttribute("type").toLowerCase():"";t.modules.filter.tagType=m.tagName.toLowerCase();if(!1!==t.definition.headerFilterLiveFilter){if(!("autocomplete"===t.definition.headerFilter||"tickCross"===t.definition.headerFilter||("autocomplete"===t.definition.editor||"tickCross"===t.definition.editor)&&!0===t.definition.headerFilter)){m.addEventListener("keyup",b);m.addEventListener("search",b);if("number"==t.modules.filter.attrType){m.addEventListener("change",function(){s(m.value)})}if("text"==t.modules.filter.attrType&&"ie"!==this.table.browser){m.setAttribute("type","search")}}if("input"==t.modules.filter.tagType||"select"==t.modules.filter.tagType||"textarea"==t.modules.filter.tagType){m.addEventListener("mousedown",function(t){t.stopPropagation()})}}u.appendChild(m);t.contentElement.appendChild(u);if(!o){r.headerFilterColumns.push(t)}}}else{console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)}}},{key:"hideHeaderFilterElements",value:function(){this.headerFilterColumns.forEach(function(e){if(e.modules.filter&&e.modules.filter.headerElement){e.modules.filter.headerElement.style.display="none"}})}},{key:"showHeaderFilterElements",value:function(){this.headerFilterColumns.forEach(function(e){if(e.modules.filter&&e.modules.filter.headerElement){e.modules.filter.headerElement.style.display=""}})}},{key:"setHeaderFilterFocus",value:function(e){if(e.modules.filter&&e.modules.filter.headerElement){e.modules.filter.headerElement.focus()}else{console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}}},{key:"getHeaderFilterValue",value:function(e){if(e.modules.filter&&e.modules.filter.headerElement){return e.modules.filter.headerElement.value}else{console.warn("Column Filter Error - No header filter set on column:",e.getField())}}},{key:"setHeaderFilterValue",value:function(e,t){if(e){if(e.modules.filter&&e.modules.filter.headerElement){this.generateHeaderFilterElement(e,t,!0);e.modules.filter.success(t)}else{console.warn("Column Filter Error - No header filter set on column:",e.getField())}}}},{key:"reloadHeaderFilter",value:function(e){if(e){if(e.modules.filter&&e.modules.filter.headerElement){this.generateHeaderFilterElement(e,e.modules.filter.value,!0)}else{console.warn("Column Filter Error - No header filter set on column:",e.getField())}}}},{key:"refreshFilter",value:function(){if(this.tableInitialized){if("remote"===this.table.options.filterMode){this.reloadData()}else{this.refreshData()}}}},{key:"trackChanges",value:function(){this.changed=!0;this.dispatch("filter-changed")}},{key:"hasChanged",value:function(){var e=this.changed;this.changed=!1;return e}},{key:"setFilter",value:function(e,t,l,o){this.filterList=[];if(!Array.isArray(e)){e=[{field:e,type:t,value:l,params:o}]}this.addFilter(e)}},{key:"addFilter",value:function(e,t,l,o){var a=this;if(!Array.isArray(e)){e=[{field:e,type:t,value:l,params:o}]}e.forEach(function(e){e=a.findFilter(e);if(e){a.filterList.push(e);a.changed=!0}})}},{key:"findFilter",value:function(e){var t;if(Array.isArray(e)){return this.findSubFilters(e)}var l=!1;if("function"==typeof e.field){l=function(t){return e.field(t,e.type||{})}}else{if(n.filters[e.type]){t=this.table.columnManager.getColumnByField(e.field);if(t){l=function(l){return n.filters[e.type](e.value,t.getFieldValue(l),l,e.params||{})}}else{l=function(t){return n.filters[e.type](e.value,t[e.field],t,e.params||{})}}}else{console.warn("Filter Error - No such filter type found, ignoring: ",e.type)}}e.func=l;return e.func?e:!1}},{key:"findSubFilters",value:function(e){var t=this,l=[];e.forEach(function(e){e=t.findFilter(e);if(e){l.push(e)}});return l.length?l:!1}},{key:"getFilters",value:function(e,t){var l=[];if(e){l=this.getHeaderFilters()}if(t){l.forEach(function(e){if("function"==typeof e.type){e.type="function"}})}l=l.concat(this.filtersToArray(this.filterList,t));return l}},{key:"filtersToArray",value:function(e,t){var l=this,o=[];e.forEach(function(e){var a;if(Array.isArray(e)){o.push(l.filtersToArray(e,t))}else{a={field:e.field,type:e.type,value:e.value};if(t){if("function"==typeof a.type){a.type="function"}}o.push(a)}});return o}},{key:"getHeaderFilters",value:function(){var e=[];for(var t in this.headerFilters){e.push({field:t,type:this.headerFilters[t].type,value:this.headerFilters[t].value})}return e}},{key:"removeFilter",value:function(t,l,o){var a=this;if(!Array.isArray(t)){t=[{field:t,type:l,value:o}]}t.forEach(function(t){var l=-1;if("object"==e(t.field)){l=a.filterList.findIndex(function(e){return t===e})}else{l=a.filterList.findIndex(function(e){return t.field===e.field&&t.type===e.type&&t.value===e.value})}if(-1<l){a.filterList.splice(l,1)}else{console.warn("Filter Error - No matching filter type found, ignoring: ",t.type)}});this.trackChanges()}},{key:"clearFilter",value:function(e){this.filterList=[];if(e){this.clearHeaderFilter()}this.trackChanges()}},{key:"clearHeaderFilter",value:function(){var e=this;this.headerFilters={};this.prevHeaderFilterChangeCheck="{}";this.headerFilterColumns.forEach(function(t){if("undefined"!=typeof t.modules.filter.value){delete t.modules.filter.value}t.modules.filter.prevSuccess=void 0;e.reloadHeaderFilter(t)});this.trackChanges()}},{key:"search",value:function(e,t,l,o){var a=this,n=[],r=[];if(!Array.isArray(t)){t=[{field:t,type:l,value:o}]}t.forEach(function(e){e=a.findFilter(e);if(e){r.push(e)}});this.table.rowManager.rows.forEach(function(t){var l=!0;r.forEach(function(e){if(!a.filterRecurse(e,t.getData())){l=!1}});if(l){n.push("data"===e?t.getData("data"):t.getComponent())}});return n}},{key:"filter",value:function(e){var t=this,l=[],o=[];if(this.subscribedExternal("dataFiltering")){this.dispatchExternal("dataFiltering",this.getFilters())}if("remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)){e.forEach(function(e){if(t.filterRow(e)){l.push(e)}})}else{l=e.slice(0)}if(this.subscribedExternal("dataFiltered")){l.forEach(function(e){o.push(e.getComponent())});this.dispatchExternal("dataFiltered",this.getFilters(),o)}return l}},{key:"filterRow",value:function(e){var t=this,l=!0,o=e.getData();this.filterList.forEach(function(e){if(!t.filterRecurse(e,o)){l=!1}});for(var a in this.headerFilters){if(!this.headerFilters[a].func(o)){l=!1}}return l}},{key:"filterRecurse",value:function(e,t){var l=this,o=!1;if(Array.isArray(e)){e.forEach(function(e){if(l.filterRecurse(e,t)){o=!0}})}else{o=e.func(t)}return o}}]);return n}(se);Te.moduleName="filter";Te.filters={"=":function(e,t){return t==e?!0:!1},"<":function(e,t){return t<e?!0:!1},"<=":function(e,t){return t<=e?!0:!1},">":function(e,t){return t>e?!0:!1},">=":function(e,t){return t>=e?!0:!1},"!=":function(e,t){return t!=e?!0:!1},regex:function(e,t){if("string"==typeof e){e=new RegExp(e)}return e.test(t)},like:function(e,t){if(null===e||"undefined"==typeof e){return t===e?!0:!1}else{if("undefined"!=typeof t&&null!==t){return-1<(t+"").toLowerCase().indexOf(e.toLowerCase())}else{return!1}}},keywords:function e(t,l,o,a){var e=t.toLowerCase().split("undefined"==typeof a.separator?" ":a.separator),n=((null===l||"undefined"==typeof l?"":l)+"").toLowerCase(),r=[];e.forEach(function(e){if(n.includes(e)){r.push(!0)}});return a.matchAll?r.length===e.length:!!r.length},starts:function(e,t){if(null===e||"undefined"==typeof e){return t===e?!0:!1}else{if("undefined"!=typeof t&&null!==t){return(t+"").toLowerCase().startsWith(e.toLowerCase())}else{return!1}}},ends:function(e,t){if(null===e||"undefined"==typeof e){return t===e?!0:!1}else{if("undefined"!=typeof t&&null!==t){return(t+"").toLowerCase().endsWith(e.toLowerCase())}else{return!1}}},in:function(e,t){if(Array.isArray(e)){return e.length?-1<e.indexOf(t):!0}else{console.warn("Filter Error - filter value is not an array:",e);return!1}}};function z(t,l){var o=t.getValue(),a=l.urlPrefix||"",n=l.download,r=o,s=document.createElement("a"),d;if(l.labelField){d=t.getData();r=d[l.labelField]}if(l.label){switch(e(l.label)){case"string":r=l.label;break;case"function":r=l.label(t);break;}}if(r){if(l.urlField){d=t.getData();o=d[l.urlField]}if(l.url){switch(e(l.url)){case"string":o=l.url;break;case"function":o=l.url(t);break;}}s.setAttribute("href",a+o);if(l.target){s.setAttribute("target",l.target)}if(l.download){if("function"==typeof n){n=n(t)}else{n=!0===n?"":n}s.setAttribute("download",n)}s.innerHTML=this.emptyToSpace(this.sanitizeHTML(r));return s}else{return"&nbsp;"}}function P(t,l){var o=document.createElement("img"),a=t.getValue();if(l.urlPrefix){a=l.urlPrefix+t.getValue()}if(l.urlSuffix){a=a+l.urlSuffix}o.setAttribute("src",a);switch(e(l.height)){case"number":o.style.height=l.height+"px";break;case"string":o.style.height=l.height;break;}switch(e(l.width)){case"number":o.style.width=l.width+"px";break;case"string":o.style.width=l.width;break;}o.addEventListener("load",function(){t.getRow().normalizeHeight()});return o}function A(t,l){var o=this.sanitizeHTML(t.getValue())||0,a=document.createElement("span"),n=l&&l.max?l.max:100,r=l&&l.min?l.min:0,s=l&&"undefined"!=typeof l.color?l.color:["red","orange","green"],d="#666666",u,c;if(isNaN(o)||"undefined"==typeof t.getValue()){return}a.classList.add("tabulator-traffic-light");c=parseFloat(o)<=n?parseFloat(o):n;c=parseFloat(c)>=r?parseFloat(c):r;u=(n-r)/100;c=Math.round((c-r)/u);switch(e(s)){case"string":d=s;break;case"function":d=s(o);break;case"object":if(Array.isArray(s)){var m=100/s.length,p=Math.floor(c/m);p=Math.min(p,s.length-1);p=Math.max(p,0);d=s[p];break}}a.style.backgroundColor=d;return a}function _(t,l,o){var a=this.sanitizeHTML(t.getValue())||0,n=t.getElement(),r=l&&l.max?l.max:100,s=l&&l.min?l.min:0,d=l&&l.legendAlign?l.legendAlign:"center",u,c,m,p,g;c=parseFloat(a)<=r?parseFloat(a):r;c=parseFloat(c)>=s?parseFloat(c):s;u=(r-s)/100;c=Math.round((c-s)/u);switch(e(l.color)){case"string":m=l.color;break;case"function":m=l.color(a);break;case"object":if(Array.isArray(l.color)){var b=100/l.color.length,h=Math.floor(c/b);h=Math.min(h,l.color.length-1);h=Math.max(h,0);m=l.color[h];break}default:m="#2DC214";}switch(e(l.legend)){case"string":p=l.legend;break;case"function":p=l.legend(a);break;case"boolean":p=a;break;default:p=!1;}switch(e(l.legendColor)){case"string":g=l.legendColor;break;case"function":g=l.legendColor(a);break;case"object":if(Array.isArray(l.legendColor)){var b=100/l.legendColor.length,h=Math.floor(c/b);h=Math.min(h,l.legendColor.length-1);h=Math.max(h,0);g=l.legendColor[h]}break;default:g="#000";}n.style.minWidth="30px";n.style.position="relative";n.setAttribute("aria-label",c);var v=document.createElement("div");v.style.display="inline-block";v.style.position="absolute";v.style.width=c+"%";v.style.backgroundColor=m;v.style.height="100%";v.setAttribute("data-max",r);v.setAttribute("data-min",s);var f=document.createElement("div");f.style.position="relative";f.style.width="100%";f.style.height="100%";if(p){var y=document.createElement("div");y.style.position="absolute";y.style.top=0;y.style.left=0;y.style.textAlign=d;y.style.width="100%";y.style.color=g;y.innerHTML=p}o(function(){if(!(t instanceof I)){var e=document.createElement("div");e.style.position="absolute";e.style.top="4px";e.style.bottom="4px";e.style.left="4px";e.style.right="4px";n.appendChild(e);n=e}n.appendChild(f);f.appendChild(v);if(p){f.appendChild(y)}});return""}var Me=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.registerColumnOption("formatter");l.registerColumnOption("formatterParams");l.registerColumnOption("formatterPrint");l.registerColumnOption("formatterPrintParams");l.registerColumnOption("formatterClipboard");l.registerColumnOption("formatterClipboardParams");l.registerColumnOption("formatterHtmlOutput");l.registerColumnOption("formatterHtmlOutputParams");l.registerColumnOption("titleFormatter");l.registerColumnOption("titleFormatterParams");return l}o(n,[{key:"initialize",value:function(){this.subscribe("cell-format",this.formatValue.bind(this));this.subscribe("cell-rendered",this.cellRendered.bind(this));this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("column-format",this.formatHeader.bind(this))}},{key:"initializeColumn",value:function(e){e.modules.format=this.lookupFormatter(e,"");if("undefined"!=typeof e.definition.formatterPrint){e.modules.format.print=this.lookupFormatter(e,"Print")}if("undefined"!=typeof e.definition.formatterClipboard){e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")}if("undefined"!=typeof e.definition.formatterHtmlOutput){e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput")}}},{key:"lookupFormatter",value:function(t,l){var o={params:t.definition["formatter"+l+"Params"]||{}},a=t.definition["formatter"+l];switch(e(a)){case"string":if(n.formatters[a]){o.formatter=n.formatters[a]}else{console.warn("Formatter Error - No such formatter found: ",a);o.formatter=n.formatters.plaintext}break;case"function":o.formatter=a;break;default:o.formatter=n.formatters.plaintext;break;}return o}},{key:"cellRendered",value:function(e){if(e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered){e.modules.format.renderedCallback();e.modules.format.rendered=!0}}},{key:"formatHeader",value:function(e,t,l){var o,a,n,r;if(e.definition.titleFormatter){o=this.getFormatter(e.definition.titleFormatter);n=function(t){e.titleFormatterRendered=t};r={getValue:function(){return t},getElement:function(){return l}};a=e.definition.titleFormatterParams||{};a="function"==typeof a?a():a;return o.call(this,r,a,n)}else{return t}}},{key:"formatValue",value:function(e){var t=e.getComponent(),l="function"==typeof e.column.modules.format.params?e.column.modules.format.params(t):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,t,l,function(t){if(!e.modules.format){e.modules.format={}}e.modules.format.renderedCallback=t;e.modules.format.rendered=!1})}},{key:"formatExportValue",value:function(e,t){var l=e.column.modules.format[t],o;if(l){var a=function(t){if(!e.modules.format){e.modules.format={}}e.modules.format.renderedCallback=t;e.modules.format.rendered=!1};o="function"==typeof l.params?l.params(component):l.params;return l.formatter.call(this,e.getComponent(),o,a)}else{return this.formatValue(e)}}},{key:"sanitizeHTML",value:function(e){if(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return(e+"").replace(/[&<>"'`=\/]/g,function(e){return t[e]})}else{return e}}},{key:"emptyToSpace",value:function(e){return null===e||"undefined"==typeof e||""===e?"&nbsp;":e}},{key:"getFormatter",value:function(t){var t;switch(e(t)){case"string":if(n.formatters[t]){t=n.formatters[t]}else{console.warn("Formatter Error - No such formatter found: ",t);t=n.formatters.plaintext}break;case"function":t=t;break;default:t=n.formatters.plaintext;break;}return t}}]);return n}(se);Me.moduleName="format";Me.formatters={plaintext:function(e){return this.emptyToSpace(this.sanitizeHTML(e.getValue()))},html:function(e){return e.getValue()},textarea:function(e){e.getElement().style.whiteSpace="pre-wrap";return this.emptyToSpace(this.sanitizeHTML(e.getValue()))},money:function(e,t){var l=parseFloat(e.getValue()),o="",a,n,r,s,d=t.decimal||".",u=t.thousand||",",c=t.negativeSign||"-",m=t.symbol||"",p=!!t.symbolAfter,g="undefined"!=typeof t.precision?t.precision:2;if(isNaN(l)){return this.emptyToSpace(this.sanitizeHTML(e.getValue()))}if(0>l){l=Math.abs(l);o=c}a=!1!==g?l.toFixed(g):l;a=(a+"").split(".");n=a[0];r=1<a.length?d+a[1]:"";s=/(\d+)(\d{3})/;while(s.test(n)){n=n.replace(s,"$1"+u+"$2")}return p?o+n+r+m:o+m+n+r},link:z,image:P,tickCross:function(e,t){var l=e.getValue(),o=e.getElement(),a=t.allowEmpty,n=t.allowTruthy,r="undefined"!=typeof t.tickElement?t.tickElement:"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>",s="undefined"!=typeof t.crossElement?t.crossElement:"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>";if(n&&l||!0===l||"true"===l||"True"===l||1===l||"1"===l){o.setAttribute("aria-checked",!0);return r||""}else{if(a&&("null"===l||""===l||null===l||"undefined"==typeof l)){o.setAttribute("aria-checked","mixed");return""}else{o.setAttribute("aria-checked",!1);return s||""}}},datetime:function(e,t){var l=window.DateTime||luxon.DateTime,o=t.inputFormat||"yyyy-MM-dd HH:mm:ss",a=t.outputFormat||"dd/MM/yyyy HH:mm:ss",n="undefined"!=typeof t.invalidPlaceholder?t.invalidPlaceholder:"",r=e.getValue();if("undefined"!=typeof l){var s=(window.DateTime||luxon.DateTime).fromFormat(r,o);if(s.isValid){if(t.timezone){s=s.shiftTimezone(t.timezone)}return s.toFormat(a)}else{if(!0===n){return r}else if("function"==typeof n){return n(r)}else{return n}}}else{console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}},datetimediff:function(e,t){var l=window.DateTime||luxon.DateTime,o=t.inputFormat||"yyyy-MM-dd HH:mm:ss",a="undefined"!=typeof t.invalidPlaceholder?t.invalidPlaceholder:"",n="undefined"!=typeof t.suffix?t.suffix:!1,r="undefined"!=typeof t.unit?t.unit:"days",s="undefined"!=typeof t.humanize?t.humanize:!1,d="undefined"!=typeof t.date?t.date:l.now(),u=e.getValue();if("undefined"!=typeof l){var c=l.fromFormat(u,o);if(c.isValid){if(s);else{return parseInt(c.diff(d,r)[r])+(n?" "+n:"")}}else{if(!0===a){return u}else if("function"==typeof a){return a(u)}else{return a}}}else{console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}},lookup:function(e,t){var l=e.getValue();if("undefined"==typeof t[l]){console.warn("Missing display value for "+l);return l}return t[l]},star:function(e,t){var l=e.getValue(),o=e.getElement(),a=t&&t.stars?t.stars:5,n=document.createElement("span"),r=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.verticalAlign="middle";r.setAttribute("width","14");r.setAttribute("height","14");r.setAttribute("viewBox","0 0 512 512");r.setAttribute("xml:space","preserve");r.style.padding="0 1px";l=l&&!isNaN(l)?parseInt(l):0;l=Math.max(0,Math.min(l,a));for(var s=1,d;s<=a;s++){d=r.cloneNode(!0);d.innerHTML=s<=l?"<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>":"<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>";n.appendChild(d)}o.style.whiteSpace="nowrap";o.style.overflow="hidden";o.style.textOverflow="ellipsis";o.setAttribute("aria-label",l);return n},traffic:A,progress:_,color:function(e){e.getElement().style.backgroundColor=this.sanitizeHTML(e.getValue());return""},buttonTick:function(){return"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>"},buttonCross:function(){return"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>"},rownum:function(e){return this.table.rowManager.activeRows.indexOf(e.getRow()._getSelf())+1},handle:function(e){e.getElement().classList.add("tabulator-row-handle");return"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(e){var l=document.createElement("div"),o=e.getRow()._row.modules.responsiveLayout;l.classList.add("tabulator-responsive-collapse-toggle");l.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>";e.getElement().classList.add("tabulator-row-handle");function t(e){var t=o.element;o.open=e;if(t){if(o.open){l.classList.add("open");t.style.display=""}else{l.classList.remove("open");t.style.display="none"}}}l.addEventListener("click",function(l){l.stopImmediatePropagation();t(!o.open)});t(o.open);return l},rowSelection:function(e,t){var l=this,o=document.createElement("input");o.type="checkbox";if(this.table.modExists("selectRow",!0)){o.addEventListener("click",function(t){t.stopPropagation()});if("function"==typeof e.getRow){var a=e.getRow();if(a instanceof J){o.addEventListener("change",function(){a.toggleSelect()});o.checked=a.isSelected&&a.isSelected();this.table.modules.selectRow.registerRowSelectCheckbox(a,o)}else{o=""}}else{o.addEventListener("change",function(){if(l.table.modules.selectRow.selectedRows.length){l.table.deselectRow()}else{l.table.selectRow(t.rowRange)}});this.table.modules.selectRow.registerHeaderSelectCheckbox(o)}}return o}};var Le=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.leftColumns=[];o.rightColumns=[];o.leftMargin=0;o.rightMargin=0;o.rightPadding=0;o.initializationMode="left";o.active=!1;o.scrollEndTimer=!1;o.registerColumnOption("frozen");return o}o(l,[{key:"reset",value:function(){this.initializationMode="left";this.leftColumns=[];this.rightColumns=[];this.leftMargin=0;this.rightMargin=0;this.rightMargin=0;this.active=!1;this.table.columnManager.headersElement.style.marginLeft=0;this.table.columnManager.element.style.paddingRight=0}},{key:"initialize",value:function(){this.subscribe("cell-layout",this.layoutCell.bind(this));this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("column-width",this.layout.bind(this));this.subscribe("row-layout-before",this.layoutRow.bind(this));this.subscribe("table-layout",this.layout.bind(this));this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this));this.subscribe("columns-loading",this.reset.bind(this));this.subscribe("table-redraw",this.layout.bind(this))}},{key:"layoutCell",value:function(e){this.layoutElement(e.element,e.column)}},{key:"initializeColumn",value:function(e){var t={margin:0,edge:!1};if(!e.isGroup){if(this.frozenCheck(e)){t.position=this.initializationMode;if("left"==this.initializationMode){this.leftColumns.push(e)}else{this.rightColumns.unshift(e)}this.active=!0;e.modules.frozen=t}else{this.initializationMode="right"}}}},{key:"frozenCheck",value:function(e){if(e.parent.isGroup&&e.definition.frozen){console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups")}if(e.parent.isGroup){return this.frozenCheck(e.parent)}else{return e.definition.frozen}}},{key:"scrollHorizontal",value:function(){var e=this,t;if(this.active){clearTimeout(this.scrollEndTimer);this.scrollEndTimer=setTimeout(function(){e.layout()},100);t=this.table.rowManager.getVisibleRows();this.calcMargins();this.layoutColumnPosition();this.layoutCalcRows();t.forEach(function(t){if("row"===t.type){e.layoutRow(t)}});this.table.rowManager.tableElement.style.marginRight=this.rightMargin}}},{key:"calcMargins",value:function(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px";this.table.columnManager.headersElement.style.marginLeft=this.leftMargin;this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px";this.table.columnManager.element.style.paddingRight=this.rightMargin;this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}},{key:"layoutCalcRows",value:function(){if(this.table.modExists("columnCalcs")){if(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow){this.layoutRow(this.table.modules.columnCalcs.topRow)}if(this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow){this.layoutRow(this.table.modules.columnCalcs.botRow)}if(this.table.modExists("groupRows")){this.layoutGroupCalcs(this.table.modules.groupRows.getGroups())}}}},{key:"layoutGroupCalcs",value:function(e){var t=this;e.forEach(function(e){if(e.calcs.top){t.layoutRow(e.calcs.top)}if(e.calcs.bottom){t.layoutRow(e.calcs.bottom)}if(e.groupList&&e.groupList.length){t.layoutGroupCalcs(e.groupList&&e.groupList)}})}},{key:"layoutColumnPosition",value:function(e){var t=this,l=[];this.leftColumns.forEach(function(o,a){o.modules.frozen.margin=t._calcSpace(t.leftColumns,a)+t.table.columnManager.scrollLeft+"px";if(a==t.leftColumns.length-1){o.modules.frozen.edge=!0}else{o.modules.frozen.edge=!1}if(o.parent.isGroup){var n=t.getColGroupParentElement(o);if(!l.includes(n)){t.layoutElement(n,o);l.push(n)}if(o.modules.frozen.edge){n.classList.add("tabulator-frozen-"+o.modules.frozen.position)}}else{t.layoutElement(o.getElement(),o)}if(e){o.cells.forEach(function(e){t.layoutElement(e.getElement(!0),o)})}});this.rightColumns.forEach(function(l,o){l.modules.frozen.margin=t.rightPadding-t._calcSpace(t.rightColumns,o+1)+"px";if(o==t.rightColumns.length-1){l.modules.frozen.edge=!0}else{l.modules.frozen.edge=!1}if(l.parent.isGroup){t.layoutElement(t.getColGroupParentElement(l),l)}else{t.layoutElement(l.getElement(),l)}if(e){l.cells.forEach(function(e){t.layoutElement(e.getElement(!0),l)})}})}},{key:"getColGroupParentElement",value:function(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}},{key:"layout",value:function(){var e=this;if(this.active){this.calcMargins();this.table.rowManager.getDisplayRows().forEach(function(t){if("row"===t.type){e.layoutRow(t)}});this.layoutCalcRows();this.layoutColumnPosition(!0);this.table.rowManager.tableElement.style.marginRight=this.rightMargin}}},{key:"layoutRow",value:function(e){var t=this,l=e.getElement();l.style.paddingLeft=this.leftMargin;this.leftColumns.forEach(function(l){var o=e.getCell(l);if(o){t.layoutElement(o.getElement(!0),l)}});this.rightColumns.forEach(function(l){var o=e.getCell(l);if(o){t.layoutElement(o.getElement(!0),l)}})}},{key:"layoutElement",value:function(e,t){if(t.modules.frozen){e.style.position="absolute";e.style.left=t.modules.frozen.margin;e.classList.add("tabulator-frozen");if(t.modules.frozen.edge){e.classList.add("tabulator-frozen-"+t.modules.frozen.position)}}}},{key:"_calcSpace",value:function(e,t){for(var l=0,o=0;o<t;o++){if(e[o].visible){l+=e[o].getWidth()}}return l}}]);return l}(se);Le.moduleName="frozenColumns";var De=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.topElement=document.createElement("div");o.rows=[];o.registerComponentFunction("row","freeze",o.freezeRow.bind(d(o)));o.registerComponentFunction("row","unfreeze",o.unfreezeRow.bind(d(o)));o.registerComponentFunction("row","isFrozen",o.isRowFrozen.bind(d(o)));return o}o(l,[{key:"initialize",value:function(){this.rows=[];this.topElement.classList.add("tabulator-frozen-rows-holder");this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling);this.subscribe("row-deleting",this.detachRow.bind(this));this.registerDisplayHandler(this.getRows.bind(this),10)}},{key:"isRowFrozen",value:function(e){var t=this.rows.indexOf(e);return-1<t}},{key:"isFrozen",value:function(){return!!this.rows.length}},{key:"getRows",value:function(e){var t=e.slice(0);this.rows.forEach(function(e){var l=t.indexOf(e);if(-1<l){t.splice(l,1)}});return t}},{key:"freezeRow",value:function(e){if(!e.modules.frozen){e.modules.frozen=!0;this.topElement.appendChild(e.getElement());e.initialize();e.normalizeHeight();this.table.rowManager.adjustTableSize();this.rows.push(e);this.refreshData(!1,"display");this.styleRows()}else{console.warn("Freeze Error - Row is already frozen")}}},{key:"unfreezeRow",value:function(e){this.rows.indexOf(e);if(e.modules.frozen){e.modules.frozen=!1;this.detachRow(e);this.table.rowManager.adjustTableSize();this.refreshData(!1,"display");if(this.rows.length){this.styleRows()}}else{console.warn("Freeze Error - Row is already unfrozen")}}},{key:"detachRow",value:function(e){var t=this.rows.indexOf(e);if(-1<t){var l=e.getElement();if(l.parentNode){l.parentNode.removeChild(l)}this.rows.splice(t,1)}}},{key:"styleRows",value:function(){var e=this;this.rows.forEach(function(t,l){e.table.rowManager.styleRow(t,l)})}}]);return l}(se);De.moduleName="frozenRows";var Fe=function(){function e(l){t(this,e);this._group=l;this.type="GroupComponent";return new Proxy(this,{get:function(e,t){if("undefined"!=typeof e[t]){return e[t]}else{return e._group.table.componentFunctionBinder.handle("row",e._group,t)}}})}o(e,[{key:"getKey",value:function(){return this._group.key}},{key:"getField",value:function(){return this._group.field}},{key:"getElement",value:function(){return this._group.element}},{key:"getRows",value:function(){return this._group.getRows(!0)}},{key:"getSubGroups",value:function(){return this._group.getSubGroups(!0)}},{key:"getParentGroup",value:function(){return this._group.parent?this._group.parent.getComponent():!1}},{key:"isVisible",value:function(){return this._group.visible}},{key:"show",value:function(){this._group.show()}},{key:"hide",value:function(){this._group.hide()}},{key:"toggle",value:function(){this._group.toggleVisibility()}},{key:"_getSelf",value:function(){return this._group}},{key:"getTable",value:function(){return this._group.groupManager.table}}]);return e}(),Se=function(){function e(l,o,a,n,r,s,d){t(this,e);this.groupManager=l;this.parent=o;this.key=n;this.level=a;this.field=r;this.hasSubGroups=a<l.groupIDLookups.length-1;this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow;this.type="group";this.old=d;this.rows=[];this.groups=[];this.groupList=[];this.generator=s;this.elementContents=!1;this.height=0;this.outerHeight=0;this.initialized=!1;this.calcs={};this.initialized=!1;this.modules={};this.arrowElement=!1;this.visible=d?d.visible:"undefined"!=typeof l.startOpen[a]?l.startOpen[a]:l.startOpen[0];this.component=null;this.createElements();this.addBindings();this.createValueGroups()}o(e,[{key:"wipe",value:function(){if(this.groupList.length){this.groupList.forEach(function(e){e.wipe()})}else{this.element=!1;this.arrowElement=!1;this.elementContents=!1}}},{key:"createElements",value:function(){var e=document.createElement("div");e.classList.add("tabulator-arrow");this.element=document.createElement("div");this.element.classList.add("tabulator-row");this.element.classList.add("tabulator-group");this.element.classList.add("tabulator-group-level-"+this.level);this.element.setAttribute("role","rowgroup");this.arrowElement=document.createElement("div");this.arrowElement.classList.add("tabulator-group-toggle");this.arrowElement.appendChild(e);if(!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")){this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}}},{key:"createValueGroups",value:function(){var e=this,t=this.level+1;if(this.groupManager.allowedValues&&this.groupManager.allowedValues[t]){this.groupManager.allowedValues[t].forEach(function(l){e._createGroup(l,t)})}}},{key:"addBindings",value:function(){var t=this,l,o,a,n;if((this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")){this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this)}if(this.groupManager.table.options.groupTap){a=!1;this.element.addEventListener("touchstart",function(){a=!0},{passive:!0});this.element.addEventListener("touchend",function(l){if(a){t.groupManager.table.options.groupTap(l,t.getComponent())}a=!1})}if(this.groupManager.table.options.groupDblTap){l=null;this.element.addEventListener("touchend",function(o){if(l){clearTimeout(l);l=null;t.groupManager.table.options.groupDblTap(o,t.getComponent())}else{l=setTimeout(function(){clearTimeout(l);l=null},300)}})}if(this.groupManager.table.options.groupTapHold){o=null;this.element.addEventListener("touchstart",function(l){clearTimeout(o);o=setTimeout(function(){clearTimeout(o);o=null;a=!1;t.groupManager.table.options.groupTapHold(l,t.getComponent())},1e3)},{passive:!0});this.element.addEventListener("touchend",function(){clearTimeout(o);o=null})}if(this.groupManager.table.options.groupToggleElement){n="arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element;n.addEventListener("click",function(l){l.stopPropagation();l.stopImmediatePropagation();t.toggleVisibility()})}}},{key:"_createGroup",value:function(t,l){var o=l+"_"+t,a=new e(this.groupManager,this,l,t,this.groupManager.groupIDLookups[l].field,this.groupManager.headerGenerator[l]||this.groupManager.headerGenerator[0],this.old?this.old.groups[o]:!1);this.groups[o]=a;this.groupList.push(a)}},{key:"_addRowToGroup",value:function(e){var t=this.level+1;if(this.hasSubGroups){var l=this.groupManager.groupIDLookups[t].func(e.getData()),o=t+"_"+l;if(this.groupManager.allowedValues&&this.groupManager.allowedValues[t]){if(this.groups[o]){this.groups[o].addRow(e)}}else{if(!this.groups[o]){this._createGroup(l,t)}this.groups[o].addRow(e)}}}},{key:"_addRow",value:function(e){this.rows.push(e);e.modules.group=this}},{key:"insertRow",value:function(e,t,l){var o=this.conformRowData({});e.updateData(o);var a=this.rows.indexOf(t);if(-1<a){if(l){this.rows.splice(a+1,0,e)}else{this.rows.splice(a,0,e)}}else{if(l){this.rows.push(e)}else{this.rows.unshift(e)}}e.modules.group=this;this.generateGroupHeaderContents();if(this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs){this.groupManager.table.modules.columnCalcs.recalcGroup(this)}this.groupManager.updateGroupRows(!0)}},{key:"scrollHeader",value:function(e){this.arrowElement.style.marginLeft=e;this.groupList.forEach(function(t){t.scrollHeader(e)})}},{key:"getRowIndex",value:function(){}},{key:"conformRowData",value:function(e){if(this.field){e[this.field]=this.key}else{console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function")}if(this.parent){e=this.parent.conformRowData(e)}return e}},{key:"removeRow",value:function(e){var t=this.rows.indexOf(e),l=e.getElement();if(-1<t){this.rows.splice(t,1)}if(!this.groupManager.table.options.groupValues&&!this.rows.length){if(this.parent){this.parent.removeGroup(this)}else{this.groupManager.removeGroup(this)}this.groupManager.updateGroupRows(!0)}else{if(l.parentNode){l.parentNode.removeChild(l)}this.generateGroupHeaderContents();if(this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs){this.groupManager.table.modules.columnCalcs.recalcGroup(this)}}}},{key:"removeGroup",value:function(e){var t=e.level+"_"+e.key,l;if(this.groups[t]){delete this.groups[t];l=this.groupList.indexOf(e);if(-1<l){this.groupList.splice(l,1)}if(!this.groupList.length){if(this.parent){this.parent.removeGroup(this)}else{this.groupManager.removeGroup(this)}}}}},{key:"getHeadersAndRows",value:function(e){var t=[this];this._visSet();if(this.visible){if(this.groupList.length){this.groupList.forEach(function(l){t=t.concat(l.getHeadersAndRows(e))})}else{if(!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()){if(this.calcs.top){this.calcs.top.detachElement();this.calcs.top.deleteCells()}this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);t.push(this.calcs.top)}t=t.concat(this.rows);if(!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){if(this.calcs.bottom){this.calcs.bottom.detachElement();this.calcs.bottom.deleteCells()}this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);t.push(this.calcs.bottom)}}}else{if(!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs){if(this.groupManager.table.modExists("columnCalcs")){if(!e&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()){if(this.calcs.top){this.calcs.top.detachElement();this.calcs.top.deleteCells()}if(this.groupManager.table.options.groupClosedShowCalcs){this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);t.push(this.calcs.top)}}if(!e&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){if(this.calcs.bottom){this.calcs.bottom.detachElement();this.calcs.bottom.deleteCells()}if(this.groupManager.table.options.groupClosedShowCalcs){this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);t.push(this.calcs.bottom)}}}}}return t}},{key:"getData",value:function(e,t){var l=[];this._visSet();if(!e||e&&this.visible){this.rows.forEach(function(e){l.push(e.getData(t||"data"))})}return l}},{key:"getRowCount",value:function(){var e=0;if(this.groupList.length){this.groupList.forEach(function(t){e+=t.getRowCount()})}else{e=this.rows.length}return e}},{key:"toggleVisibility",value:function(){if(this.visible){this.hide()}else{this.show()}}},{key:"hide",value:function(){this.visible=!1;if("classic"==this.groupManager.table.rowManager.getRenderMode()&&!this.groupManager.table.options.pagination){this.element.classList.remove("tabulator-group-visible");if(this.groupList.length){this.groupList.forEach(function(e){var t=e.getHeadersAndRows();t.forEach(function(e){e.detachElement()})})}else{this.rows.forEach(function(e){var t=e.getElement();t.parentNode.removeChild(t)})}this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex());this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}else{this.groupManager.updateGroupRows(!0)}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}},{key:"show",value:function(){this.visible=!0;if("classic"==this.groupManager.table.rowManager.getRenderMode()&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var e=this.getElement();if(this.groupList.length){this.groupList.forEach(function(t){var l=t.getHeadersAndRows();l.forEach(function(t){var l=t.getElement();e.parentNode.insertBefore(l,e.nextSibling);t.initialize();e=l})})}else{this.rows.forEach(function(t){var l=t.getElement();e.parentNode.insertBefore(l,e.nextSibling);t.initialize();e=l})}this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex());this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}else{this.groupManager.updateGroupRows(!0)}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}},{key:"_visSet",value:function(){var e=[];if("function"==typeof this.visible){this.rows.forEach(function(t){e.push(t.getData())});this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent())}}},{key:"getRowGroup",value:function(e){var t=!1;if(this.groupList.length){this.groupList.forEach(function(l){var o=l.getRowGroup(e);if(o){t=o}})}else{if(this.rows.find(function(t){return t===e})){t=this}}return t}},{key:"getSubGroups",value:function(e){var t=[];this.groupList.forEach(function(l){t.push(e?l.getComponent():l)});return t}},{key:"getRows",value:function(e){var t=[];this.rows.forEach(function(l){t.push(e?l.getComponent():l)});return t}},{key:"generateGroupHeaderContents",value:function(){var e=[];this.rows.forEach(function(t){e.push(t.getData())});this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}if("string"==typeof this.elementContents){this.element.innerHTML=this.elementContents}else{this.element.appendChild(this.elementContents)}this.element.insertBefore(this.arrowElement,this.element.firstChild)}},{key:"getPath",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];e.unshift(this.key);if(this.parent){this.parent.getPath(e)}return e}},{key:"getElement",value:function(){this.addBindingsd=!1;this._visSet();if(this.visible){this.element.classList.add("tabulator-group-visible")}else{this.element.classList.remove("tabulator-group-visible")}for(var e=0;e<this.element.childNodes.length;++e){this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e])}this.generateGroupHeaderContents();return this.element}},{key:"detachElement",value:function(){if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}}},{key:"normalizeHeight",value:function(){this.setHeight(this.element.clientHeight)}},{key:"initialize",value:function(e){if(!this.initialized||e){this.normalizeHeight();this.initialized=!0}}},{key:"reinitialize",value:function(){this.initialized=!1;this.height=0;if(j.elVisible(this.element)){this.initialize(!0)}}},{key:"setHeight",value:function(e){if(this.height!=e){this.height=e;this.outerHeight=this.element.offsetHeight}}},{key:"getHeight",value:function(){return this.outerHeight}},{key:"getGroup",value:function(){return this}},{key:"reinitializeHeight",value:function(){}},{key:"calcHeight",value:function(){}},{key:"setCellHeight",value:function(){}},{key:"clearCellHeight",value:function(){}},{key:"deinitializeHeight",value:function(){}},{key:"getComponent",value:function(){if(!this.component){this.component=new Fe(this)}return this.component}}]);return e}(),He=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.groupIDLookups=!1;o.startOpen=[function(){return!1}];o.headerGenerator=[function(){return""}];o.groupList=[];o.allowedValues=!1;o.groups={};o.displayIndex=0;o.displayHandler=o.getRows.bind(d(o));o.registerTableOption("groupBy",!1);o.registerTableOption("groupStartOpen",!0);o.registerTableOption("groupValues",!1);o.registerTableOption("groupUpdateOnCellEdit",!1);o.registerTableOption("groupHeader",!1);o.registerTableOption("groupHeaderPrint",null);o.registerTableOption("groupHeaderClipboard",null);o.registerTableOption("groupHeaderHtmlOutput",null);o.registerTableOption("groupHeaderDownload",null);o.registerTableOption("groupToggleElement","arrow");o.registerTableOption("groupClosedShowCalcs",!1);o.registerTableFunction("setGroupBy",o.setGroupBy.bind(d(o)));o.registerTableFunction("setGroupValues",o.setGroupValues.bind(d(o)));o.registerTableFunction("setGroupStartOpen",o.setGroupStartOpen.bind(d(o)));o.registerTableFunction("setGroupHeader",o.setGroupHeader.bind(d(o)));o.registerTableFunction("getGroups",o.userGetGroups.bind(d(o)));o.registerTableFunction("getGroupedData",o.userGetGroupedData.bind(d(o)));o.registerComponentFunction("row","getGroup",o.rowGetGroup.bind(d(o)));return o}o(l,[{key:"initialize",value:function(){if(this.table.options.groupBy){this.configureGroupSetup();if(this.table.options.groupUpdateOnCellEdit){this.subscribe("cell-value-updated",this.cellUpdated.bind(this));this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)}this.subscribe("row-deleting",this.rowDeleting.bind(this));this.subscribe("row-deleted",this.rowsUpdated.bind(this));this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this));this.subscribe("rows-wipe",this.wipe.bind(this));this.subscribe("rows-added",this.rowsUpdated.bind(this));this.subscribe("row-moving",this.rowMoving.bind(this));this.subscribe("row-adding-index",this.rowAddingIndex.bind(this));this.subscribe("rows-sample",this.rowSample.bind(this));this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this));this.registerDisplayHandler(this.displayHandler,20);this.initialized=!0}}},{key:"configureGroupSetup",value:function(){var e=this;if(this.table.options.groupBy){var t=this.table.options.groupBy,l=this.table.options.groupStartOpen,o=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues;if(Array.isArray(t)&&Array.isArray(o)&&t.length>o.length){console.warn("Error creating group headers, groupHeader array is shorter than groupBy array")}this.headerGenerator=[function(){return""}];this.startOpen=[function(){return!1}];this.langBind("groups|item",function(t,l){e.headerGenerator[0]=function(e,o){return("undefined"==typeof e?"":e)+"<span>("+o+" "+(1===o?t:l.groups.items)+")</span>"}});this.groupIDLookups=[];if(Array.isArray(t)||t){if(this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs){this.table.modules.columnCalcs.removeCalcs()}}else{if(this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs){var a=this.table.columnManager.getRealColumns();a.forEach(function(t){if(t.definition.topCalc){e.table.modules.columnCalcs.initializeTopRow()}if(t.definition.bottomCalc){e.table.modules.columnCalcs.initializeBottomRow()}})}}if(!Array.isArray(t)){t=[t]}t.forEach(function(t,l){var o,a;if("function"==typeof t){o=t}else{a=e.table.columnManager.getColumnByField(t);if(a){o=function(e){return a.getFieldValue(e)}}else{o=function(e){return e[t]}}}e.groupIDLookups.push({field:"function"==typeof t?!1:t,func:o,values:e.allowedValues?e.allowedValues[l]:!1})});if(l){if(!Array.isArray(l)){l=[l]}l.forEach(function(){});this.startOpen=l}if(o){this.headerGenerator=Array.isArray(o)?o:[o]}}}},{key:"rowSample",value:function(e,t){var l=this.getGroups(!1)[0];t.push(l.getRows(!1)[0]);return t}},{key:"virtualRenderFill",value:function(){var e=this.table.rowManager.tableElement,t=this.table.rowManager.getVisibleRows();t=t.filter(function(e){return"group"!==e.type});e.style.minWidth=!t.length?this.table.columnManager.getWidth()+"px":""}},{key:"rowAddingIndex",value:function(e,t,l){this.assignRowToGroup(e);var o=e.modules.group.rows;if(1<o.length){if(!t||t&&-1==o.indexOf(t)){if(l){if(o[0]!==e){t=o[0];this.table.rowManager.moveRowInArray(e.modules.group.rows,e,t,!l)}}else{if(o[o.length-1]!==e){t=o[o.length-1];this.table.rowManager.moveRowInArray(e.modules.group.rows,e,t,!l)}}}else{this.table.rowManager.moveRowInArray(e.modules.group.rows,e,t,!l)}}return t}},{key:"trackChanges",value:function(){this.dispatch("group-changed")}},{key:"setGroupBy",value:function(e){this.table.options.groupBy=e;this.configureGroupSetup();this.refreshData();this.trackChanges()}},{key:"setGroupValues",value:function(e){this.table.options.groupValues=e;this.configureGroupSetup();this.refreshData();this.trackChanges()}},{key:"setGroupStartOpen",value:function(e){this.table.options.groupStartOpen=e;this.configureGroupSetup();if(this.table.options.groupBy){this.refreshData();this.trackChanges()}else{console.warn("Grouping Update - cant refresh view, no groups have been set")}}},{key:"setGroupHeader",value:function(e){this.table.options.groupHeader=e;this.configureGroupSetup();if(this.table.options.groupBy){this.refreshData();this.trackChanges()}else{console.warn("Grouping Update - cant refresh view, no groups have been set")}}},{key:"userGetGroups",value:function(){return this.getGroups(!0)}},{key:"userGetGroupedData",value:function(){return this.table.options.groupBy?this.getGroupedData():this.getData()}},{key:"rowGetGroup",value:function(e){return e.modules.group?e.modules.group.getComponent():!1}},{key:"rowMoving",value:function(e,t,l){if(!l&&t instanceof Se){t=this.table.rowManager.prevDisplayRow(e)||t}var o=t instanceof Se?t:t.modules.group,a=e instanceof Se?e:e.modules.group;if(o===a){this.table.rowManager.moveRowInArray(o.rows,e,t,l)}else{if(a){a.removeRow(e)}o.insertRow(e,t,l)}}},{key:"rowDeleting",value:function(e){if(e.modules.group){e.modules.group.removeRow(e)}}},{key:"rowsUpdated",value:function(){this.updateGroupRows(!0)}},{key:"cellUpdated",value:function(e){this.reassignRowToGroup(e.row)}},{key:"setDisplayIndex",value:function(e){this.displayIndex=e}},{key:"getDisplayIndex",value:function(){return this.displayIndex}},{key:"getRows",value:function(e){if(this.table.options.groupBy&&this.groupIDLookups.length){this.dispatchExternal("dataGrouping");this.generateGroups(e);if(this.subscribedExternal("dataGrouped")){this.dispatchExternal("dataGrouped",this.getGroups(!0))}return this.updateGroupRows()}else{return e.slice(0)}}},{key:"getGroups",value:function(e){var t=[];this.groupList.forEach(function(l){t.push(e?l.getComponent():l)});return t}},{key:"getChildGroups",value:function(e){var t=this,l=[];if(!e){e=this}e.groupList.forEach(function(e){if(e.groupList.length){l=l.concat(t.getChildGroups(e))}else{l.push(e)}});return l}},{key:"wipe",value:function(){this.groupList.forEach(function(e){e.wipe()})}},{key:"pullGroupListData",value:function(e){var t=this,l=[];e.forEach(function(e){var o={level:0,rowCount:0,headerContent:""},a=[];if(e.hasSubGroups){a=t.pullGroupListData(e.groupList);o.level=e.level;o.rowCount=a.length-e.groupList.length;o.headerContent=e.generator(e.key,o.rowCount,e.rows,e);l.push(o);l=l.concat(a)}else{o.level=e.level;o.headerContent=e.generator(e.key,e.rows.length,e.rows,e);o.rowCount=e.getRows().length;l.push(o);e.getRows().forEach(function(e){l.push(e.getData("data"))})}});return l}},{key:"getGroupedData",value:function(){return this.pullGroupListData(this.groupList)}},{key:"getRowGroup",value:function(e){var t=!1;this.groupList.forEach(function(l){var o=l.getRowGroup(e);if(o){t=o}});return t}},{key:"countGroups",value:function(){return this.groupList.length}},{key:"generateGroups",value:function(e){var t=this,l=this.groups;this.groups={};this.groupList=[];if(this.allowedValues&&this.allowedValues[0]){this.allowedValues[0].forEach(function(e){t.createGroup(e,0,l)});e.forEach(function(e){t.assignRowToExistingGroup(e,l)})}else{e.forEach(function(e){t.assignRowToGroup(e,l)})}}},{key:"createGroup",value:function(e,t,l){var o=t+"_"+e,a;l=l||[];a=new Se(this,!1,t,e,this.groupIDLookups[0].field,this.headerGenerator[0],l[o]);this.groups[o]=a;this.groupList.push(a)}},{key:"assignRowToExistingGroup",value:function(e){var t=this.groupIDLookups[0].func(e.getData()),l="0_"+t;if(this.groups[l]){this.groups[l].addRow(e)}}},{key:"assignRowToGroup",value:function(e,t){var l=this.groupIDLookups[0].func(e.getData()),o=!this.groups["0_"+l];if(o){this.createGroup(l,0,t)}this.groups["0_"+l].addRow(e);return!o}},{key:"reassignRowToGroup",value:function(e){if("row"===e.type){var t=e.modules.group,l=t.getPath(),o=this.getExpectedPath(e),a=!0,a=l.length==o.length&&l.every(function(e,t){return e===o[t]});if(!a){t.removeRow(e);this.assignRowToGroup(e,this.groups);this.refreshData(!0)}}}},{key:"getExpectedPath",value:function(e){var t=[],l=e.getData();this.groupIDLookups.forEach(function(e){t.push(e.func(l))});return t}},{key:"updateGroupRows",value:function(e){var t=[];this.groupList.forEach(function(e){t=t.concat(e.getHeadersAndRows())});if(e){this.refreshData(!0,this.displayHandler)}return t}},{key:"scrollHeaders",value:function(e){if("virtual"===this.table.options.renderHorizontal){e-=this.table.columnManager.renderer.vDomPadLeft}e=e+"px";this.groupList.forEach(function(t){t.scrollHeader(e)})}},{key:"removeGroup",value:function(e){var t=e.level+"_"+e.key,l;if(this.groups[t]){delete this.groups[t];l=this.groupList.indexOf(e);if(-1<l){this.groupList.splice(l,1)}}}}]);return l}(se);He.moduleName="groupRows";var ze=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.history=[];o.index=-1;o.registerTableOption("history",!1);return o}o(l,[{key:"initialize",value:function(){if(this.table.options.history){this.subscribe("cell-value-updated",this.cellUpdated.bind(this));this.subscribe("cell-delete",this.clearComponentHistory.bind(this));this.subscribe("row-delete",this.rowDeleted.bind(this));this.subscribe("rows-wipe",this.clear.bind(this));this.subscribe("row-added",this.rowAdded.bind(this));this.subscribe("row-move",this.rowMoved.bind(this))}this.registerTableFunction("undo",this.undo.bind(this));this.registerTableFunction("redo",this.redo.bind(this));this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this));this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this));this.registerTableFunction("clearHistory",this.clear.bind(this))}},{key:"rowMoved",value:function(e,t,l){this.action("rowMove",e,{posFrom:this.table.rowManager.getRowPosition(e),posTo:this.table.rowManager.getRowPosition(t),to:t,after:l})}},{key:"rowAdded",value:function(e,t,l,o){this.action("rowAdd",e,{data:t,pos:l,index:o})}},{key:"rowDeleted",value:function(e){var t,l;if(this.table.options.groupBy){l=e.getComponent().getGroup().rows;t=l.indexOf(e);if(t){t=l[t-1]}}else{t=e.table.rowManager.getRowIndex(e);if(t){t=e.table.rowManager.rows[t-1]}}this.action("rowDelete",e,{data:e.getData(),pos:!t,index:t})}},{key:"cellUpdated",value:function(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}},{key:"clear",value:function(){this.history=[];this.index=-1}},{key:"action",value:function(e,t,l){this.history=this.history.slice(0,this.index+1);this.history.push({type:e,component:t,data:l});this.index++}},{key:"getHistoryUndoSize",value:function(){return this.index+1}},{key:"getHistoryRedoSize",value:function(){return this.history.length-(this.index+1)}},{key:"clearComponentHistory",value:function(e){var t=this.history.findIndex(function(t){return t.component===e});if(-1<t){this.history.splice(t,1);if(t<=this.index){this.index--}this.clearComponentHistory(e)}}},{key:"undo",value:function(){if(-1<this.index){var e=this.history[this.index];l.undoers[e.type].call(this,e);this.index--;this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data);return!0}else{console.warn("History Undo Error - No more history to undo");return!1}}},{key:"redo",value:function(){if(this.history.length-1>this.index){this.index++;var e=this.history[this.index];l.redoers[e.type].call(this,e);this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data);return!0}else{console.warn("History Redo Error - No more history to redo");return!1}}},{key:"_rebindRow",value:function(e,t){this.history.forEach(function(l){if(l.component instanceof $){if(l.component===e){l.component=t}}else if(l.component instanceof W){if(l.component.row===e){var o=l.component.column.getField();if(o){l.component=t.getCell(o)}}}})}}]);return l}(se);ze.moduleName="history";ze.undoers={cellEdit:function(e){e.component.setValueProcessData(e.data.oldValue);e.component.cellRendered()},rowAdd:function(e){e.component.deleteActual()},rowDelete:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.updateGroupRows(!0)}this._rebindRow(e.component,t)},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posFrom],!e.data.after);this.table.rowManager.redraw()}};ze.redoers={cellEdit:function(e){e.component.setValueProcessData(e.data.newValue);e.component.cellRendered()},rowAdd:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.updateGroupRows(!0)}this._rebindRow(e.component,t)},rowDelete:function(e){e.component.deleteActual()},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posTo],e.data.after);this.table.rowManager.redraw()}};var Pe=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.fieldIndex=[];l.hasIndex=!1;return l}o(n,[{key:"initialize",value:function(){this.tableElementCheck()}},{key:"tableElementCheck",value:function(){if(this.table.originalElement&&"TABLE"===this.table.originalElement.tagName){this.parseTable()}}},{key:"parseTable",value:function(){var e=this.table.originalElement,t=this.table.options,l=t.columns,o=e.getElementsByTagName("th"),a=e.getElementsByTagName("tbody")[0],n=[];this.hasIndex=!1;this.dispatchExternal("htmlImporting");a=a?a.getElementsByTagName("tr"):[];this._extractOptions(e,t);if(o.length){this._extractHeaders(o,a)}else{this._generateBlankHeaders(o,a)}for(var r=0;r<a.length;r++){var s=a[r],d=s.getElementsByTagName("td"),u={};if(!this.hasIndex){u[t.index]=r}for(var c=0,m;c<d.length;c++){m=d[c];if("undefined"!=typeof this.fieldIndex[c]){u[this.fieldIndex[c]]=m.innerHTML}}n.push(u)}t.data=n;this.dispatchExternal("htmlImported")}},{key:"_extractOptions",value:function(t,l,o){var a=t.attributes,n=o?Object.assign([],o):Object.keys(l),r={};n.forEach(function(e){r[e.toLowerCase()]=e});for(var s in a){var d=a[s],u;if(d&&"object"==e(d)&&d.name&&0===d.name.indexOf("tabulator-")){u=d.name.replace("tabulator-","");if("undefined"!=typeof r[u]){l[r[u]]=this._attribValue(d.value)}}}}},{key:"_attribValue",value:function(e){if("true"===e){return!0}if("false"===e){return!1}return e}},{key:"_findCol",value:function(e){var t=this.table.options.columns.find(function(t){return t.title===e});return t||!1}},{key:"_extractHeaders",value:function(e){for(var t=0;t<e.length;t++){var l=e[t],o=!1,a=this._findCol(l.textContent),n;if(a){o=!0}else{a={title:l.textContent.trim()}}if(!a.field){a.field=l.textContent.trim().toLowerCase().replace(" ","_")}n=l.getAttribute("width");if(n&&!a.width){a.width=n}l.attributes;this._extractOptions(l,a,G.prototype.defaultOptionList);this.fieldIndex[t]=a.field;if(a.field==this.table.options.index){this.hasIndex=!0}if(!o){this.table.options.columns.push(a)}}}},{key:"_generateBlankHeaders",value:function(e){for(var t=0;t<e.length;t++){var l=e[t],o={title:"",field:"col"+t};this.fieldIndex[t]=o.field;var a=l.getAttribute("width");if(a){o.width=a}this.table.options.columns.push(o)}}}]);return n}(se);Pe.moduleName="htmlTableImport";var Ae=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"};o.subscribers={};o.touchSubscribers={};o.columnSubscribers={};o.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}};o.registerColumnOption("headerClick");o.registerColumnOption("headerDblClick");o.registerColumnOption("headerContext");o.registerColumnOption("headerMouseEnter");o.registerColumnOption("headerMouseLeave");o.registerColumnOption("headerMouseOver");o.registerColumnOption("headerMouseOut");o.registerColumnOption("headerMouseMove");o.registerColumnOption("headerTap");o.registerColumnOption("headerDblTap");o.registerColumnOption("headerTapHold");o.registerColumnOption("cellClick");o.registerColumnOption("cellDblClick");o.registerColumnOption("cellContext");o.registerColumnOption("cellMouseEnter");o.registerColumnOption("cellMouseLeave");o.registerColumnOption("cellMouseOver");o.registerColumnOption("cellMouseOut");o.registerColumnOption("cellMouseMove");o.registerColumnOption("cellTap");o.registerColumnOption("cellDblTap");o.registerColumnOption("cellTapHold");return o}o(l,[{key:"initialize",value:function(){this.initializeExternalEvents();this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}},{key:"cellContentsSelectionFixer",value:function(t){if(this.table.modExists("edit")){if(this.table.modules.edit.currentCell===this){return}}t.preventDefault();try{if(document.selection){var e=document.body.createTextRange();e.moveToElementText(this.element);e.select()}else if(window.getSelection){var e=document.createRange();e.selectNode(this.element);window.getSelection().removeAllRanges();window.getSelection().addRange(e)}}catch(t){}}},{key:"initializeExternalEvents",value:function(){for(var e in this.eventMap){this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}}},{key:"subscriptionChanged",value:function(e,t){if(t){if(!this.subscribers[e]){if(this.eventMap[e].includes("-")){this.subscribers[e]=this.handle.bind(this,e);this.subscribe(this.eventMap[e],this.subscribers[e])}else{this.subscribeTouchEvents(e)}}}else{if(this.eventMap[e].includes("-")){if(this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)){this.unsubscribe(this.eventMap[e],this.subscribers[e]);delete this.subscribers[e]}}else{this.unsubscribeTouchEvents(e)}}}},{key:"subscribeTouchEvents",value:function(e){var t=this.eventMap[e];if(!this.touchSubscribers[t+"-touchstart"]){this.touchSubscribers[t+"-touchstart"]=this.handleTouch.bind(this,t,"start");this.touchSubscribers[t+"-touchend"]=this.handleTouch.bind(this,t,"end");this.subscribe(t+"-touchstart",this.touchSubscribers[t+"-touchstart"]);this.subscribe(t+"-touchend",this.touchSubscribers[t+"-touchend"])}this.subscribers[e]=!0}},{key:"unsubscribeTouchEvents",value:function(e){var t=!0,l=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(var o in this.eventMap){if(this.eventMap[o]===l){if(this.subscribers[o]){t=!1}}}if(t){this.unsubscribe(l+"-touchstart",this.touchSubscribers[l+"-touchstart"]);this.unsubscribe(l+"-touchend",this.touchSubscribers[l+"-touchend"]);delete this.touchSubscribers[l+"-touchstart"];delete this.touchSubscribers[l+"-touchend"]}}}},{key:"initializeColumn",value:function(e){var t=e.definition;for(var l in this.eventMap){if(t[l]){this.subscriptionChanged(l,!0);if(!this.columnSubscribers[l]){this.columnSubscribers[l]=[]}this.columnSubscribers[l].push(e)}}}},{key:"handle",value:function(t,l,e){this.dispatchEvent(t,l,e)}},{key:"handleTouch",value:function(t,l,o,e){var a=this,n=this.touchWatchers[t];if("column"===t){t="header"}switch(l){case"start":n.tap=!0;clearTimeout(n.tapHold);n.tapHold=setTimeout(function(){clearTimeout(n.tapHold);n.tapHold=null;n.tap=null;clearTimeout(n.tapDbl);n.tapDbl=null;a.dispatchEvent(t+"TapHold",o,e)},1e3);break;case"end":if(n.tap){n.tap=null;this.dispatchEvent(t+"Tap",o,e)}if(n.tapDbl){clearTimeout(n.tapDbl);n.tapDbl=null;this.dispatchEvent(t+"DblTap",o,e)}else{n.tapDbl=setTimeout(function(){clearTimeout(n.tapDbl);n.tapDbl=null},300)}clearTimeout(n.tapHold);n.tapHold=null;break;}}},{key:"dispatchEvent",value:function(t,l,e){var o=e.getComponent(),a;if(this.columnSubscribers[t]){if(e instanceof W){a=e.column.definition[t]}else if(e instanceof G){a=e.definition[t]}if(a){a(l,o)}}this.dispatchExternal(t,l,o)}}]);return l}(se);Ae.moduleName="interaction";var _e=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.watchKeys=null;l.pressedKeys=null;l.keyupBinding=!1;l.keydownBinding=!1;l.registerTableOption("keybindings",[]);l.registerTableOption("tabEndNewRow",!1);return l}o(n,[{key:"initialize",value:function(){var e=this.table.options.keybindings,t={};this.watchKeys={};this.pressedKeys=[];if(!1!==e){for(var l in n.bindings){t[l]=n.bindings[l]}if(Object.keys(e).length){for(var o in e){t[o]=e[o]}}this.mapBindings(t);this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}},{key:"mapBindings",value:function(t){var l=this,o=function(o){if(n.actions[o]){if(t[o]){if("object"!==e(t[o])){t[o]=[t[o]]}t[o].forEach(function(e){l.mapBinding(o,e)})}}else{console.warn("Key Binding Error - no such action:",o)}};for(var a in t){o(a)}}},{key:"mapBinding",value:function(e,t){var l=this,o={action:n.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1},a=t.toString().toLowerCase().split(" ").join("").split("+");a.forEach(function(e){switch(e){case"ctrl":o.ctrl=!0;break;case"shift":o.shift=!0;break;case"meta":o.meta=!0;break;default:e=parseInt(e);o.keys.push(e);if(!l.watchKeys[e]){l.watchKeys[e]=[]}l.watchKeys[e].push(o);}})}},{key:"bindEvents",value:function(){var t=this;this.keyupBinding=function(l){var e=l.keyCode,o=t.watchKeys[e];if(o){t.pressedKeys.push(e);o.forEach(function(e){t.checkBinding(l,e)})}};this.keydownBinding=function(l){var e=l.keyCode,o=t.watchKeys[e];if(o){var a=t.pressedKeys.indexOf(e);if(-1<a){t.pressedKeys.splice(a,1)}}};this.table.element.addEventListener("keydown",this.keyupBinding);this.table.element.addEventListener("keyup",this.keydownBinding)}},{key:"clearBindings",value:function(){if(this.keyupBinding){this.table.element.removeEventListener("keydown",this.keyupBinding)}if(this.keydownBinding){this.table.element.removeEventListener("keyup",this.keydownBinding)}}},{key:"checkBinding",value:function(t,e){var l=this,o=!0;if(t.ctrlKey==e.ctrl&&t.shiftKey==e.shift&&t.metaKey==e.meta){e.keys.forEach(function(e){var t=l.pressedKeys.indexOf(e);if(-1==t){o=!1}});if(o){e.action.call(this,t)}return!0}return!1}}]);return n}(se);_e.moduleName="keybindings";_e.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"};_e.actions={keyBlock:function(t){t.stopPropagation();t.preventDefault()},scrollPageUp:function(t){var e=this.table.rowManager,l=e.scrollTop-e.element.clientHeight,o=e.element.scrollHeight;t.preventDefault();if(e.displayRowsCount){if(0<=l){e.element.scrollTop=l}else{e.scrollToRow(e.getDisplayRows()[0])}}this.table.element.focus()},scrollPageDown:function(t){var e=this.table.rowManager,l=e.scrollTop+e.element.clientHeight,o=e.element.scrollHeight;t.preventDefault();if(e.displayRowsCount){if(l<=o){e.element.scrollTop=l}else{e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])}}this.table.element.focus()},scrollToStart:function(t){var e=this.table.rowManager;t.preventDefault();if(e.displayRowsCount){e.scrollToRow(e.getDisplayRows()[0])}this.table.element.focus()},scrollToEnd:function(t){var e=this.table.rowManager;t.preventDefault();if(e.displayRowsCount){e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])}this.table.element.focus()},navPrev:function(t){this.dispatch("keybinding-nav-prev",t)},navNext:function(t){this.dispatch("keybinding-nav-next",t)},navLeft:function(t){this.dispatch("keybinding-nav-left",t)},navRight:function(t){this.dispatch("keybinding-nav-right",t)},navUp:function(t){this.dispatch("keybinding-nav-up",t)},navDown:function(t){this.dispatch("keybinding-nav-down",t)},undo:function(t){var e=!1;if(this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")){e=this.table.modules.edit.currentCell;if(!e){t.preventDefault();this.table.modules.history.undo()}}},redo:function(t){var e=!1;if(this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")){e=this.table.modules.edit.currentCell;if(!e){t.preventDefault();this.table.modules.history.redo()}}},copyToClipboard:function(){if(!this.table.modules.edit.currentCell){if(this.table.modExists("clipboard",!0)){this.table.modules.clipboard.copy(!1,!0)}}}};var Oe=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.menuElements=[];o.blurEvent=o.hideMenu.bind(d(o));o.escEvent=o.escMenu.bind(d(o));o.nestedMenuBlock=!1;o.positionReversedX=!1;o.registerTableOption("rowContextMenu",!1);o.registerTableOption("rowClickMenu",!1);o.registerTableOption("groupContextMenu",!1);o.registerTableOption("groupClickMenu",!1);o.registerColumnOption("headerContextMenu");o.registerColumnOption("headerMenu");o.registerColumnOption("contextMenu");o.registerColumnOption("clickMenu");return o}o(l,[{key:"initialize",value:function(){this.subscribe("cell-layout",this.layoutCell.bind(this));this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("row-init",this.initializeRow.bind(this))}},{key:"layoutCell",value:function(e){if(e.column.definition.contextMenu||e.column.definition.clickMenu){this.initializeCell(e)}}},{key:"initializeColumn",value:function(e){var t=e.definition;if(t.headerContextMenu||t.headerClickMenu||t.headerMenu){this.initializeColumnHeader(e)}}},{key:"initializeColumnHeader",value:function(t){var l=this,o;if(t.definition.headerContextMenu){t.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,t,t.definition.headerContextMenu));this.tapHold(t,t.definition.headerContextMenu)}if(t.definition.headerMenu){o=document.createElement("span");o.classList.add("tabulator-header-menu-button");o.innerHTML="&vellip;";o.addEventListener("click",function(o){o.stopPropagation();o.preventDefault();l.LoadMenuEvent(t,t.definition.headerMenu,o)});t.titleElement.insertBefore(o,t.titleElement.firstChild)}}},{key:"LoadMenuEvent",value:function(t,l,o){l="function"==typeof l?l.call(this.table,t.getComponent(),o):l;this.loadMenu(o,t,l)}},{key:"tapHold",value:function t(l,o){var a=this,n=l.getElement(),t=null,r=!1;n.addEventListener("touchstart",function(n){clearTimeout(t);r=!1;t=setTimeout(function(){clearTimeout(t);t=null;r=!0;a.LoadMenuEvent(l,o,n)},1e3)},{passive:!0});n.addEventListener("touchend",function(l){clearTimeout(t);t=null;if(r){l.preventDefault()}})}},{key:"initializeCell",value:function(e){if(e.column.definition.contextMenu){e.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.column.definition.contextMenu));this.tapHold(e,e.column.definition.contextMenu)}if(e.column.definition.clickMenu){e.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,e,e.column.definition.clickMenu))}}},{key:"initializeRow",value:function(e){if(this.table.options.rowContextMenu){e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.rowContextMenu));this.tapHold(e,this.table.options.rowContextMenu)}if(this.table.options.rowClickMenu){e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.rowClickMenu))}}},{key:"initializeGroup",value:function(e){if(this.table.options.groupContextMenu){e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.groupContextMenu));this.tapHold(e,this.table.options.groupContextMenu)}if(this.table.options.groupClickMenu){e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.groupClickMenu))}}},{key:"loadMenu",value:function(t,l,o,a){var n=this,r=!(t instanceof MouseEvent),s=document.createElement("div");s.classList.add("tabulator-menu");if(!r){t.preventDefault()}if(!o||!o.length){return}if(!a){if(this.nestedMenuBlock){if(this.isOpen()){return}}else{this.nestedMenuBlock=setTimeout(function(){n.nestedMenuBlock=!1},100)}this.hideMenu();this.menuElements=[]}o.forEach(function(t){var o=document.createElement("div"),a=t.label,r=t.disabled;if(t.separator){o.classList.add("tabulator-menu-separator")}else{o.classList.add("tabulator-menu-item");if("function"==typeof a){a=a.call(n.table,l.getComponent())}if(a instanceof Node){o.appendChild(a)}else{o.innerHTML=a}if("function"==typeof r){r=r.call(n.table,l.getComponent())}if(r){o.classList.add("tabulator-menu-item-disabled");o.addEventListener("click",function(t){t.stopPropagation()})}else{if(t.menu&&t.menu.length){o.addEventListener("click",function(a){a.stopPropagation();n.hideOldSubMenus(s);n.loadMenu(a,l,t.menu,o)})}else{if(t.action){o.addEventListener("click",function(o){t.action(o,l.getComponent())})}}}if(t.menu&&t.menu.length){o.classList.add("tabulator-menu-item-submenu")}}s.appendChild(o)});s.addEventListener("click",function(){n.hideMenu()});this.menuElements.push(s);this.positionMenu(s,a,r,t)}},{key:"hideOldSubMenus",value:function(e){var t=this.menuElements.indexOf(e);if(-1<t){for(var l=this.menuElements.length-1,o;l>t;l--){o=this.menuElements[l];if(o.parentNode){o.parentNode.removeChild(o)}this.menuElements.pop()}}}},{key:"positionMenu",value:function(t,l,o,a){var e=this,n=Math.max(document.body.offsetHeight,window.innerHeight),r,s,d;if(!l){r=o?a.touches[0].pageX:a.pageX;s=o?a.touches[0].pageY:a.pageY;this.positionReversedX=!1}else{d=j.elOffset(l);r=d.left+l.offsetWidth;s=d.top-1}t.style.top=s+"px";t.style.left=r+"px";setTimeout(function(){e.table.rowManager.element.addEventListener("scroll",e.blurEvent);document.body.addEventListener("click",e.blurEvent);document.body.addEventListener("contextmenu",e.blurEvent);window.addEventListener("resize",e.blurEvent);document.body.addEventListener("keydown",e.escEvent)},100);document.body.appendChild(t);if(s+t.offsetHeight>=n){t.style.top="";if(l){t.style.bottom=n-d.top-l.offsetHeight-1+"px"}else{t.style.bottom=n-s+"px"}}if(r+t.offsetWidth>=document.body.offsetWidth||this.positionReversedX){t.style.left="";if(l){t.style.right=document.documentElement.offsetWidth-d.left+"px"}else{t.style.right=document.documentElement.offsetWidth-r+"px"}this.positionReversedX=!0}}},{key:"isOpen",value:function(){return!!this.menuElements.length}},{key:"escMenu",value:function(t){if(27==t.keyCode){this.hideMenu()}}},{key:"hideMenu",value:function(){this.menuElements.forEach(function(e){if(e.parentNode){e.parentNode.removeChild(e)}});document.body.removeEventListener("keydown",this.escEvent);document.body.removeEventListener("click",this.blurEvent);document.body.removeEventListener("contextmenu",this.blurEvent);window.removeEventListener("resize",this.blurEvent);this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}]);return l}(se);Oe.moduleName="menu";var Be=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.placeholderElement=o.createPlaceholderElement();o.hoverElement=!1;o.checkTimeout=!1;o.checkPeriod=250;o.moving=!1;o.toCol=!1;o.toColAfter=!1;o.startX=0;o.autoScrollMargin=40;o.autoScrollStep=5;o.autoScrollTimeout=!1;o.touchMove=!1;o.moveHover=o.moveHover.bind(d(o));o.endMove=o.endMove.bind(d(o));o.registerTableOption("movableColumns",!1);return o}o(l,[{key:"createPlaceholderElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-col");e.classList.add("tabulator-col-placeholder");return e}},{key:"initialize",value:function(){this.subscribe("column-init",this.initializeColumn.bind(this))}},{key:"initializeColumn",value:function(t){var l=this,o={},a;if(!t.modules.frozen){a=t.getElement();o.mousemove=function(o){if(t.parent===l.moving.parent){if((l.touchMove?o.touches[0].pageX:o.pageX)-j.elOffset(a).left+l.table.columnManager.element.scrollLeft>t.getWidth()/2){if(l.toCol!==t||!l.toColAfter){a.parentNode.insertBefore(l.placeholderElement,a.nextSibling);l.moveColumn(t,!0)}}else{if(l.toCol!==t||l.toColAfter){a.parentNode.insertBefore(l.placeholderElement,a);l.moveColumn(t,!1)}}}}.bind(l);a.addEventListener("mousedown",function(o){l.touchMove=!1;if(1===o.which){l.checkTimeout=setTimeout(function(){l.startMove(o,t)},l.checkPeriod)}});a.addEventListener("mouseup",function(t){if(1===t.which){if(l.checkTimeout){clearTimeout(l.checkTimeout)}}});l.bindTouchEvents(t)}t.modules.moveColumn=o}},{key:"bindTouchEvents",value:function(t){var l=this,o=t.getElement(),a=!1,n,r,s,d,u,c;o.addEventListener("touchstart",function(o){l.checkTimeout=setTimeout(function(){l.touchMove=!0;n=t.nextColumn();s=n?n.getWidth()/2:0;r=t.prevColumn();d=r?r.getWidth()/2:0;u=0;c=0;a=!1;l.startMove(o,t)},l.checkPeriod)},{passive:!0});o.addEventListener("touchmove",function(o){var e,m;if(l.moving){l.moveHover(o);if(!a){a=o.touches[0].pageX}e=o.touches[0].pageX-a;if(0<e){if(n&&e-u>s){m=n;if(m!==t){a=o.touches[0].pageX;m.getElement().parentNode.insertBefore(l.placeholderElement,m.getElement().nextSibling);l.moveColumn(m,!0)}}}else{if(r&&-e-c>d){m=r;if(m!==t){a=o.touches[0].pageX;m.getElement().parentNode.insertBefore(l.placeholderElement,m.getElement());l.moveColumn(m,!1)}}}if(m){n=m.nextColumn();u=s;s=n?n.getWidth()/2:0;r=m.prevColumn();c=d;d=r?r.getWidth()/2:0}}},{passive:!0});o.addEventListener("touchend",function(t){if(l.checkTimeout){clearTimeout(l.checkTimeout)}if(l.moving){l.endMove(t)}})}},{key:"startMove",value:function(t,e){var l=e.getElement(),o=this.table.columnManager.getElement(),a=this.table.columnManager.getHeadersElement();this.moving=e;this.startX=(this.touchMove?t.touches[0].pageX:t.pageX)-j.elOffset(l).left;this.table.element.classList.add("tabulator-block-select");this.placeholderElement.style.width=e.getWidth()+"px";this.placeholderElement.style.height=e.getHeight()+"px";l.parentNode.insertBefore(this.placeholderElement,l);l.parentNode.removeChild(l);this.hoverElement=l.cloneNode(!0);this.hoverElement.classList.add("tabulator-moving");this.table.columnManager.getElement().appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.bottom=o.clientHeight-a.offsetHeight+"px";if(!this.touchMove){this._bindMouseMove();document.body.addEventListener("mousemove",this.moveHover);document.body.addEventListener("mouseup",this.endMove)}this.moveHover(t)}},{key:"_bindMouseMove",value:function(){this.table.columnManager.columnsByIndex.forEach(function(e){if(e.modules.moveColumn.mousemove){e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)}})}},{key:"_unbindMouseMove",value:function(){this.table.columnManager.columnsByIndex.forEach(function(e){if(e.modules.moveColumn.mousemove){e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)}})}},{key:"moveColumn",value:function(e,t){var l=this.moving.getCells();this.toCol=e;this.toColAfter=t;if(t){e.getCells().forEach(function(e,t){var o=e.getElement(!0);if(o.parentNode&&l[t]){o.parentNode.insertBefore(l[t].getElement(),o.nextSibling)}})}else{e.getCells().forEach(function(e,t){var o=e.getElement(!0);if(o.parentNode&&l[t]){o.parentNode.insertBefore(l[t].getElement(),o)}})}}},{key:"endMove",value:function(t){if(1===t.which||this.touchMove){this._unbindMouseMove();this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling);this.placeholderElement.parentNode.removeChild(this.placeholderElement);this.hoverElement.parentNode.removeChild(this.hoverElement);this.table.element.classList.remove("tabulator-block-select");if(this.toCol){this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter)}this.moving=!1;this.toCol=!1;this.toColAfter=!1;if(!this.touchMove){document.body.removeEventListener("mousemove",this.moveHover);document.body.removeEventListener("mouseup",this.endMove)}}}},{key:"moveHover",value:function(t){var e=this,l=this.table.columnManager.getElement(),o=l.scrollLeft,a=(this.touchMove?t.touches[0].pageX:t.pageX)-j.elOffset(l).left+o,n;this.hoverElement.style.left=a-this.startX+"px";if(a-o<this.autoScrollMargin){if(!this.autoScrollTimeout){this.autoScrollTimeout=setTimeout(function(){n=Math.max(0,o-5);e.table.rowManager.getElement().scrollLeft=n;e.autoScrollTimeout=!1},1)}}if(o+l.clientWidth-a<this.autoScrollMargin){if(!this.autoScrollTimeout){this.autoScrollTimeout=setTimeout(function(){n=Math.min(l.clientWidth,o+5);e.table.rowManager.getElement().scrollLeft=n;e.autoScrollTimeout=!1},1)}}}}]);return l}(se);Be.moduleName="moveColumn";var Ve=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.placeholderElement=l.createPlaceholderElement();l.hoverElement=!1;l.checkTimeout=!1;l.checkPeriod=150;l.moving=!1;l.toRow=!1;l.toRowAfter=!1;l.hasHandle=!1;l.startY=0;l.startX=0;l.moveHover=l.moveHover.bind(d(l));l.endMove=l.endMove.bind(d(l));l.tableRowDropEvent=!1;l.touchMove=!1;l.connection=!1;l.connectionSelectorsTables=!1;l.connectionSelectorsElements=!1;l.connectionElements=[];l.connections=[];l.connectedTable=!1;l.connectedRow=!1;l.registerTableOption("movableRows",!1);l.registerTableOption("movableRowsConnectedTables",!1);l.registerTableOption("movableRowsConnectedElements",!1);l.registerTableOption("movableRowsSender",!1);l.registerTableOption("movableRowsReceiver","insert");l.registerColumnOption("rowHandle");return l}o(n,[{key:"createPlaceholderElement",value:function(){var e=document.createElement("div");e.classList.add("tabulator-row");e.classList.add("tabulator-row-placeholder");return e}},{key:"initialize",value:function(){if(this.table.options.movableRows){this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables;this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements;this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements;this.subscribe("cell-init",this.initializeCell.bind(this));this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("row-init",this.initializeRow.bind(this))}}},{key:"initializeGroupHeader",value:function(t){var l=this,o={};o.mouseup=function(t){l.tableRowDrop(t,row)}.bind(l);o.mousemove=function(o){if(o.pageY-j.elOffset(t.element).top+l.table.rowManager.element.scrollTop>t.getHeight()/2){if(l.toRow!==t||!l.toRowAfter){var e=t.getElement();e.parentNode.insertBefore(l.placeholderElement,e.nextSibling);l.moveRow(t,!0)}}else{if(l.toRow!==t||l.toRowAfter){var e=t.getElement();if(e.previousSibling){e.parentNode.insertBefore(l.placeholderElement,e);l.moveRow(t,!1)}}}}.bind(l);t.modules.moveRow=o}},{key:"initializeRow",value:function(t){var l=this,o={},a;o.mouseup=function(o){l.tableRowDrop(o,t)}.bind(l);o.mousemove=function(o){var e=t.getElement();if(o.pageY-j.elOffset(e).top+l.table.rowManager.element.scrollTop>t.getHeight()/2){if(l.toRow!==t||!l.toRowAfter){e.parentNode.insertBefore(l.placeholderElement,e.nextSibling);l.moveRow(t,!0)}}else{if(l.toRow!==t||l.toRowAfter){e.parentNode.insertBefore(l.placeholderElement,e);l.moveRow(t,!1)}}}.bind(l);if(!this.hasHandle){a=t.getElement();a.addEventListener("mousedown",function(o){if(1===o.which){l.checkTimeout=setTimeout(function(){l.startMove(o,t)},l.checkPeriod)}});a.addEventListener("mouseup",function(t){if(1===t.which){if(l.checkTimeout){clearTimeout(l.checkTimeout)}}});this.bindTouchEvents(t,t.getElement())}t.modules.moveRow=o}},{key:"initializeColumn",value:function(e){if(e.definition.rowHandle&&!1!==this.table.options.movableRows){this.hasHandle=!0}}},{key:"initializeCell",value:function(t){if(t.column.definition.rowHandle&&!1!==this.table.options.movableRows){var l=this,o=t.getElement(!0);o.addEventListener("mousedown",function(o){if(1===o.which){l.checkTimeout=setTimeout(function(){l.startMove(o,t.row)},l.checkPeriod)}});o.addEventListener("mouseup",function(t){if(1===t.which){if(l.checkTimeout){clearTimeout(l.checkTimeout)}}});this.bindTouchEvents(t.row,o)}}},{key:"bindTouchEvents",value:function(t,l){var o=this,a=!1,n,r,s,d,u,c;l.addEventListener("touchstart",function(l){o.checkTimeout=setTimeout(function(){o.touchMove=!0;n=t.nextRow();s=n?n.getHeight()/2:0;r=t.prevRow();d=r?r.getHeight()/2:0;u=0;c=0;a=!1;o.startMove(l,t)},o.checkPeriod)},{passive:!0});this.moving,this.toRow,this.toRowAfter;l.addEventListener("touchmove",function(l){var e,m;if(o.moving){l.preventDefault();o.moveHover(l);if(!a){a=l.touches[0].pageY}e=l.touches[0].pageY-a;if(0<e){if(n&&e-u>s){m=n;if(m!==t){a=l.touches[0].pageY;m.getElement().parentNode.insertBefore(o.placeholderElement,m.getElement().nextSibling);o.moveRow(m,!0)}}}else{if(r&&-e-c>d){m=r;if(m!==t){a=l.touches[0].pageY;m.getElement().parentNode.insertBefore(o.placeholderElement,m.getElement());o.moveRow(m,!1)}}}if(m){n=m.nextRow();u=s;s=n?n.getHeight()/2:0;r=m.prevRow();c=d;d=r?r.getHeight()/2:0}}});l.addEventListener("touchend",function(t){if(o.checkTimeout){clearTimeout(o.checkTimeout)}if(o.moving){o.endMove(t);o.touchMove=!1}})}},{key:"_bindMouseMove",value:function(){this.table.rowManager.getDisplayRows().forEach(function(e){if(("row"===e.type||"group"===e.type)&&e.modules.moveRow&&e.modules.moveRow.mousemove){e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)}})}},{key:"_unbindMouseMove",value:function(){this.table.rowManager.getDisplayRows().forEach(function(e){if(("row"===e.type||"group"===e.type)&&e.modules.moveRow&&e.modules.moveRow.mousemove){e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)}})}},{key:"startMove",value:function(t,e){var l=e.getElement();this.setStartPosition(t,e);this.moving=e;this.table.element.classList.add("tabulator-block-select");this.placeholderElement.style.width=e.getWidth()+"px";this.placeholderElement.style.height=e.getHeight()+"px";if(!this.connection){l.parentNode.insertBefore(this.placeholderElement,l);l.parentNode.removeChild(l)}else{this.table.element.classList.add("tabulator-movingrow-sending");this.connectToTables(e)}this.hoverElement=l.cloneNode(!0);this.hoverElement.classList.add("tabulator-moving");if(this.connection){document.body.appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.top="0";this.hoverElement.style.width=this.table.element.clientWidth+"px";this.hoverElement.style.whiteSpace="nowrap";this.hoverElement.style.overflow="hidden";this.hoverElement.style.pointerEvents="none"}else{this.table.rowManager.getTableElement().appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.top="0";this._bindMouseMove()}document.body.addEventListener("mousemove",this.moveHover);document.body.addEventListener("mouseup",this.endMove);this.moveHover(t)}},{key:"setStartPosition",value:function(t,e){var l=this.touchMove?t.touches[0].pageX:t.pageX,o=this.touchMove?t.touches[0].pageY:t.pageY,a,n;a=e.getElement();if(this.connection){n=a.getBoundingClientRect();this.startX=n.left-l+window.pageXOffset;this.startY=n.top-o+window.pageYOffset}else{this.startY=o-a.getBoundingClientRect().top}}},{key:"endMove",value:function(t){if(!t||1===t.which||this.touchMove){this._unbindMouseMove();if(!this.connection){this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling);this.placeholderElement.parentNode.removeChild(this.placeholderElement)}this.hoverElement.parentNode.removeChild(this.hoverElement);this.table.element.classList.remove("tabulator-block-select");if(this.toRow){this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter)}this.moving=!1;this.toRow=!1;this.toRowAfter=!1;document.body.removeEventListener("mousemove",this.moveHover);document.body.removeEventListener("mouseup",this.endMove);if(this.connection){this.table.element.classList.remove("tabulator-movingrow-sending");this.disconnectFromTables()}}}},{key:"moveRow",value:function(e,t){this.toRow=e;this.toRowAfter=t}},{key:"moveHover",value:function(t){if(this.connection){this.moveHoverConnections.call(this,t)}else{this.moveHoverTable.call(this,t)}}},{key:"moveHoverTable",value:function(t){var e=this.table.rowManager.getElement(),l=e.scrollTop,o=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+l;this.hoverElement.style.top=o-this.startY+"px"}},{key:"moveHoverConnections",value:function(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px";this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"}},{key:"elementRowDrop",value:function(t,e,l){this.dispatchExternal("movableRowsElementDrop",t,e,l?l.getComponent():!1)}},{key:"connectToTables",value:function(e){var t=this,l;if(this.connectionSelectorsTables){l=this.commsConnections(this.connectionSelectorsTables);this.dispatchExternal("movableRowsSendingStart",l);this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:e})}if(this.connectionSelectorsElements){this.connectionElements=[];if(!Array.isArray(this.connectionSelectorsElements)){this.connectionSelectorsElements=[this.connectionSelectorsElements]}this.connectionSelectorsElements.forEach(function(e){if("string"==typeof e){t.connectionElements=t.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(e)))}else{t.connectionElements.push(e)}});this.connectionElements.forEach(function(l){var o=function(o){t.elementRowDrop(o,l,t.moving)};l.addEventListener("mouseup",o);l.tabulatorElementDropEvent=o;l.classList.add("tabulator-movingrow-receiving")})}}},{key:"disconnectFromTables",value:function(){var e;if(this.connectionSelectorsTables){e=this.commsConnections(this.connectionSelectorsTables);this.dispatchExternal("movableRowsSendingStop",e);this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")}this.connectionElements.forEach(function(e){e.classList.remove("tabulator-movingrow-receiving");e.removeEventListener("mouseup",e.tabulatorElementDropEvent);delete e.tabulatorElementDropEvent})}},{key:"connect",value:function(e,t){if(!this.connectedTable){this.connectedTable=e;this.connectedRow=t;this.table.element.classList.add("tabulator-movingrow-receiving");this.table.rowManager.getDisplayRows().forEach(function(e){if("row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup){e.getElement().addEventListener("mouseup",e.modules.moveRow.mouseup)}});this.tableRowDropEvent=this.tableRowDrop.bind(this);this.table.element.addEventListener("mouseup",this.tableRowDropEvent);this.dispatchExternal("movableRowsReceivingStart",t,e);return!0}else{console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable);return!1}}},{key:"disconnect",value:function(e){if(e===this.connectedTable){this.connectedTable=!1;this.connectedRow=!1;this.table.element.classList.remove("tabulator-movingrow-receiving");this.table.rowManager.getDisplayRows().forEach(function(e){if("row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup){e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)}});this.table.element.removeEventListener("mouseup",this.tableRowDropEvent);this.dispatchExternal("movableRowsReceivingStop",e)}else{console.warn("Move Row Error - trying to disconnect from non connected table")}}},{key:"dropComplete",value:function(t,l,o){var a=!1;if(o){switch(e(this.table.options.movableRowsSender)){case"string":a=this.senders[this.table.options.movableRowsSender];break;case"function":a=this.table.options.movableRowsSender;break;}if(a){a.call(this,this.moving.getComponent(),l?l.getComponent():void 0,t)}else{if(this.table.options.movableRowsSender){console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender)}}this.dispatchExternal("movableRowsSent",this.moving.getComponent(),l?l.getComponent():void 0,t)}else{this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),l?l.getComponent():void 0,t)}this.endMove()}},{key:"tableRowDrop",value:function(t,l){var o=!1,a=!1;t.stopImmediatePropagation();switch(e(this.table.options.movableRowsReceiver)){case"string":o=this.receivers[this.table.options.movableRowsReceiver];break;case"function":o=this.table.options.movableRowsReceiver;break;}if(o){a=o.call(this,this.connectedRow.getComponent(),l?l.getComponent():void 0,this.connectedTable)}else{console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver)}if(a){this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),l?l.getComponent():void 0,this.connectedTable)}else{this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),l?l.getComponent():void 0,this.connectedTable)}this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:l,success:a})}},{key:"commsReceived",value:function(e,t,l){switch(t){case"connect":return this.connect(e,l.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,l.row,l.success);}}}]);return n}(se);Ve.prototype.receivers={insert:function(e,t){this.table.addRow(e.getData(),void 0,t);return!0},add:function(e){this.table.addRow(e.getData());return!0},update:function(e,t){if(t){t.update(e.getData());return!0}return!1},replace:function(e,t){if(t){this.table.addRow(e.getData(),void 0,t);t["delete"]();return!0}return!1}};Ve.prototype.senders={delete:function(e){e["delete"]()}};Ve.moduleName="moveRow";var Ne=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.allowedTypes=["","data","edit","clipboard"];l.enabled=!0;l.registerColumnOption("mutator");l.registerColumnOption("mutatorParams");l.registerColumnOption("mutatorData");l.registerColumnOption("mutatorDataParams");l.registerColumnOption("mutatorEdit");l.registerColumnOption("mutatorEditParams");l.registerColumnOption("mutatorClipboard");l.registerColumnOption("mutatorClipboardParams");return l}o(n,[{key:"initialize",value:function(){this.subscribe("cell-value-changing",this.transformCell.bind(this));this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("row-data-init-before",this.rowDataChanged.bind(this));this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}},{key:"rowDataChanged",value:function(e,t,l){return this.transformRow(t,"data",l)}},{key:"initializeColumn",value:function(e){var t=this,l=!1,o={};this.allowedTypes.forEach(function(a){var n="mutator"+(a.charAt(0).toUpperCase()+a.slice(1)),r;if(e.definition[n]){r=t.lookupMutator(e.definition[n]);if(r){l=!0;o[n]={mutator:r,params:e.definition[n+"Params"]||{}}}}});if(l){e.modules.mutate=o}}},{key:"lookupMutator",value:function(t){var l=!1;switch(e(t)){case"string":if(n.mutators[t]){l=n.mutators[t]}else{console.warn("Mutator Error - No such mutator found, ignoring: ",t)}break;case"function":l=t;break;}return l}},{key:"transformRow",value:function(e,t,l){var o="mutator"+(t.charAt(0).toUpperCase()+t.slice(1)),a;if(this.enabled){this.table.columnManager.traverse(function(n){var r,s,d;if(n.modules.mutate){r=n.modules.mutate[o]||n.modules.mutate.mutator||!1;if(r){a=n.getFieldValue("undefined"!=typeof l?l:e);if("data"==t||"undefined"!=typeof a){d=n.getComponent();s="function"==typeof r.params?r.params(a,e,t,d):r.params;n.setFieldValue(e,r.mutator(a,e,t,s,d))}}}})}return e}},{key:"transformCell",value:function(e,t){if(e.column.modules.mutate){var l=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,o={};if(l){o=Object.assign(o,e.row.getData());e.column.setFieldValue(o,t);return l.mutator(t,o,"edit",l.params,e.getComponent())}}return t}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}}]);return n}(se);Ne.moduleName="mutator";Ne.mutators={};var Ie=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.mode="local";o.progressiveLoad=!1;o.size=0;o.page=1;o.count=5;o.max=1;o.displayIndex=0;o.initialLoad=!0;o.dataChanging=!1;o.pageSizes=[];o.dataReceivedNames={};o.dataSentNames={};o.registerTableOption("pagination",!1);o.registerTableOption("paginationMode","local");o.registerTableOption("paginationSize",!1);o.registerTableOption("paginationInitialPage",1);o.registerTableOption("paginationButtonCount",5);o.registerTableOption("paginationSizeSelector",!1);o.registerTableOption("paginationElement",!1);o.registerTableOption("paginationAddRow","page");o.registerTableOption("progressiveLoad",!1);o.registerTableOption("progressiveLoadDelay",0);o.registerTableOption("progressiveLoadScrollMargin",0);o.registerTableFunction("setMaxPage",o.setMaxPage.bind(d(o)));o.registerTableFunction("setPage",o.setPage.bind(d(o)));o.registerTableFunction("setPageToRow",o.userSetPageToRow.bind(d(o)));o.registerTableFunction("setPageSize",o.userSetPageSize.bind(d(o)));o.registerTableFunction("getPageSize",o.getPageSize.bind(d(o)));o.registerTableFunction("previousPage",o.previousPage.bind(d(o)));o.registerTableFunction("nextPage",o.nextPage.bind(d(o)));o.registerTableFunction("getPage",o.getPage.bind(d(o)));o.registerTableFunction("getPageMax",o.getPageMax.bind(d(o)));o.registerComponentFunction("row","pageTo",o.setPageToRow.bind(d(o)));return o}o(l,[{key:"initialize",value:function(){if(this.table.options.pagination){this.subscribe("row-deleted",this.rowsUpdated.bind(this));this.subscribe("row-adding-position",this.rowAddingPosition.bind(this));this.subscribe("row-added",this.rowsUpdated.bind(this));this.subscribe("data-processed",this.initialLoadComplete.bind(this));this.subscribe("table-built",this.calculatePageSizes.bind(this));if("remote"===this.table.options.paginationMode){this.subscribe("data-params",this.remotePageParams.bind(this));this.subscribe("data-loaded",this._parseRemoteData.bind(this))}if(this.table.options.progressiveLoad){console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")}this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40);this.registerDisplayHandler(this.getRows.bind(this),50);this.createElements();this.initializePaginator()}else if(this.table.options.progressiveLoad){this.subscribe("data-params",this.remotePageParams.bind(this));this.subscribe("data-loaded",this._parseRemoteData.bind(this));this.subscribe("table-built",this.calculatePageSizes.bind(this));this.initializeProgressive(this.table.options.progressiveLoad);if("scroll"===this.table.options.progressiveLoad){this.subscribe("scroll-vertical",this.scrollVertical.bind(this))}}}},{key:"rowAddingPosition",value:function(e,t){var l=this.table.rowManager,o=l.getDisplayRows(),a;if(t){if(o.length){a=o[0]}else{if(l.activeRows.length){a=l.activeRows[l.activeRows.length-1];t=!1}}}else{if(o.length){a=o[o.length-1];t=o.length<this.size?!1:!0}}return{index:a,top:t}}},{key:"calculatePageSizes",value:function(){var e,t;if(this.table.options.paginationSize){this.size=this.table.options.paginationSize}else{e=document.createElement("div");e.classList.add("tabulator-row");e.style.visibility="hidden";t=document.createElement("div");t.classList.add("tabulator-cell");t.innerHTML="Page Row Test";e.appendChild(t);this.table.rowManager.getTableElement().appendChild(e);this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight);this.table.rowManager.getTableElement().removeChild(e)}this.generatePageSizeSelectList()}},{key:"initialLoadComplete",value:function(){this.initialLoad=!1}},{key:"remotePageParams",value:function(e,t,l,o){if(!this.initialLoad){if(this.progressiveLoad&&!l||!this.progressiveLoad&&!this.dataChanging){this.reset(!0)}}o.page=this.page;if(this.size){o.size=this.size}return o}},{key:"userSetPageToRow",value:function(e){if(this.table.options.pagination){e=this.rowManager.findRow(e);if(e){return this.setPageToRow(e)}}return Promise.reject()}},{key:"userSetPageSize",value:function(e){if(this.table.options.pagination){this.setPageSize(e);return this.setPage(1)}else{return!1}}},{key:"scrollVertical",value:function(e,t){var l,o,a;if(!t&&!this.table.dataLoader.loading){l=this.table.rowManager.getElement();o=l.scrollHeight-l.clientHeight-e;a=this.table.options.progressiveLoadScrollMargin||2*l.clientHeight;if(o<a){this.nextPage()}}}},{key:"restOnRenderBefore",value:function(e,t){if(!t){if("local"===this.mode){this.reset()}}return e}},{key:"rowsUpdated",value:function(){this.refreshData(!0,"all")}},{key:"createElements",value:function(){var e;this.element=document.createElement("span");this.element.classList.add("tabulator-paginator");this.pagesElement=document.createElement("span");this.pagesElement.classList.add("tabulator-pages");e=document.createElement("button");e.classList.add("tabulator-page");e.setAttribute("type","button");e.setAttribute("role","button");e.setAttribute("aria-label","");e.setAttribute("title","");this.firstBut=e.cloneNode(!0);this.firstBut.setAttribute("data-page","first");this.prevBut=e.cloneNode(!0);this.prevBut.setAttribute("data-page","prev");this.nextBut=e.cloneNode(!0);this.nextBut.setAttribute("data-page","next");this.lastBut=e.cloneNode(!0);this.lastBut.setAttribute("data-page","last");if(this.table.options.paginationSizeSelector){this.pageSizeSelect=document.createElement("select");this.pageSizeSelect.classList.add("tabulator-page-size")}}},{key:"generatePageSizeSelectList",value:function(){var e=this,t=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector)){t=this.table.options.paginationSizeSelector;this.pageSizes=t;if(-1==this.pageSizes.indexOf(this.size)){t.unshift(this.size)}}else{if(-1==this.pageSizes.indexOf(this.size)){t=[];for(var l=1;5>l;l++){t.push(this.size*l)}this.pageSizes=t}else{t=this.pageSizes}}while(this.pageSizeSelect.firstChild){this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild)}t.forEach(function(t){var l=document.createElement("option");l.value=t;if(!0===t){e.langBind("pagination|all",function(e){l.innerHTML=e})}else{l.innerHTML=t}e.pageSizeSelect.appendChild(l)});this.pageSizeSelect.value=this.size}}},{key:"initializePaginator",value:function(e){var t=this,l;if(!e){this.langBind("pagination|first",function(e){t.firstBut.innerHTML=e});this.langBind("pagination|first_title",function(e){t.firstBut.setAttribute("aria-label",e);t.firstBut.setAttribute("title",e)});this.langBind("pagination|prev",function(e){t.prevBut.innerHTML=e});this.langBind("pagination|prev_title",function(e){t.prevBut.setAttribute("aria-label",e);t.prevBut.setAttribute("title",e)});this.langBind("pagination|next",function(e){t.nextBut.innerHTML=e});this.langBind("pagination|next_title",function(e){t.nextBut.setAttribute("aria-label",e);t.nextBut.setAttribute("title",e)});this.langBind("pagination|last",function(e){t.lastBut.innerHTML=e});this.langBind("pagination|last_title",function(e){t.lastBut.setAttribute("aria-label",e);t.lastBut.setAttribute("title",e)});this.firstBut.addEventListener("click",function(){t.setPage(1)});this.prevBut.addEventListener("click",function(){t.previousPage()});this.nextBut.addEventListener("click",function(){t.nextPage()});this.lastBut.addEventListener("click",function(){t.setPage(t.max)});if(this.table.options.paginationElement){this.element=this.table.options.paginationElement}if(this.pageSizeSelect){l=document.createElement("label");this.langBind("pagination|page_size",function(e){t.pageSizeSelect.setAttribute("aria-label",e);t.pageSizeSelect.setAttribute("title",e);l.innerHTML=e});this.element.appendChild(l);this.element.appendChild(this.pageSizeSelect);this.pageSizeSelect.addEventListener("change",function(){t.setPageSize("true"==t.pageSizeSelect.value?!0:t.pageSizeSelect.value);t.setPage(1)})}this.element.appendChild(this.firstBut);this.element.appendChild(this.prevBut);this.element.appendChild(this.pagesElement);this.element.appendChild(this.nextBut);this.element.appendChild(this.lastBut);if(!this.table.options.paginationElement&&!e){this.table.footerManager.append(this.element,this)}this.page=this.table.options.paginationInitialPage;this.count=this.table.options.paginationButtonCount}this.mode=this.table.options.paginationMode}},{key:"initializeProgressive",value:function(e){this.initializePaginator(!0);this.mode="progressive_"+e;this.progressiveLoad=!0}},{key:"trackChanges",value:function(){this.dispatch("page-changed")}},{key:"setDisplayIndex",value:function(e){this.displayIndex=e}},{key:"getDisplayIndex",value:function(){return this.displayIndex}},{key:"setMaxRows",value:function(e){if(!e){this.max=1}else{this.max=!0===this.size?1:Math.ceil(e/this.size)}if(this.page>this.max){this.page=this.max}}},{key:"reset",value:function(e){if(!this.initialLoad){if("local"==this.mode||e){this.page=1}}}},{key:"setMaxPage",value:function(e){e=parseInt(e);this.max=e||1;if(this.page>this.max){this.page=this.max;this.trigger()}}},{key:"setPage",value:function(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max);}e=parseInt(e);if(0<e&&e<=this.max||"local"!==this.mode){this.page=e;this.trackChanges();return this.trigger()}else{console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e);return Promise.reject()}}},{key:"setPageToRow",value:function(e){var t=this.table.rowManager.getDisplayRows(this.displayIndex-1),l=t.indexOf(e);if(-1<l){var o=!0===this.size?1:Math.ceil((l+1)/this.size);return this.setPage(o)}else{console.warn("Pagination Error - Requested row is not visible");return Promise.reject()}}},{key:"setPageSize",value:function(e){if(!0!==e){e=parseInt(e)}if(0<e){this.size=e}if(this.pageSizeSelect){this.generatePageSizeSelectList()}this.trackChanges()}},{key:"_setPageButtons",value:function(){var e=Math.floor((this.count-1)/2),t=Math.ceil((this.count-1)/2),l=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),o=this.page<=t?Math.min(this.count,this.max):Math.min(this.page+t,this.max);while(this.pagesElement.firstChild){this.pagesElement.removeChild(this.pagesElement.firstChild)}if(1==this.page){this.firstBut.disabled=!0;this.prevBut.disabled=!0}else{this.firstBut.disabled=!1;this.prevBut.disabled=!1}if(this.page==this.max){this.lastBut.disabled=!0;this.nextBut.disabled=!0}else{this.lastBut.disabled=!1;this.nextBut.disabled=!1}for(var a=l;a<=o;a++){if(0<a&&a<=this.max){this.pagesElement.appendChild(this._generatePageButton(a))}}this.footerRedraw()}},{key:"_generatePageButton",value:function(e){var t=this,l=document.createElement("button");l.classList.add("tabulator-page");if(e==this.page){l.classList.add("active")}l.setAttribute("type","button");l.setAttribute("role","button");this.langBind("pagination|page_title",function(t){l.setAttribute("aria-label",t+" "+e);l.setAttribute("title",t+" "+e)});l.setAttribute("data-page",e);l.textContent=e;l.addEventListener("click",function(){t.setPage(e)});return l}},{key:"previousPage",value:function(){if(1<this.page){this.page--;this.trackChanges();return this.trigger()}else{console.warn("Pagination Error - Previous page would be less than page 1:",0);return Promise.reject()}}},{key:"nextPage",value:function(){if(this.page<this.max){this.page++;this.trackChanges();return this.trigger()}else{if(!this.progressiveLoad){console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1)}return Promise.reject()}}},{key:"getPage",value:function(){return this.page}},{key:"getPageMax",value:function(){return this.max}},{key:"getPageSize",value:function(){return this.size}},{key:"getMode",value:function(){return this.mode}},{key:"getRows",value:function(e){var t,l,o;if("local"==this.mode){t=[];this.setMaxRows(e.length);if(!0===this.size){l=0;o=e.length}else{l=this.size*(this.page-1);o=l+parseInt(this.size)}this._setPageButtons();for(var a=l;a<o;a++){if(e[a]){t.push(e[a])}}return t}else{this._setPageButtons();return e.slice(0)}}},{key:"trigger",value:function(){var e=this,t;switch(this.mode){case"local":t=this.table.rowManager.scrollLeft;this.refreshData();this.table.rowManager.scrollHorizontal(t);this.dispatchExternal("pageLoaded",this.getPage());return Promise.resolve();case"remote":this.dataChanging=!0;return this.reloadData(null)["finally"](function(){e.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:console.warn("Pagination Error - no such pagination mode:",this.mode);return Promise.reject();}}},{key:"_parseRemoteData",value:function(e){var t=this,e,l;if("undefined"==typeof e.last_page){console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property")}if(e.data){this.max=parseInt(e.last_page)||1;if(this.progressiveLoad){switch(this.mode){case"progressive_load":if(1==this.page){this.table.rowManager.setData(e.data,!1,1==this.page)}else{this.table.rowManager.addRows(e.data)}if(this.page<this.max){setTimeout(function(){t.nextPage()},this.table.options.progressiveLoadDelay)}break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e.data);this.table.rowManager.setData(e,1!==this.page,1==this.page);l=this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight;if(this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+l){setTimeout(function(){t.nextPage()})}break;}return!1}else{this.dispatchExternal("pageLoaded",this.getPage())}}else{console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property")}return e.data}},{key:"footerRedraw",value:function(){var e=this.table.footerManager.element;if(0>Math.ceil(e.clientWidth)-e.scrollWidth){this.pagesElement.style.display="none"}else{this.pagesElement.style.display="";if(0>Math.ceil(e.clientWidth)-e.scrollWidth){this.pagesElement.style.display="none"}}}}]);return l}(se);Ie.moduleName="page";var We=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.mode="";o.id="";o.defWatcherBlock=!1;o.config={};o.readFunc=!1;o.writeFunc=!1;o.registerTableOption("persistence",!1);o.registerTableOption("persistenceID","");o.registerTableOption("persistenceMode",!0);o.registerTableOption("persistenceReaderFunc",!1);o.registerTableOption("persistenceWriterFunc",!1);return o}o(l,[{key:"localStorageTest",value:function(){try{window.localStorage.setItem("_tabulator_test","_tabulator_test");window.localStorage.removeItem("_tabulator_test");return!0}catch(t){return!1}}},{key:"initialize",value:function(){if(this.table.options.persistence){var e=this.table.options.persistenceMode,t=this.table.options.persistenceID,o;this.mode=!0!==e?e:this.localStorageTest()?"local":"cookie";if(this.table.options.persistenceReaderFunc){if("function"==typeof this.table.options.persistenceReaderFunc){this.readFunc=this.table.options.persistenceReaderFunc}else{if(l.readers[this.table.options.persistenceReaderFunc]){this.readFunc=l.readers[this.table.options.persistenceReaderFunc]}else{console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc)}}}else{if(l.readers[this.mode]){this.readFunc=l.readers[this.mode]}else{console.warn("Persistence Read Error - invalid reader set",this.mode)}}if(this.table.options.persistenceWriterFunc){if("function"==typeof this.table.options.persistenceWriterFunc){this.writeFunc=this.table.options.persistenceWriterFunc}else{if(l.writers[this.table.options.persistenceWriterFunc]){this.writeFunc=l.writers[this.table.options.persistenceWriterFunc]}else{console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc)}}}else{if(l.writers[this.mode]){this.writeFunc=l.writers[this.mode]}else{console.warn("Persistence Write Error - invalid writer set",this.mode)}}this.id="tabulator-"+(t||this.table.element.getAttribute("id")||"");this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns};if(this.config.page){o=this.retreiveData("page");if(o){if("undefined"!=typeof o.paginationSize&&(!0===this.config.page||this.config.page.size)){this.table.options.paginationSize=o.paginationSize}if("undefined"!=typeof o.paginationInitialPage&&(!0===this.config.page||this.config.page.page)){this.table.options.paginationInitialPage=o.paginationInitialPage}}}if(this.config.group){o=this.retreiveData("group");if(o){if("undefined"!=typeof o.groupBy&&(!0===this.config.group||this.config.group.groupBy)){this.table.options.groupBy=o.groupBy}if("undefined"!=typeof o.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)){this.table.options.groupStartOpen=o.groupStartOpen}if("undefined"!=typeof o.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)){this.table.options.groupHeader=o.groupHeader}}}if(this.config.columns){this.table.options.columns=this.load("columns",this.table.options.columns);this.subscribe("column-init",this.initializeColumn.bind(this));this.subscribe("column-show",this.save.bind(this,"columns"));this.subscribe("column-hide",this.save.bind(this,"columns"));this.subscribe("column-moved",this.save.bind(this,"columns"));this.subscribe("table-built",this.tableBuilt.bind(this),0)}this.subscribe("table-redraw",this.tableRedraw.bind(this));this.subscribe("filter-changed",this.eventSave.bind(this,"filter"));this.subscribe("sort-changed",this.eventSave.bind(this,"sort"));this.subscribe("group-changed",this.eventSave.bind(this,"group"));this.subscribe("page-changed",this.eventSave.bind(this,"page"));this.subscribe("column-resized",this.eventSave.bind(this,"columns"));this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this));this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}},{key:"eventSave",value:function(e){if(this.config[e]){this.save(e)}}},{key:"tableBuilt",value:function(){var e=this.table.options,t,l;if(this.config.sort){t=this.load("sort");if(!1==!t){this.table.initialSort=t}}if(this.config.filter){l=this.load("filter");if(!1==!l){this.table.initialFilter=l}}}},{key:"tableRedraw",value:function(e){if(e&&this.config.columns){this.save("columns")}}},{key:"getColumnLayout",value:function(){return this.parseColumns(this.table.columnManager.getColumns())}},{key:"setColumnLayout",value:function(e){this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e));return!0}},{key:"initializeColumn",value:function(e){var t,l;if(this.config.columns){this.defWatcherBlock=!0;t=e.getDefinition();l=!0===this.config.columns?Object.keys(t):this.config.columns;l.forEach(function(e){var l=Object.getOwnPropertyDescriptor(t,e),o=t[e];if(l){Object.defineProperty(t,e,{set:function(e){o=e;if(!this.defWatcherBlock){this.save("columns")}if(l.set){l.set(e)}},get:function(){if(l.get){l.get()}return o}})}});this.defWatcherBlock=!1}}},{key:"load",value:function(e,t){var l=this.retreiveData(e);if(t){l=l?this.mergeDefinition(t,l):t}return l}},{key:"retreiveData",value:function(e){return this.readFunc?this.readFunc(this.id,e):!1}},{key:"mergeDefinition",value:function(e,t){var l=this,o=[];t=t||[];t.forEach(function(t){var a=l._findColumn(e,t),n;if(a){if(!0===l.config.columns||l.config.columns==void 0){n=Object.keys(a);n.push("width")}else{n=l.config.columns}n.forEach(function(e){if("columns"!==e&&"undefined"!=typeof t[e]){a[e]=t[e]}});if(a.columns){a.columns=l.mergeDefinition(a.columns,t.columns)}o.push(a)}});e.forEach(function(e,a){var n=l._findColumn(t,e);if(!n){if(o.length>a){o.splice(a,0,e)}else{o.push(e)}}});return o}},{key:"_findColumn",value:function(e,t){var l=t.columns?"group":t.field?"field":"object";return e.find(function(e){switch(l){case"group":return e.title===t.title&&e.columns.length===t.columns.length;case"field":return e.field===t.field;case"object":return e===t;}})}},{key:"save",value:function(e){var t={};switch(e){case"columns":t=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":t=this.table.modules.filter.getFilters();break;case"sort":t=this.validateSorters(this.table.modules.sort.getSort());break;case"group":t=this.getGroupConfig();break;case"page":t=this.getPageConfig();break;}if(this.writeFunc){this.writeFunc(this.id,e,t)}}},{key:"validateSorters",value:function(e){e.forEach(function(e){e.column=e.field;delete e.field});return e}},{key:"getGroupConfig",value:function(){var e={};if(this.config.group){if(!0===this.config.group||this.config.group.groupBy){e.groupBy=this.table.options.groupBy}if(!0===this.config.group||this.config.group.groupStartOpen){e.groupStartOpen=this.table.options.groupStartOpen}if(!0===this.config.group||this.config.group.groupHeader){e.groupHeader=this.table.options.groupHeader}}return e}},{key:"getPageConfig",value:function(){var e={};if(this.config.page){if(!0===this.config.page||this.config.page.size){e.paginationSize=this.table.modules.page.getPageSize()}if(!0===this.config.page||this.config.page.page){e.paginationInitialPage=this.table.modules.page.getPage()}}return e}},{key:"parseColumns",value:function(e){var t=this,l=[],o=["headerContextMenu","headerMenu","contextMenu","clickMenu"];e.forEach(function(e){var a={},n=e.getDefinition(),r;if(e.isGroup){a.title=n.title;a.columns=t.parseColumns(e.getColumns())}else{a.field=e.getField();if(!0===t.config.columns||t.config.columns==void 0){r=Object.keys(n);r.push("width")}else{r=t.config.columns}r.forEach(function(t){switch(t){case"width":a.width=e.getWidth();break;case"visible":a.visible=e.visible;break;default:if("function"!=typeof n[t]&&-1===o.indexOf(t)){a[t]=n[t]}}})}l.push(a)});return l}}]);return l}(se);We.moduleName="persistence";We.readers={local:function(e,t){var l=localStorage.getItem(e+"-"+t);return l?JSON.parse(l):!1},cookie:function e(t,l){var e=document.cookie,o=t+"-"+l,a=e.indexOf(o+"="),n,r;if(-1<a){e=e.substr(a);n=e.indexOf(";");if(-1<n){e=e.substr(0,n)}r=e.replace(o+"=","")}return r?JSON.parse(r):!1}};We.writers={local:function(e,t,l){localStorage.setItem(e+"-"+t,JSON.stringify(l))},cookie:function(e,t,l){var o=new Date;o.setDate(o.getDate()+1e4);document.cookie=e+"-"+t+"="+JSON.stringify(l)+"; expires="+o.toUTCString()}};var Ge=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.element=!1;o.manualBlock=!1;o.registerTableOption("printAsHtml",!1);o.registerTableOption("printFormatter",!1);o.registerTableOption("printHeader",!1);o.registerTableOption("printFooter",!1);o.registerTableOption("printStyled",!0);o.registerTableOption("printRowRange","visible");o.registerTableOption("printConfig",{});o.registerColumnOption("print");o.registerColumnOption("titlePrint");return o}o(l,[{key:"initialize",value:function(){if(this.table.options.printAsHtml){window.addEventListener("beforeprint",this.replaceTable.bind(this));window.addEventListener("afterprint",this.cleanup.bind(this))}this.registerTableFunction("print",this.printFullscreen.bind(this))}},{key:"replaceTable",value:function(){if(!this.manualBlock){this.element=document.createElement("div");this.element.classList.add("tabulator-print-table");this.element.appendChild(this.table.modules["export"].genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print"));this.table.element.style.display="none";this.table.element.parentNode.insertBefore(this.element,this.table.element)}}},{key:"cleanup",value:function(){document.body.classList.remove("tabulator-print-fullscreen-hide");if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element);this.table.element.style.display=""}}},{key:"printFullscreen",value:function(e,t,l){var o=window.scrollX,a=window.scrollY,n=document.createElement("div"),r=document.createElement("div"),s=this.table.modules["export"].genereateTable("undefined"!=typeof l?l:this.table.options.printConfig,"undefined"!=typeof t?t:this.table.options.printStyled,e||this.table.options.printRowRange,"print"),d,u;this.manualBlock=!0;this.element=document.createElement("div");this.element.classList.add("tabulator-print-fullscreen");if(this.table.options.printHeader){n.classList.add("tabulator-print-header");d="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader;if("string"==typeof d){n.innerHTML=d}else{n.appendChild(d)}this.element.appendChild(n)}this.element.appendChild(s);if(this.table.options.printFooter){r.classList.add("tabulator-print-footer");u="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter;if("string"==typeof u){r.innerHTML=u}else{r.appendChild(u)}this.element.appendChild(r)}document.body.classList.add("tabulator-print-fullscreen-hide");document.body.appendChild(this.element);if(this.table.options.printFormatter){this.table.options.printFormatter(this.element,s)}window.print();this.cleanup();window.scrollTo(o,a);this.manualBlock=!1}}]);return l}(se);Ge.moduleName="print";var je=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.data=!1;o.blocked=!1;o.origFuncs={};o.currentVersion=0;o.registerTableOption("reactiveData",!1);return o}o(l,[{key:"initialize",value:function(){if(this.table.options.reactiveData){this.subscribe("cell-value-save-before",this.block.bind(this));this.subscribe("cell-value-save-after",this.unblock.bind(this));this.subscribe("row-data-save-before",this.block.bind(this));this.subscribe("row-data-save-after",this.unblock.bind(this));this.subscribe("row-data-init-after",this.watchRow.bind(this));this.subscribe("data-processing",this.watchData.bind(this));this.subscribe("table-destroy",this.unwatchData.bind(this))}}},{key:"watchData",value:function(e){var t=this,l;this.currentVersion++;l=this.currentVersion;this.unwatchData();this.data=e;this.origFuncs.push=e.push;Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var o=Array.from(arguments);if(!t.blocked&&l===t.currentVersion){o.forEach(function(e){t.table.rowManager.addRowActual(e,!1)})}return t.origFuncs.push.apply(e,arguments)}});this.origFuncs.unshift=e.unshift;Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var o=Array.from(arguments);if(!t.blocked&&l===t.currentVersion){o.forEach(function(e){t.table.rowManager.addRowActual(e,!0)})}return t.origFuncs.unshift.apply(e,arguments)}});this.origFuncs.shift=e.shift;Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var o;if(!t.blocked&&l===t.currentVersion){if(t.data.length){o=t.table.rowManager.getRowFromDataObject(t.data[0]);if(o){o.deleteActual()}}}return t.origFuncs.shift.call(e)}});this.origFuncs.pop=e.pop;Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var o;if(!t.blocked&&l===t.currentVersion){if(t.data.length){o=t.table.rowManager.getRowFromDataObject(t.data[t.data.length-1]);if(o){o.deleteActual()}}}return t.origFuncs.pop.call(e)}});this.origFuncs.splice=e.splice;Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var o=Array.from(arguments),a=0>o[0]?e.length+o[0]:o[0],n=o[1],r=o[2]?o.slice(2):!1,s;if(!t.blocked&&l===t.currentVersion){if(r){s=e[a]?t.table.rowManager.getRowFromDataObject(e[a]):!1;if(s){r.forEach(function(e){t.table.rowManager.addRowActual(e,!0,s,!0)})}else{r=r.slice().reverse();r.forEach(function(e){t.table.rowManager.addRowActual(e,!0,!1,!0)})}}if(0!==n){var d=e.slice(a,"undefined"==typeof o[1]?o[1]:a+n);d.forEach(function(e,l){var o=t.table.rowManager.getRowFromDataObject(e);if(o){o.deleteActual(l!==d.length-1)}})}if(r||0!==n){t.table.rowManager.reRenderInPosition()}}return t.origFuncs.splice.apply(e,arguments)}})}},{key:"unwatchData",value:function(){if(!1!==this.data){for(var e in this.origFuncs){Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}}}},{key:"watchRow",value:function(e){var t=e.getData();this.blocked=!0;for(var l in t){this.watchKey(e,t,l)}if(this.table.options.dataTree){this.watchTreeChildren(e)}this.blocked=!1}},{key:"watchTreeChildren",value:function(e){var l=arguments,o=e.getData()[this.table.options.dataTreeChildField],a={};function t(){this.table.modules.dataTree.initializeRow(e);this.table.modules.dataTree.layoutRow(e);this.table.rowManager.refreshActiveData("tree",!1,!0)}if(o){a.push=o.push;Object.defineProperty(o,"push",{enumerable:!1,configurable:!0,value:function(){var e=a.push.apply(o,l);t();return e}});a.unshift=o.unshift;Object.defineProperty(o,"unshift",{enumerable:!1,configurable:!0,value:function(){var e=a.unshift.apply(o,l);t();return e}});a.shift=o.shift;Object.defineProperty(o,"shift",{enumerable:!1,configurable:!0,value:function(){var e=a.shift.call(o);t();return e}});a.pop=o.pop;Object.defineProperty(o,"pop",{enumerable:!1,configurable:!0,value:function(){var e=a.pop.call(o);t();return e}});a.splice=o.splice;Object.defineProperty(o,"splice",{enumerable:!1,configurable:!0,value:function(){var e=a.splice.apply(o,l);t();return e}})}}},{key:"watchKey",value:function(e,t,l){var o=this,a=Object.getOwnPropertyDescriptor(t,l),n=t[l],r=this.currentVersion;Object.defineProperty(t,l,{set:function(t){n=t;if(!o.blocked&&r===o.currentVersion){var s={};s[l]=t;e.updateData(s)}if(a.set){a.set(t)}},get:function(){if(a.get){a.get()}return n}})}},{key:"unwatchRow",value:function(e){var t=e.getData();for(var l in t){Object.defineProperty(t,l,{value:t[l]})}}},{key:"block",value:function(){this.blocked=!0}},{key:"unblock",value:function(){this.blocked=!1}}]);return l}(se);je.moduleName="reactiveData";var Ue=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.startColumn=!1;o.startX=!1;o.startWidth=!1;o.handle=null;o.prevHandle=null;o.registerColumnOption("resizable",!0);return o}o(l,[{key:"initialize",value:function(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this));this.subscribe("column-init",this.layoutColumnHeader.bind(this))}},{key:"layoutCellHandles",value:function(e){if("row"===e.row.type){this.initializeColumn("cell",e.column,e.element)}}},{key:"layoutColumnHeader",value:function(e){this.initializeColumn("header",e,e.element)}},{key:"initializeColumn",value:function(e,t,l){var o=this,a=!1,n=t.definition.resizable;if("header"===e){a="textarea"==t.definition.formatter||t.definition.variableHeight;t.modules.resize={variableHeight:a}}if(!0===n||n==e){var r=document.createElement("div");r.className="tabulator-col-resize-handle";var s=document.createElement("div");s.className="tabulator-col-resize-handle prev";r.addEventListener("click",function(t){t.stopPropagation()});var d=function(l){var e=t.getLastColumn();if(e&&o._checkResizability(e)){o.startColumn=t;o._mouseDown(l,e,r)}};r.addEventListener("mousedown",d);r.addEventListener("touchstart",d,{passive:!0});r.addEventListener("dblclick",function(l){var e=t.getLastColumn();if(e&&o._checkResizability(e)){l.stopPropagation();e.reinitializeWidth(!0)}});s.addEventListener("click",function(t){t.stopPropagation()});var u=function(l){var e,a,n;e=t.getFirstColumn();if(e){a=o.table.columnManager.findColumnIndex(e);n=0<a?o.table.columnManager.getColumnByIndex(a-1):!1;if(n&&o._checkResizability(n)){o.startColumn=t;o._mouseDown(l,n,s)}}};s.addEventListener("mousedown",u);s.addEventListener("touchstart",u,{passive:!0});s.addEventListener("dblclick",function(l){var e,a,n;e=t.getFirstColumn();if(e){a=o.table.columnManager.findColumnIndex(e);n=0<a?o.table.columnManager.getColumnByIndex(a-1):!1;if(n&&o._checkResizability(n)){l.stopPropagation();n.reinitializeWidth(!0)}}});l.appendChild(r);l.appendChild(s)}}},{key:"_checkResizability",value:function(e){return e.definition.resizable}},{key:"_mouseDown",value:function(t,l,o){var r=this;r.table.element.classList.add("tabulator-block-select");function a(t){if(r.table.rtl){l.setWidth(r.startWidth-(("undefined"==typeof t.screenX?t.touches[0].screenX:t.screenX)-r.startX))}else{l.setWidth(r.startWidth+(("undefined"==typeof t.screenX?t.touches[0].screenX:t.screenX)-r.startX))}r.table.columnManager.renderer.rerenderColumns(!0);if(!r.table.browserSlow&&l.modules.resize&&l.modules.resize.variableHeight){l.checkCellHeights()}}function n(){if(r.startColumn.modules.edit){r.startColumn.modules.edit.blocked=!1}if(r.table.browserSlow&&l.modules.resize&&l.modules.resize.variableHeight){l.checkCellHeights()}document.body.removeEventListener("mouseup",n);document.body.removeEventListener("mousemove",a);o.removeEventListener("touchmove",a);o.removeEventListener("touchend",n);r.table.element.classList.remove("tabulator-block-select");r.dispatch("column-resized",l);r.table.externalEvents.dispatch("columnResized",l.getComponent())}t.stopPropagation();if(r.startColumn.modules.edit){r.startColumn.modules.edit.blocked=!0}r.startX="undefined"==typeof t.screenX?t.touches[0].screenX:t.screenX;r.startWidth=l.getWidth();document.body.addEventListener("mousemove",a);document.body.addEventListener("mouseup",n);o.addEventListener("touchmove",a,{passive:!0});o.addEventListener("touchend",n)}}]);return l}(se);Ue.moduleName="resizeColumns";var Ke=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.startColumn=!1;o.startY=!1;o.startHeight=!1;o.handle=null;o.prevHandle=null;o.registerTableOption("resizableRows",!1);return o}o(l,[{key:"initialize",value:function(){if(this.table.options.resizableRows){this.subscribe("row-layout-after",this.initializeRow.bind(this))}}},{key:"initializeRow",value:function(t){var l=this,o=t.getElement(),a=document.createElement("div");a.className="tabulator-row-resize-handle";var n=document.createElement("div");n.className="tabulator-row-resize-handle prev";a.addEventListener("click",function(t){t.stopPropagation()});var r=function(o){l.startRow=t;l._mouseDown(o,t,a)};a.addEventListener("mousedown",r);a.addEventListener("touchstart",r,{passive:!0});n.addEventListener("click",function(t){t.stopPropagation()});var s=function(o){var e=l.table.rowManager.prevDisplayRow(t);if(e){l.startRow=e;l._mouseDown(o,e,n)}};n.addEventListener("mousedown",s);n.addEventListener("touchstart",s,{passive:!0});o.appendChild(a);o.appendChild(n)}},{key:"_mouseDown",value:function(t,l,o){var r=this;r.table.element.classList.add("tabulator-block-select");function a(t){l.setHeight(r.startHeight+(("undefined"==typeof t.screenY?t.touches[0].screenY:t.screenY)-r.startY))}function n(){document.body.removeEventListener("mouseup",a);document.body.removeEventListener("mousemove",a);o.removeEventListener("touchmove",a);o.removeEventListener("touchend",n);r.table.element.classList.remove("tabulator-block-select");this.dispatchExternal("rowResized",l.getComponent())}t.stopPropagation();r.startY="undefined"==typeof t.screenY?t.touches[0].screenY:t.screenY;r.startHeight=l.getHeight();document.body.addEventListener("mousemove",a);document.body.addEventListener("mouseup",n);o.addEventListener("touchmove",a,{passive:!0});o.addEventListener("touchend",n)}}]);return l}(se);Ke.moduleName="resizeRows";var Xe=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.binding=!1;o.observer=!1;o.containerObserver=!1;o.tableHeight=0;o.tableWidth=0;o.containerHeight=0;o.containerWidth=0;o.autoResize=!1;o.registerTableOption("autoResize",!0);return o}o(l,[{key:"initialize",value:function(){var e=this;if(this.table.options.autoResize){var t=this.table,l;this.tableHeight=t.element.clientHeight;this.tableWidth=t.element.clientWidth;if(t.element.parentNode){this.containerHeight=t.element.parentNode.clientHeight;this.containerWidth=t.element.parentNode.clientWidth}if("undefined"!=typeof ResizeObserver&&"virtual"===t.rowManager.getRenderMode()){this.autoResize=!0;this.observer=new ResizeObserver(function(l){if(!t.browserMobile||t.browserMobile&&!t.modules.edit.currentCell){var o=Math.floor(l[0].contentRect.height),a=Math.floor(l[0].contentRect.width);if(e.tableHeight!=o||e.tableWidth!=a){e.tableHeight=o;e.tableWidth=a;if(t.element.parentNode){e.containerHeight=t.element.parentNode.clientHeight;e.containerWidth=t.element.parentNode.clientWidth}e.table.columnManager.renderer.rerenderColumns(!0);t.redraw()}}});this.observer.observe(t.element);l=window.getComputedStyle(t.element);if(this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(l.getPropertyValue("max-height")||l.getPropertyValue("min-height"))){this.containerObserver=new ResizeObserver(function(l){if(!t.browserMobile||t.browserMobile&&!t.modules.edit.currentCell){var o=Math.floor(l[0].contentRect.height),a=Math.floor(l[0].contentRect.width);if(e.containerHeight!=o||e.containerWidth!=a){e.containerHeight=o;e.containerWidth=a;e.tableHeight=t.element.clientHeight;e.tableWidth=t.element.clientWidth}t.columnManager.renderer.rerenderColumns(!0);t.redraw()}});this.containerObserver.observe(this.table.element.parentNode)}this.subscribe("table-resize",this.tableResized.bind(this))}else{this.binding=function(){if(!t.browserMobile||t.browserMobile&&!t.modules.edit.currentCell){t.columnManager.renderer.rerenderColumns(!0);t.redraw()}};window.addEventListener("resize",this.binding)}this.subscribe("table-destroy",this.clearBindings.bind(this))}}},{key:"tableResized",value:function(){this.table.rowManager.redraw()}},{key:"clearBindings",value:function(){if(this.binding){window.removeEventListener("resize",this.binding)}if(this.observer){this.observer.unobserve(this.table.element)}if(this.containerObserver){this.containerObserver.unobserve(this.table.element.parentNode)}}}]);return l}(se);Xe.moduleName="resizeTable";var qe=function(e){a(l,e);var n=c(l);function l(e){var o;t(this,l);o=n.call(this,e);o.columns=[];o.hiddenColumns=[];o.mode="";o.index=0;o.collapseFormatter=[];o.collapseStartOpen=!0;o.collapseHandleColumn=!1;o.registerTableOption("responsiveLayout",!1);o.registerTableOption("responsiveLayoutCollapseStartOpen",!0);o.registerTableOption("responsiveLayoutCollapseUseFormatters",!0);o.registerTableOption("responsiveLayoutCollapseFormatter",!1);o.registerColumnOption("responsive");return o}o(l,[{key:"initialize",value:function(){if(this.table.options.responsiveLayout){this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("column-show",this.updateColumnVisibility.bind(this));this.subscribe("column-hide",this.updateColumnVisibility.bind(this));this.subscribe("columns-loaded",this.initializeResponsivity.bind(this));this.subscribe("column-moved",this.initializeResponsivity.bind(this));this.subscribe("column-add",this.initializeResponsivity.bind(this));this.subscribe("column-delete",this.initializeResponsivity.bind(this));this.subscribe("table-redrawing",this.tableRedraw.bind(this));if("collapse"===this.table.options.responsiveLayout){this.subscribe("row-init",this.initializeRow.bind(this));this.subscribe("row-layout",this.layoutRow.bind(this))}}}},{key:"tableRedraw",value:function(e){if(-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())){if(!e){this.update()}}}},{key:"initializeResponsivity",value:function(){var e=[];this.mode=this.table.options.responsiveLayout;this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData;this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen;this.hiddenColumns=[];this.table.columnManager.columnsByIndex.forEach(function(t,l){if(t.modules.responsive){if(t.modules.responsive.order&&t.modules.responsive.visible){t.modules.responsive.index=l;e.push(t);if(!t.visible&&"collapse"===self.mode){self.hiddenColumns.push(t)}}}});e=e.reverse();e=e.sort(function(e,t){var l=t.modules.responsive.order-e.modules.responsive.order;return l||t.modules.responsive.index-e.modules.responsive.index});this.columns=e;if("collapse"===this.mode){this.generateCollapsedContent()}var t=f(this.table.columnManager.columnsByIndex),l;try{for(t.s();!(l=t.n()).done;){var o=l.value;if("responsiveCollapse"==o.definition.formatter){this.collapseHandleColumn=o;break}}}catch(e){t.e(e)}finally{t.f()}if(this.collapseHandleColumn){if(this.hiddenColumns.length){this.collapseHandleColumn.show()}else{this.collapseHandleColumn.hide()}}}},{key:"initializeColumn",value:function(e){var t=e.getDefinition();e.modules.responsive={order:"undefined"==typeof t.responsive?1:t.responsive,visible:!1===t.visible?!1:!0}}},{key:"initializeRow",value:function(e){var t;if("calc"!==e.type){t=document.createElement("div");t.classList.add("tabulator-responsive-collapse");e.modules.responsiveLayout={element:t,open:this.collapseStartOpen};if(!this.collapseStartOpen){t.style.display="none"}}}},{key:"layoutRow",value:function(e){var t=e.getElement();if(e.modules.responsiveLayout){t.appendChild(e.modules.responsiveLayout.element);this.generateCollapsedRowContent(e)}}},{key:"updateColumnVisibility",value:function(e,t){if(!t&&e.modules.responsive){e.modules.responsive.visible=e.visible;this.initialize()}}},{key:"hideColumn",value:function(e){var t=this.hiddenColumns.length;e.hide(!1,!0);if("collapse"===this.mode){this.hiddenColumns.unshift(e);this.generateCollapsedContent();if(this.collapseHandleColumn&&!t){this.collapseHandleColumn.show()}}}},{key:"showColumn",value:function(e){var t;e.show(!1,!0);e.setWidth(e.getWidth());if("collapse"===this.mode){t=this.hiddenColumns.indexOf(e);if(-1<t){this.hiddenColumns.splice(t,1)}this.generateCollapsedContent();if(this.collapseHandleColumn&&!this.hiddenColumns.length){this.collapseHandleColumn.hide()}}}},{key:"update",value:function(){var e=this,t=!0;while(t){var l="fitColumns"==e.table.modules.layout.getMode()?e.table.columnManager.getFlexBaseWidth():e.table.columnManager.getWidth(),o=(e.table.options.headerVisible?e.table.columnManager.element.clientWidth:e.table.element.clientWidth)-l;if(0>o){var a=e.columns[e.index];if(a){e.hideColumn(a);e.index++}else{t=!1}}else{var n=e.columns[e.index-1];if(n){if(0<o){if(o>=n.getWidth()){e.showColumn(n);e.index--}else{t=!1}}else{t=!1}}else{t=!1}}if(!e.table.rowManager.activeRowsCount){e.table.rowManager.renderEmptyScroll()}}}},{key:"generateCollapsedContent",value:function(){var e=this,t=this.table.rowManager.getDisplayRows();t.forEach(function(t){e.generateCollapsedRowContent(t)})}},{key:"generateCollapsedRowContent",value:function(e){var t,l;if(e.modules.responsiveLayout){t=e.modules.responsiveLayout.element;while(t.firstChild){t.removeChild(t.firstChild)}l=this.collapseFormatter(this.generateCollapsedRowData(e));if(l){t.appendChild(l)}}}},{key:"generateCollapsedRowData",value:function(e){var t=this,l=e.getData(),o=[],a;this.hiddenColumns.forEach(function(n){var r=n.getFieldValue(l);if(n.definition.title&&n.field){if(n.modules.format&&t.table.options.responsiveLayoutCollapseUseFormatters){var s=function(e){e()};a={value:!1,data:{},getValue:function(){return r},getData:function(){return l},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return n.getComponent()}};o.push({field:n.field,title:n.definition.title,value:n.modules.format.formatter.call(t.table.modules.format,a,n.modules.format.params,s)})}else{o.push({field:n.field,title:n.definition.title,value:r})}}});return o}},{key:"formatCollapsedData",value:function(e){var t=document.createElement("table");e.forEach(function(e){var l=document.createElement("tr"),o=document.createElement("td"),a=document.createElement("td"),n,r=document.createElement("strong");o.appendChild(r);this.langBind("columns|"+e.field,function(t){r.innerText=t||e.title});if(e.value instanceof Node){n=document.createElement("div");n.appendChild(e.value);a.appendChild(n)}else{a.innerHTML=e.value}l.appendChild(o);l.appendChild(a);t.appendChild(l)},this);return Object.keys(e).length?t:""}}]);return l}(se);qe.moduleName="responsiveLayout";var Ye=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.selecting=!1;l.lastClickedRow=!1;l.selectPrev=[];l.selectedRows=[];l.headerCheckboxElement=null;l.registerTableOption("selectable","highlight");l.registerTableOption("selectableRangeMode","drag");l.registerTableOption("selectableRollingSelection",!0);l.registerTableOption("selectablePersistence",!0);l.registerTableOption("selectableCheck",function(){return!0});l.registerTableFunction("selectRow",l.selectRows.bind(d(l)));l.registerTableFunction("deselectRow",l.deselectRows.bind(d(l)));l.registerTableFunction("toggleSelectRow",l.toggleRow.bind(d(l)));l.registerTableFunction("getSelectedRows",l.getSelectedRows.bind(d(l)));l.registerTableFunction("getSelectedData",l.getSelectedData.bind(d(l)));l.registerComponentFunction("row","select",l.selectRows.bind(d(l)));l.registerComponentFunction("row","deselect",l.deselectRows.bind(d(l)));l.registerComponentFunction("row","toggleSelect",l.toggleRow.bind(d(l)));l.registerComponentFunction("row","isSelected",l.isRowSelected.bind(d(l)));return l}o(n,[{key:"initialize",value:function(){if(!1!==this.table.options.selectable){this.subscribe("row-init",this.initializeRow.bind(this));this.subscribe("row-deleting",this.rowDeleted.bind(this));this.subscribe("rows-wipe",this.clearSelectionData.bind(this));this.subscribe("rows-retrieve",this.rowRetrieve.bind(this));if(this.table.options.selectable&&this.table.options.selectablePersistence){this.subscribe("data-refeshing",this.deselectRows.bind(this))}}}},{key:"rowRetrieve",value:function(e,t){return"selected"===e?this.selectedRows:t}},{key:"rowDeleted",value:function(e){this._deselectRow(e,!0)}},{key:"clearSelectionData",value:function(e){this.selecting=!1;this.lastClickedRow=!1;this.selectPrev=[];this.selectedRows=[];if(!0!==e){this._rowSelectionChanged()}}},{key:"initializeRow",value:function(t){var l=this,o=t.getElement(),a=function e(){setTimeout(function(){l.selecting=!1},50);document.body.removeEventListener("mouseup",e)};t.modules.select={selected:!1};if(l.table.options.selectableCheck.call(this.table,t.getComponent())){o.classList.add("tabulator-selectable");o.classList.remove("tabulator-unselectable");if(l.table.options.selectable&&"highlight"!=l.table.options.selectable){if("click"===l.table.options.selectableRangeMode){o.addEventListener("click",function(o){if(o.shiftKey){l.table._clearSelection();l.lastClickedRow=l.lastClickedRow||t;var e=l.table.rowManager.getDisplayRowIndex(l.lastClickedRow),a=l.table.rowManager.getDisplayRowIndex(t),n=e<=a?e:a,r=e>=a?e:a,s=l.table.rowManager.getDisplayRows().slice(0),d=s.splice(n,r-n+1);if(o.ctrlKey||o.metaKey){d.forEach(function(e){if(e!==l.lastClickedRow){if(!0!==l.table.options.selectable&&!l.isRowSelected(t)){if(l.selectedRows.length<l.table.options.selectable){l.toggleRow(e)}}else{l.toggleRow(e)}}});l.lastClickedRow=t}else{l.deselectRows(void 0,!0);if(!0!==l.table.options.selectable){if(d.length>l.table.options.selectable){d=d.slice(0,l.table.options.selectable)}}l.selectRows(d)}l.table._clearSelection()}else if(o.ctrlKey||o.metaKey){l.toggleRow(t);l.lastClickedRow=t}else{l.deselectRows(void 0,!0);l.selectRows(t);l.lastClickedRow=t}})}else{o.addEventListener("click",function(){if(!l.table.modExists("edit")||!l.table.modules.edit.getCurrentCell()){l.table._clearSelection()}if(!l.selecting){l.toggleRow(t)}});o.addEventListener("mousedown",function(o){if(o.shiftKey){l.table._clearSelection();l.selecting=!0;l.selectPrev=[];document.body.addEventListener("mouseup",a);document.body.addEventListener("keyup",a);l.toggleRow(t);return!1}});o.addEventListener("mouseenter",function(){if(l.selecting){l.table._clearSelection();l.toggleRow(t);if(l.selectPrev[1]==t){l.toggleRow(l.selectPrev[0])}}});o.addEventListener("mouseout",function(){if(l.selecting){l.table._clearSelection();l.selectPrev.unshift(t)}})}}}else{o.classList.add("tabulator-unselectable");o.classList.remove("tabulator-selectable")}}},{key:"toggleRow",value:function(e){if(this.table.options.selectableCheck.call(this.table,e.getComponent())){if(e.modules.select&&e.modules.select.selected){this._deselectRow(e)}else{this._selectRow(e)}}}},{key:"selectRows",value:function(t){var l=this,o;switch(e(t)){case"undefined":this.table.rowManager.rows.forEach(function(e){l._selectRow(e,!0,!0)});this._rowSelectionChanged();break;case"string":o=this.table.rowManager.findRow(t);if(o){this._selectRow(o,!0,!0)}else{this.table.rowManager.getRows(t).forEach(function(e){l._selectRow(e,!0,!0)})}this._rowSelectionChanged();break;default:if(Array.isArray(t)){t.forEach(function(e){l._selectRow(e,!0,!0)});this._rowSelectionChanged()}else{this._selectRow(t,!1,!0)}break;}}},{key:"_selectRow",value:function(e,t,l){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!l){if(this.selectedRows.length>=this.table.options.selectable){if(this.table.options.selectableRollingSelection){this._deselectRow(this.selectedRows[0])}else{return!1}}}var o=this.table.rowManager.findRow(e);if(o){if(-1==this.selectedRows.indexOf(o)){o.getElement().classList.add("tabulator-selected");if(!o.modules.select){o.modules.select={}}o.modules.select.selected=!0;if(o.modules.select.checkboxEl){o.modules.select.checkboxEl.checked=!0}this.selectedRows.push(o);if(this.table.options.dataTreeSelectPropagate){this.childRowSelection(o,!0)}if(!t){this.dispatchExternal("rowSelected",o.getComponent())}this._rowSelectionChanged(t)}}else{if(!t){console.warn("Selection Error - No such row found, ignoring selection:"+e)}}}},{key:"isRowSelected",value:function(e){return-1!==this.selectedRows.indexOf(e)}},{key:"deselectRows",value:function(e,t){var l=this,o;if("undefined"==typeof e){o=l.selectedRows.length;for(var a=0;a<o;a++){l._deselectRow(l.selectedRows[0],!0)}l._rowSelectionChanged(t)}else{if(Array.isArray(e)){e.forEach(function(e){l._deselectRow(e,!0)});l._rowSelectionChanged(t)}else{l._deselectRow(e,t)}}}},{key:"_deselectRow",value:function(e,t){var l=this,o=l.table.rowManager.findRow(e),a;if(o){a=l.selectedRows.findIndex(function(e){return e==o});if(-1<a){o.getElement().classList.remove("tabulator-selected");if(!o.modules.select){o.modules.select={}}o.modules.select.selected=!1;if(o.modules.select.checkboxEl){o.modules.select.checkboxEl.checked=!1}l.selectedRows.splice(a,1);if(this.table.options.dataTreeSelectPropagate){this.childRowSelection(o,!1)}if(!t){this.dispatchExternal("rowDeselected",o.getComponent())}l._rowSelectionChanged(t)}}else{if(!t){console.warn("Deselection Error - No such row found, ignoring selection:"+e)}}}},{key:"getSelectedData",value:function(){var e=[];this.selectedRows.forEach(function(t){e.push(t.getData())});return e}},{key:"getSelectedRows",value:function(){var e=[];this.selectedRows.forEach(function(t){e.push(t.getComponent())});return e}},{key:"_rowSelectionChanged",value:function(e){if(this.headerCheckboxElement){if(0===this.selectedRows.length){this.headerCheckboxElement.checked=!1;this.headerCheckboxElement.indeterminate=!1}else if(this.table.rowManager.rows.length===this.selectedRows.length){this.headerCheckboxElement.checked=!0;this.headerCheckboxElement.indeterminate=!1}else{this.headerCheckboxElement.indeterminate=!0;this.headerCheckboxElement.checked=!1}}if(!e){this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}}},{key:"registerRowSelectCheckbox",value:function(e,t){if(!e._row.modules.select){e._row.modules.select={}}e._row.modules.select.checkboxEl=t}},{key:"registerHeaderSelectCheckbox",value:function(e){this.headerCheckboxElement=e}},{key:"childRowSelection",value:function(e,t){var l=this.table.modules.dataTree.getChildren(e,!0);if(t){var o=f(l),a;try{for(o.s();!(a=o.n()).done;){var n=a.value;this._selectRow(n,!0)}}catch(e){o.e(e)}finally{o.f()}}else{var r=f(l),s;try{for(r.s();!(s=r.n()).done;){var d=s.value;this._deselectRow(d,!0)}}catch(e){r.e(e)}finally{r.f()}}}}]);return n}(se);Ye.moduleName="selectRow";function O(t,l,o,a,n,r,s){var d=s.alignEmptyValues,u=0,c;if(!t){u=!l?0:-1}else if(!l){u=1}else{switch(e(s.locale)){case"boolean":if(s.locale){c=this.langLocale()}break;case"string":c=s.locale;break;}return(t+"").toLowerCase().localeCompare((l+"").toLowerCase(),c)}if("top"===d&&"desc"===r||"bottom"===d&&"asc"===r){u*=-1}return u}function B(e,t,l,o,n,r,s){var d=window.DateTime||luxon.DateTime,u=s.format||"dd/MM/yyyy HH:mm:ss",c=s.alignEmptyValues,m=0;if("undefined"!=typeof d){e=d.fromFormat(e,u);t=d.fromFormat(t,u);if(!e.isValid){m=!t.isValid?0:-1}else if(!t.isValid){m=1}else{return e-t}if("top"===c&&"desc"===r||"bottom"===c&&"asc"===r){m*=-1}return m}else{console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}}var Je=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.sortList=[];l.changed=!1;l.registerTableOption("sortMode","local");l.registerTableOption("initialSort",!1);l.registerTableOption("columnHeaderSortMulti",!0);l.registerTableOption("sortOrderReverse",!1);l.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>");l.registerColumnOption("sorter");l.registerColumnOption("sorterParams");l.registerColumnOption("headerSort",!0);l.registerColumnOption("headerSortStartingDir");l.registerColumnOption("headerSortTristate");return l}o(n,[{key:"initialize",value:function(){this.subscribe("column-layout",this.initializeColumn.bind(this));this.subscribe("table-built",this.tableBuilt.bind(this));this.registerDataHandler(this.sort.bind(this),20);this.registerTableFunction("setSort",this.userSetSort.bind(this));this.registerTableFunction("getSorters",this.getSort.bind(this));this.registerTableFunction("clearSort",this.clearSort.bind(this));if("remote"===this.table.options.sortMode){this.subscribe("data-params",this.remoteSortParams.bind(this))}}},{key:"tableBuilt",value:function(){if(this.table.options.initialSort){this.setSort(this.table.options.initialSort)}}},{key:"remoteSortParams",value:function(e,t,l,o){var a=this.getSort();a.forEach(function(e){delete e.column});o.sort=a;return o}},{key:"userSetSort",value:function(e,t){this.setSort(e,t);this.refreshSort()}},{key:"clearSort",value:function(){this.clear();this.refreshSort()}},{key:"initializeColumn",value:function(t){var l=this,o=!1,a,r;switch(e(t.definition.sorter)){case"string":if(n.sorters[t.definition.sorter]){o=n.sorters[t.definition.sorter]}else{console.warn("Sort Error - No such sorter found: ",t.definition.sorter)}break;case"function":o=t.definition.sorter;break;}t.modules.sort={sorter:o,dir:"none",params:t.definition.sorterParams||{},startingDir:t.definition.headerSortStartingDir||"asc",tristate:t.definition.headerSortTristate};if(!1!==t.definition.headerSort){a=t.getElement();a.classList.add("tabulator-sortable");r=document.createElement("div");r.classList.add("tabulator-col-sorter");if("object"==e(this.table.options.headerSortElement)){r.appendChild(this.table.options.headerSortElement)}else{r.innerHTML=this.table.options.headerSortElement}t.titleHolderElement.appendChild(r);t.modules.sort.element=r;a.addEventListener("click",function(o){var e="",a=[],n=!1;if(t.modules.sort){if(t.modules.sort.tristate){if("none"==t.modules.sort.dir){e=t.modules.sort.startingDir}else{if(t.modules.sort.dir==t.modules.sort.startingDir){e="asc"==t.modules.sort.dir?"desc":"asc"}else{e="none"}}}else{switch(t.modules.sort.dir){case"asc":e="desc";break;case"desc":e="asc";break;default:e=t.modules.sort.startingDir;}}if(l.table.options.columnHeaderSortMulti&&(o.shiftKey||o.ctrlKey)){a=l.getSort();n=a.findIndex(function(e){return e.field===t.getField()});if(-1<n){a[n].dir=e;if(n!=a.length-1){n=a.splice(n,1)[0];if("none"!=e){a.push(n)}}}else{if("none"!=e){a.push({column:t,dir:e})}}l.setSort(a)}else{if("none"==e){l.clear()}else{l.setSort(t,e)}}l.refreshSort()}})}}},{key:"refreshSort",value:function(){if("remote"===this.table.options.sortMode){this.reloadData()}else{this.refreshData()}}},{key:"hasChanged",value:function(){var e=this.changed;this.changed=!1;return e}},{key:"getSort",value:function(){var e=this,t=[];e.sortList.forEach(function(e){if(e.column){t.push({column:e.column.getComponent(),field:e.column.getField(),dir:e.dir})}});return t}},{key:"setSort",value:function(e,t){var l=this,o=[];if(!Array.isArray(e)){e=[{column:e,dir:t}]}e.forEach(function(e){var t=l.table.columnManager.findColumn(e.column);if(t){e.column=t;o.push(e);l.changed=!0}else{console.warn("Sort Warning - Sort field does not exist and is being ignored: ",e.column)}});l.sortList=o;this.dispatch("sort-changed")}},{key:"clear",value:function(){this.setSort([])}},{key:"findSorter",value:function(t){var l=this.table.rowManager.activeRows[0],o="string",a,r;if(l){l=l.getData();a=t.getField();if(a){r=t.getFieldValue(l);switch(e(r)){case"undefined":o="string";break;case"boolean":o="boolean";break;default:if(!isNaN(r)&&""!==r){o="number"}else{if(r.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){o="alphanum"}}break;}}}return n.sorters[o]}},{key:"sort",value:function(e){var t=this,l=this.table.options.sortOrderReverse?t.sortList.slice().reverse():t.sortList,o=[],a=[];if(this.subscribedExternal("dataSorting")){this.dispatchExternal("dataSorting",t.getSort())}t.clearColumnHeaders();if("remote"!==this.table.options.sortMode){l.forEach(function(e){var l=e.column.modules.sort;if(e.column&&l){if(!l.sorter){l.sorter=t.findSorter(e.column)}e.params="function"==typeof l.params?l.params(e.column.getComponent(),e.dir):l.params;o.push(e)}t.setColumnHeader(e.column,e.dir)});if(o.length){t._sortItems(e,o)}}else{l.forEach(function(e){t.setColumnHeader(e.column,e.dir)})}if(this.subscribedExternal("dataSorted")){e.forEach(function(e){a.push(e.getComponent())});this.dispatchExternal("dataSorted",t.getSort(),a)}return e}},{key:"clearColumnHeaders",value:function(){this.table.columnManager.getRealColumns().forEach(function(e){if(e.modules.sort){e.modules.sort.dir="none";e.getElement().setAttribute("aria-sort","none")}})}},{key:"setColumnHeader",value:function(e,t){e.modules.sort.dir=t;e.getElement().setAttribute("aria-sort",t)}},{key:"_sortItems",value:function(e,t){var l=this,o=t.length-1;e.sort(function(e,a){for(var n,r=o,s;0<=r;r--){s=t[r];n=l._sortRow(e,a,s.column,s.dir,s.params);if(0!==n){break}}return n})}},{key:"_sortRow",value:function(e,t,l,o,n){var r,s,d="asc"==o?e:t,u="asc"==o?t:e;e=l.getFieldValue(d.getData());t=l.getFieldValue(u.getData());e="undefined"!=typeof e?e:"";t="undefined"!=typeof t?t:"";r=d.getComponent();s=u.getComponent();return l.modules.sort.sorter.call(this,e,t,r,s,l.getComponent(),o,n)}}]);return n}(se);Je.moduleName="sort";Je.sorters={number:function(e,t,l,o,n,r,s){var d=s.alignEmptyValues,u=s.decimalSeparator,c=s.thousandSeparator,m=0;e=e+"";t=t+"";if(c){e=e.split(c).join("");t=t.split(c).join("")}if(u){e=e.split(u).join(".");t=t.split(u).join(".")}e=parseFloat(e);t=parseFloat(t);if(isNaN(e)){m=isNaN(t)?0:-1}else if(isNaN(t)){m=1}else{return e-t}if("top"===d&&"desc"===r||"bottom"===d&&"asc"===r){m*=-1}return m},string:O,date:function(e,t,l,o,a,n,r){if(!r.format){r.format="dd/MM/yyyy"}return B.call(this,e,t,l,o,a,n,r)},time:function(e,t,l,o,a,n,r){if(!r.format){r.format="HH:mm"}return B.call(this,e,t,l,o,a,n,r)},datetime:B,boolean:function(e,t){var l=!0===e||"true"===e||"True"===e||1===e?1:0,o=!0===t||"true"===t||"True"===t||1===t?1:0;return l-o},array:function(e,t,l,o,a,n,r){var d=0,u=0,c=r.type||"length",m=r.alignEmptyValues,p=0;function s(e){switch(c){case"length":return e.length;case"sum":return e.reduce(function(e,t){return e+t});case"max":return Math.max.apply(null,e);case"min":return Math.min.apply(null,e);case"avg":return e.reduce(function(e,t){return e+t})/e.length;}}if(!Array.isArray(e)){m=!Array.isArray(t)?0:-1}else if(!Array.isArray(t)){m=1}else{d=e?s(e):0;u=t?s(t):0;return d-u}if("top"===m&&"desc"===n||"bottom"===m&&"asc"===n){p*=-1}return p},exists:function(e,t){var l="undefined"==typeof e?0:1,o="undefined"==typeof t?0:1;return l-o},alphanum:function(e,t,l,o,n,r,s){var d,u,c,m,p=0,g,h=/(\d+)|(\D+)/g,v=/\d/,f=s.alignEmptyValues,y=0;if(!e&&0!==e){y=!t&&0!==t?0:-1}else if(!t&&0!==t){y=1}else{if(isFinite(e)&&isFinite(t))return e-t;d=(e+"").toLowerCase();u=(t+"").toLowerCase();if(d===u)return 0;if(!(v.test(d)&&v.test(u)))return d>u?1:-1;d=d.match(h);u=u.match(h);g=d.length>u.length?u.length:d.length;while(p<g){c=d[p];m=u[p++];if(c!==m){if(isFinite(c)&&isFinite(m)){if("0"===c.charAt(0))c="."+c;if("0"===m.charAt(0))m="."+m;return c-m}else return c>m?1:-1}}return d.length>u.length}if("top"===f&&"desc"===r||"bottom"===f&&"asc"===r){y*=-1}return y}};var $e=function(l){a(n,l);var r=c(n);function n(e){var l;t(this,n);l=r.call(this,e);l.invalidCells=[];l.registerTableOption("validationMode","blocking");l.registerColumnOption("validator");l.registerTableFunction("getInvalidCells",l.getInvalidCells.bind(d(l)));l.registerTableFunction("clearCellValidation",l.userClearCellValidation.bind(d(l)));l.registerTableFunction("validate",l.userValidate.bind(d(l)));l.registerComponentFunction("cell","isValid",l.cellIsValid.bind(d(l)));l.registerComponentFunction("cell","clearValidation",l.clearValidation.bind(d(l)));l.registerComponentFunction("cell","validate",l.cellValidate.bind(d(l)));l.registerComponentFunction("column","validate",l.columnValidate.bind(d(l)));l.registerComponentFunction("row","validate",l.rowValidate.bind(d(l)));return l}o(n,[{key:"initialize",value:function(){this.subscribe("cell-delete",this.clearValidation.bind(this));this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}},{key:"cellIsValid",value:function(e){return e.modules.validate?!e.modules.validate.invalid:!0}},{key:"cellValidate",value:function(e){return this.validate(e.column.modules.validate,e,e.getValue())}},{key:"columnValidate",value:function(e){var t=[];e.cells.forEach(function(e){if(!this.cellValidate(e)){t.push(e.getComponent())}});return t.length?t:!0}},{key:"rowValidate",value:function(e){var t=[];e.cells.forEach(function(e){if(!this.cellValidate(e)){t.push(e.getComponent())}});return t.length?t:!0}},{key:"userClearCellValidation",value:function(e){var t=this;if(!e){e=this.getInvalidCells()}if(!Array.isArray(e)){e=[e]}e.forEach(function(e){t.clearValidation(e._getSelf())})}},{key:"userValidate",value:function(){var e=[];this.table.rowManager.rows.forEach(function(t){var l=t.validate();if(!0!==l){e=e.concat(l)}});return e.length?e:!0}},{key:"initializeColumnCheck",value:function(e){if("undefined"!=typeof e.definition.validator){this.initializeColumn(e)}}},{key:"initializeColumn",value:function(e){var t=this,l=[],o;if(e.definition.validator){if(Array.isArray(e.definition.validator)){e.definition.validator.forEach(function(e){o=t._extractValidator(e);if(o){l.push(o)}})}else{o=this._extractValidator(e.definition.validator);if(o){l.push(o)}}e.modules.validate=l.length?l:!1}}},{key:"_extractValidator",value:function(t){var l,o,a;switch(e(t)){case"string":a=t.indexOf(":");if(-1<a){l=t.substring(0,a);o=t.substring(a+1)}else{l=t}return this._buildValidator(l,o);case"function":return this._buildValidator(t);case"object":return this._buildValidator(t.type,t.parameters);}}},{key:"_buildValidator",value:function(e,t){var l="function"==typeof e?e:n.validators[e];if(!l){console.warn("Validator Setup Error - No matching validator found:",e);return!1}else{return{type:"function"==typeof e?"function":e,func:l,params:t}}}},{key:"validate",value:function(e,t,l){var o=this,a=[],n=this.invalidCells.indexOf(t);if(e){e.forEach(function(e){if(!e.func.call(o,t.getComponent(),l,e.params)){a.push({type:e.type,parameters:e.params})}})}a=a.length?a:!0;if(!t.modules.validate){t.modules.validate={}}if(!0===a){t.modules.validate.invalid=!1;t.getElement().classList.remove("tabulator-validation-fail");if(-1<n){this.invalidCells.splice(n,1)}}else{t.modules.validate.invalid=!0;if("manual"!==this.table.options.validationMode){t.getElement().classList.add("tabulator-validation-fail")}if(-1==n){this.invalidCells.push(t)}}return a}},{key:"getInvalidCells",value:function(){var e=[];this.invalidCells.forEach(function(t){e.push(t.getComponent())});return e}},{key:"clearValidation",value:function(e){var t;if(e.modules.validate&&e.modules.validate.invalid){e.getElement().classList.remove("tabulator-validation-fail");e.modules.validate.invalid=!1;t=this.invalidCells.indexOf(e);if(-1<t){this.invalidCells.splice(t,1)}}}}]);return n}(se);$e.moduleName="validate";$e.validators={integer:function(e,t){if(""===t||null===t||"undefined"==typeof t){return!0}t=+t;return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},float:function(e,t){if(""===t||null===t||"undefined"==typeof t){return!0}t=+t;return"number"==typeof t&&isFinite(t)&&0!=t%1},numeric:function(e,t){if(""===t||null===t||"undefined"==typeof t){return!0}return!isNaN(t)},string:function(e,t){if(""===t||null===t||"undefined"==typeof t){return!0}return isNaN(t)},max:function(e,t,l){if(""===t||null===t||"undefined"==typeof t){return!0}return parseFloat(t)<=l},min:function(e,t,l){if(""===t||null===t||"undefined"==typeof t){return!0}return parseFloat(t)>=l},starts:function(e,t,l){if(""===t||null===t||"undefined"==typeof t){return!0}return(t+"").toLowerCase().startsWith((l+"").toLowerCase())},ends:function(e,t,l){if(""===t||null===t||"undefined"==typeof t){return!0}return(t+"").toLowerCase().endsWith((l+"").toLowerCase())},minLength:function(e,t,l){if(""===t||null===t||"undefined"==typeof t){return!0}return(t+"").length>=l},maxLength:function(e,t,l){if(""===t||null===t||"undefined"==typeof t){return!0}return(t+"").length<=l},in:function(e,t,l){if(""===t||null===t||"undefined"==typeof t){return!0}if("string"==typeof l){l=l.split("|")}return""===t||-1<l.indexOf(t)},regex:function(e,t,l){if(""===t||null===t||"undefined"==typeof t){return!0}var o=new RegExp(l);return o.test(t)},unique:function e(t,l){if(""===l||null===l||"undefined"==typeof l){return!0}var e=!0,o=t.getData(),a=t.getColumn()._getSelf();this.table.rowManager.rows.forEach(function(t){var n=t.getData();if(n!==o){if(l==a.getFieldValue(n)){e=!1}}});return e},required:function(e,t){return""!==t&&null!==t&&"undefined"!=typeof t}};var Qe=Object.freeze({__proto__:null,AccessorModule:be,AjaxModule:he,ClipboardModule:ve,ColumnCalcsModule:ye,DataTreeModule:we,DownloadModule:Ce,EditModule:Ee,ExportModule:xe,FilterModule:Te,FormatModule:Me,FrozenColumnsModule:Le,FrozenRowsModule:De,GroupRowsModule:He,HistoryModule:ze,HtmlTableImportModule:Pe,InteractionModule:Ae,KeybindingsModule:_e,MenuModule:Oe,MoveColumnsModule:Be,MoveRowsModule:Ve,MutatorModule:Ne,PageModule:Ie,PersistenceModule:We,PrintModule:Ge,ReactiveDataModule:je,ResizeColumnsModule:Ue,ResizeRowsModule:Ke,ResizeTableModule:Xe,ResponsiveLayoutModule:qe,SelectRowModule:Ye,SortModule:Je,ValidateModule:$e}),Ze=function(e){a(l,e);var o=c(l);function l(){t(this,l);return o.apply(this,arguments)}return l}(ge);new pe(Ze,Qe);return Ze});
//# sourceMappingURL=tabulator.min.js.map
